!function(e){function t(t){for(var i,o,a=t[0],u=t[1],l=t[2],p=0,d=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(c&&c(t);d.length;)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={2:0},s=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/compiled/";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var c=u;s.push([883,0]),n()}({105:function(e,t,n){(function(t){var i,r,s,o,a,u,l,c,p,d,_,f=[].slice;r=n(20),i=n(342),e.exports=((s={}).Validator=i,s.normalizeEventName=function(e){var t;return t=new RegExp("[: ()]","g"),e=e.replace(t,"-")},s.reorderElemsByData=function(e,n,i){var s,o,a,u,l;for(o=[],l=!1,t(n).find(e).each((function(e){var n,s;if(0===e)l=this.parentElement;else if(this.parentElement!==l)throw new Error("All reordered items must be siblings");if(s=(n=t(this).detach()).data(i),r.isNumber(s))return o[s]=n})),a=0,u=o.length;a<u;a++)(s=o[a])&&s.appendTo(l)},s.cleanStringify=function(e){var t,n,i;for(n in t=[],e)""!==(i=e[n])&&t.push('<span class="atts"><i>'+n+'</i>="<em>'+i+'</em>"</span>');return t.join("&nbsp;")},s.debugFrame=(o=!1,a={position:"fixed",width:"95%",height:"80%",bottom:10,left:"2.5%",overflow:"auto",zIndex:100,backgroundColor:"rgba(255,255,255,0.7)"},(u=function(e){var n;return n=e.split("\n").join("<br>"),o=t("<div>",{class:"well debug-frame"}).html("<code>"+n+"</code>").css(a).appendTo("body")}).close=function(){if(o)return o.remove(),o=!1},u),s.launchQuestionLibrary=function(e){var n;return null==e&&(e={}),n=t("<div>",{class:"js-click-remove-iframe iframe-bg-shade"}),t("<div>").text('Launch question library in this element\n<section koboform-question-library=""></section>').appendTo(n),n.click((function(){return n.remove()})),n},s.enketoIframe=(d="https://enketo.org",p="/webform/preview",c=function(e){return""+d+p+"?form="+e},l=function(e){if(e.enketoPreviewUri&&(p=e.enketoPreviewUri),e.enketoServer)return d=e.enketoServer},(_=function(e,n){return null==n&&(n={}),l(n),console.log(n),t(".enketo-holder").append(t("<iframe>",{src:c(e)})),t(".enketo-holder iframe").load((function(){return t(".enketo-loading-message").remove()}))}).close=function(){return t(".iframe-bg-shade").remove(),t(".enketo-holder").remove()},_.fromCsv=function(e,n){var i,r,s,o,a;return null==n&&(n={}),r=t("<div>",{class:"enketo-holder"}).html('<div class=\'enketo-iframe-icon\'></div>\n<div class="enketo-loading-message">\n  <p>\n  <i class="k-spin k-icon k-icon-spinner"></i>\n  <br/>\n  Loading Preview\n</p>\n<p>\n  This will take a few seconds depending on the size of your form.\n</p>\n</div>'),a=t("<div>",{class:"js-click-remove-iframe iframe-bg-shade"}),r.appendTo("body"),a.appendTo("body"),a.click((function(){return a.remove(),r.remove()})),t(".enketo-holder .enketo-iframe-icon").click((function(){return a.remove(),r.remove()})),o=n.previewServer||"",i=JSON.stringify({body:e}),l(n),s=n.onError||function(){var e;return e=1<=arguments.length?f.call(arguments,0):[],"undefined"!=typeof console&&null!==console?console.error.apply(console,e):void 0},t.ajax({url:o+"/koboform/survey_preview/",method:"POST",data:i,complete:function(e,t){var i,u,l;return u=e.responseJSON,"success"===t&&u&&u.unique_string?(l=u.unique_string,_(o+"/koboform/survey_preview/"+l),null!=n.onSuccess?n.onSuccess():void 0):"success"!==t?(a.remove(),r.remove(),(i=e.responseText||e.statusText).split("\n").length>0&&(i=i.split("\n").slice(0,3).join("<br>")),s(i,{title:"Error launching preview"})):u&&u.error?(a.remove(),r.remove(),s(u.error)):(a.remove(),r.remove(),s("SurveyPreview response JSON is not recognized"))}})},_),s)}).call(this,n(29))},106:function(e,t,n){var i,r,s,o,a=function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=n(20),s=n(69),i=n(40),e.exports=((o={}).Option=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){return this.unset("list name"),this.unset("list_name")},t.prototype.destroy=function(){var e,t,n;return t=(e=this.list()._parent).cid,n=e.collection._parent,this.collection.remove(this),n.trigger("remove-option",t,this.cid)},t.prototype.list=function(){return this.collection},t.prototype.getKeys=function(e){var t,n,i;for(t in n=[],i=this.attributes)i[t],e?this.get(t)&&n.push(t):n.push(t);return n},t.prototype.toJSON=function(){var e,t,n;for(t in e={},n=this.attributes)n[t],e[t]=this.get(t);return e},t}(s.BaseModel),o.Options=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o.Option,t}(s.BaseCollection),o.ChoiceList=function(e){function t(e,n){var i;null==e&&(e={}),i=e.options||[],t.__super__.constructor.call(this,{name:e.name},n),this.options=new o.Options(i||[],{_parent:this})}return a(t,e),t.prototype.idAttribute="name",t.prototype.summaryObj=function(){return this.toJSON()},t.prototype.getSurvey=function(){return this.collection.getSurvey()},t.prototype.getList=function(){return this.__cascadedList?this.__cascadedList:null},t.prototype._get_previous_linked_choice_list=function(){return this.collection.find((e=this,function(t){return t.getList()===e}));var e},t.prototype._get_last_linked_choice_list=function(){var e,t;for(t=e=this;e=t._get_previous_linked_choice_list();)t=e;return t},t.prototype._get_first_linked_choice_list=function(){var e,t;for(t=e=this;e=t.getList();)t=e;return t},t.prototype._has_corresponding_row=function(){var e;return e=this.get("name"),!!this.getSurvey().rows.find((function(t){return t.get("type").get("listName")===e}))},t.prototype._create_corresponding_row_data=function(e){var t,n,i,s,o,a;for(null==e&&(e={}),i=!!e._full_path_choice_filter,n=this._get_first_linked_choice_list(),o=[],(a=[]).push((t=function(e){var t;return{label:t=e.get("name"),type:"select_one "+t,choice_filter:(i?o:r.compact([r.last(o)])).map((function(e){var t;return(t=e.get("name"))+"=${"+t+"}"})).join(" and ")}})(n)),s=n,o.push(n);s=s._get_previous_linked_choice_list();)a.push(t(s)),o.push(s);return a},t.prototype.create_corresponding_rows=function(e){var t,n,i,r,s,o,a,u;for(null==e&&(e={}),a=this._create_corresponding_row_data(),u=this.getSurvey(),t=e.at||0,s=[],n=0,i=(r=a.reverse()).length;n<i;n++)o=r[n],s.push(u.addRowAtIndex(o,t));return s},t.prototype.getOptionKeys=function(e){var t,n,i,s,o,a,u,l;for(null==e&&(e=!0),a=[],t=0,i=(u=this.options.models).length;t<i;t++)for(n=0,s=(l=u[t].getKeys(e)).length;n<s;n++)o=l[n],a.push(o);return r.uniq(a)},t.prototype.finalize=function(){var e,t,n,r,s,o,a;for(s=[],e=0,n=(a=this.options.models).length;e<n;e++)t=(o=a[e]).get("label"),(r=o.get("name"))||(r=i.sluggify(t,{preventDuplicates:s,lowerCase:!0,lrstrip:!0,characterLimit:40,incrementorPadding:!1,validXmlTag:!1}),o.set("name",r)),s.push(r)},t.prototype.clone=function(){var e;return delete(e=this.toJSON()).name,r.assign(new o.ChoiceList(e),{collection:this.collection})},t.prototype.toJSON=function(){return this.finalize(),{name:this.get("name"),options:this.options.invoke("toJSON")}},t.prototype.getNames=function(){var e;return e=this.options.map((function(e){return e.get("name")})),r.compact(e)},t}(s.BaseModel),o.ChoiceLists=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o.ChoiceList,t.prototype.create=function(){var e;return this.add(e=new o.ChoiceList({name:i.txtid()})),e},t.prototype.getListNames=function(){return this.invoke("get","name")},t.prototype.summaryObj=function(e){var t,n,i,r,s;for(null==e&&(e=!1),r={},t=0,n=(s=this.models).length;t<n;t++)r[(i=s[t]).get("name")]=e?i.summaryObj().options:i.summaryObj();return r},t}(s.BaseCollection),o)},107:function(e,t){var n,i,r,s,o,a,u,l,c,p,d,_,f=[].slice,h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e.exports=(n=function(){function e(e,t){var n,i,o,a,u,c,d;if(null==t&&(t={}),s(e))this.string=e,c=p.toArray(this.string),this.rows=l(c),this.columns=c[0],this.rowArray=2<=c.length?f.call(c,1):[];else if(r(e))this.rows=e,this.columns=(d=this,function(){var e,t,n,i,r,s;for(e=[],t=0,i=(r=d.rows).length;t<i;t++)for(n in s=r[t])h.call(s,n)&&m.call(e,n)<0&&e.push(n);return e})(),this.buildRowArray(),this.obj=e;else if(e){if(this.columns=r(e.columns)?e.columns:[],e.rowObjects){if(0===this.columns.length)for(n=0,o=(a=e.rowObjects).length;n<o;n++)for(i in u=a[n])u[i],i in columns||this.columns.push(i);this.rowArray=function(t){return function(){var n,i,r,s,o;for(o=[],i=0,r=(s=e.rowObjects).length;i<r;i++)u=s[i],o.push(function(){var e,t,i,r;for(r=[],e=0,t=(i=this.columns).length;e<t;e++)n=i[e],r.push(u[n]);return r}.call(t));return o}}(this)()}else this.rowArray=r(e.rows)?e.rows:[];null!=e.kind&&(this.kind=e.kind),this.rows=function(e){return function(){var t,n,i,r,s,o,a,l,c;for(l=[],i=0,s=(a=e.rowArray).length;i<s;i++){for(c={},n=r=0,o=(u=a[i]).length;r<o;n=++r)t=u[n],null!=e.columns[n]&&(c[e.columns[n]]=t);l.push(c)}return l}}(this)()}else this.rows=[],this.columns=[],this.rowArray=[]}return e.prototype.buildRowArray=function(){return this.rowArray=(e=this,function(){var t,n,i,r,s,o;for(s=[],n=0,i=(r=e.rows).length;n<i;n++)o=r[n],s.push(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.columns).length;e<n;e++)t=i[e],r.push(o[t]||"");return r}.call(e));return s})();var e},e.prototype.addRow=function(e){var t,n,i;for(i in t=!1,e)h.call(e,i)&&(e[i],m.call(this.columns,i)<0&&(t=!0,this.columns.push(i)));return this.rows.push(e),t?this.buildRowArray():this.rowArray.push(function(){var t,i,r,s;for(s=[],t=0,i=(r=this.columns).length;t<i;t++)n=r[t],s.push(e[n]);return s}.call(this)),e},e.prototype.toObjects=function(e){return null==e&&(e={}),this.string?p.toObjects(this.string,e):this.rows?this.rows:void 0},e.prototype.toObject=function(){var e;return e={columns:this.columns,rows:this.rowArray},this.kind&&(e.kind=this.kind),e},e.prototype.toArrays=function(){var e,t,n,i,r;for(n=[this.columns],e=0,t=(i=this.rowArray).length;e<t;e++)(r=i[e]).length>0&&n.push(r);return n},e.prototype.toString=function(){var e,t;return function(){var t,n,i,r;for(r=[],t=0,n=(i=this.columns).length;t<n;t++)e=i[t],r.push(c(e));return r}.call(this).join(p.settings.delimiter)+"\n"+function(){var n,i,r,s;for(s=[],n=0,i=(r=this.rowArray).length;n<i;n++)t=r[n],s.push(function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(c(e));return r}().join(p.settings.delimiter));return s}.call(this).join("\n")},e}(),a=function(e){return e.replace(/\\\\/g,"\\")},c=function(e){var t;return void 0===e?"":RegExp("\\W|\\w|"+p.settings.delimiter).test(e)?(t=JSON.stringify(""+e),a(t)):e},(p=function(e,t){return e instanceof n?e:new n(e,t)}).fromStringArray=function(e,t){var n,i;return null==t&&(t={}),function(){var t,r,s;for(s=[],t=0,r=e.length;t<r;t++)i=e[t],s.push(function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)n=i[e],r.push(c(n));return r}().join(p.settings.delimiter));return s}().join("\n")},p.fromArray=function(e,t){var n,i,r,s,o,a,u,l;for(null==t&&(t={}),l=!!t.sort,i=[],r=0,o=e.length;r<o;r++)for(s in u=e[r])h.call(u,s)&&-1===i.indexOf(s)&&i.push(s);return l&&i.sort(),(a=function(){var t,r,s;for(s=[],t=0,r=e.length;t<r;t++)u=e[t],s.push(function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)n=i[e],r.push(c(u[n]));return r}());return s}()).unshift(function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)n=i[e],r.push(c(n));return r}()),p.fromStringArray(a,t)},p.toObjects=function(e){return l(p.toArray(e))},l=function(e){var t,n,i,r,s,o,a,u,l,c;for(t=e[0],u=[],i=0,s=(c=2<=e.length?f.call(e,1):[]).length;i<s;i++)if(1!==(l=c[i]).length||""!==l[0]){for(a={},n=r=0,o=t.length;r<o;n=++r)a[t[n]]=l[n];u.push(a)}return u},p.toObject=function(e,t){return u(p.toArray(e),t)},u=function(e,t){var n,i,r,s,o,a,u,l,c,p,d,_,h,m,g;for(null==t&&(t={}),n=e[0],_=2<=e.length?f.call(e,1):[],m=t.sortByKey,r=t.includeSortByKey,m||(m=n[0]),g=n.indexOf(m),p={},s=0,u=_.length;s<u;s++)if(1!==(d=_[s]).length||""!==d[0]){for(c={},h=d[g],i=o=0,l=n.length;o<l;i=++o)a=n[i],i!==g&&(c[a]=d[i]);r&&(c[m]=h),p[h]=c}return p},_=function(e){return e.replace(/(\n+)$/g,"")},p._parse_string=function(e){return JSON.parse('"'+e.replace(/\\/g,"\\\\").replace(/\\\\"/g,'\\"')+'"')},p.toArray=function(e){var t,n,i,r,s,o,a;for(p.settings.removeTrailingNewlines&&(e=_(e)),s=p.settings.delimiter,r=[],i=[],p._objPattern=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"((?:(?:[^\\\\]|\\\\\\\\|[\\\\(?=")]"|[\\\\(?!")])*?))"|([^"\\,\\r\\n]*))',"gi");t=p._objPattern.exec(e);)(o=t[1]).length&&o!==s&&(r.push(i),i=[]),a=t[2]?p._parse_string(t[2]):t[3],p.settings.parseFloat&&!isNaN(n=parseFloat(a))&&(a=n),i.push(a);return r.push(i),r},i=function(){function e(e,t){var n;this._sheetIds=[],this._sheets={},s(e)&&d(e,(n=this,function(e,t){var i,r,s,o,a,u,l;for(u=[],s=0,o=e.length;s<o;s++)i=(a=t[r=e[s]])[0],l=2<=a.length?f.call(a,1):[],u.push(n.sheet(r,p({columns:i,rows:l})));return u}))}return e.prototype.sheet=function(e,t){return null==t&&(t=!1),t?(m.call(this._sheetIds,e)<0&&this._sheetIds.push(e),this._sheets[e]=t):this._sheets[e]},e.prototype.toString=function(){var e,t,n,i,r,s,o,a,u,l,d,_,f,h,m,g,v;for(d=[],i=p.settings.delimiter,s=0,u=(_=this._sheetIds).length;s<u;s++){for(v=_[s],g=this._sheets[v],n=g.columns,m=g.rowArray,r=c(v),o=0,f=n.length;0<=f?o<f:o>f;0<=f?++o:--o)r+=i;for(d.push(r),d.push(i+function(){var e,i,r;for(r=[],e=0,i=n.length;e<i;e++)t=n[e],r.push(c(t));return r}().join(i)),a=0,l=m.length;a<l;a++)h=m[a],d.push(i+function(){var t,n,i;for(i=[],n=0,t=h.length;n<t;n++)e=h[n],i.push(c(e));return i}().join(i))}return d.join("\n")},e}(),p.sheeted=function(e,t){return e instanceof i?e:new i(e,t)},d=function(e,t){var n,i,r,s,o,a,u,l,c;for(null==t&&(t=!1),c={},o=[],r=0,s=(a=p.toArray(e)).length;r<s;r++){if(n=(u=a[r])[0],l=2<=u.length?f.call(u,1):[],n&&(i=n),!i)throw new Error("Sheet id must be defined in the first column and cannot be falsey");m.call(o,i)<0&&o.push(i),c[i]||(c[i]=[]),function(){var e,t;for(e=0,t=l.length;e<t;e++)if(l[e])return!0}()&&c[i].push(l)}return t?t.apply(this,[o,c]):[o,c]},p.sheeted.toObjects=function(e){return d(e,(function(e,t){var n,i,r,s;for(r={},n=0,i=e.length;n<i;n++)r[s=e[n]]=l(t[s]);return r}))},p.sheeted.toArray=function(e){return d(e,(function(e,t){var n,i,r,s;for(r=[],n=0,i=e.length;n<i;n++)s=e[n],r.push({id:s,sheet:l(t[s])});return r}))},s=function(e){return!!(""===e||e&&e.charCodeAt&&e.substr)},o=Array.isArray,r=o||function(e){return!(!(e&&e.concat&&e.unshift)||e.callee)},Object.keys,p.settings={delimiter:",",parseFloat:!1,removeTrailingNewlines:!0},p)},114:function(e,t,n){(function(t){var i,r,s,o,a,u,l,c,p,d,_,f,h,m,g,v=function(e,t){for(var n in t)y.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},k=[].slice;_=n(20),i=n(69),r=n(106),l=n(40),s=n(59),p=n(347),c=n(116),o=n(157),a=n(158),u=n(349),f=n(107),d=n(23).LOCKING_PROFILES_PROP_NAME,e.exports=((m=function(e){function n(e,t){var i,o,u,l,p,_,f;if(null==e&&(e={}),n.__super__.constructor.call(this),e.error)throw new Error("instantiating survey with error parameter");if(this._initialParams=e,this.settings=new h(e.settings,{_parent:this}),e.settings||this.settings.enable_auto_name(),(_=this.settings.get("name")||e.name)&&this.set("name",_),this.lockingProfiles=e[d],this.newRowDetails=e.newRowDetails||s.newRowDetails,this.defaultsForType=e.defaultsForType||s.defaultsForType,this.surveyDetails=new c.SurveyDetails([],{_parent:this}).loadSchema(e.surveyDetailsSchema||s.surveyDetailSchema),this.choices=new r.ChoiceLists([],{_parent:this}),a.loadChoiceLists(e.choices||[],this.choices),e.survey)for(a.hasBeenParsed(e)||(e.survey=a.parseArr(e.survey)),i=0,o=(l=e.survey).length;i<o;i++){if(void 0!==(u=l[i]).id)throw new Error("Forbidden column `id` for row: "+JSON.stringify(u,null,2));p=u.type,b.call(s.surveyDetailSchema.typeList(),p)>=0?this.surveyDetails.importDetail(u):this.rows.add(u,{collection:this.rows,silent:!0,_parent:this.rows})}else this.surveyDetails.importDefaults();this.context={warnings:[],errors:[]},this.forEachRow((f=this,function(e){if("function"==typeof e.linkUp)return e.linkUp(f.context)})),this.linkUpChoiceLists()}return v(n,e),n.create=function(e,t){return null==e&&(e={}),new n(e,t)},n.prototype.linkUpChoiceLists=function(){var e,t,n,i,r,s;for(e=this.choices.getListNames(),n=0,i=(s=this.choices.models).length;n<i;n++){if(t=s[n],(r=_.intersection(e,t.getOptionKeys(!0))).length>1)throw new Error("cascading choices can only reference one choice list");1===r.length&&(t.__cascadedList=this.choices.get(r[0]))}},n.prototype.insert_row=function(e,t){var n,i,r,s;return e._isCloned?this.rows.add(e,{at:t}):this.rows.add(e.toJSON(),{at:t}),i=this.rows.at(t),s=this.getSurvey(),(r=e.getList())&&(s.choices.add({options:r.options.toJSON()}),i.get("type").set("list",r)),(n=i.get("name")).set("value",n.deduplicate(s))},n.prototype._ensure_row_list_is_copied=function(e){var t;if(!e.rows&&(t=e.getList()))return this.choices.add({name:t.get("name"),options:t.options.toJSON()})},n.prototype.insertSurvey=function(e,t,n){var i,r,s,o,a,u,l,c,p;for(null==t&&(t=-1),-1===t&&(t=this.rows.length),c=r=0,o=(u=e.rows.models).length;r<o;c=++r){if(l=u[c],p=this,n){if(!(i=this.findRowByCid(n,{includeGroups:!0})))throw new Error("Couldn't find group "+n+"!");p=i}s=t+c,l.rows?(l.forEachRow&&l.forEachRow(function(e){return function(t){return e._ensure_row_list_is_copied(t)}}(this),{includeGroups:!0}),this._insertRowInPlace(l,{index:s,parent:p,noDetach:!0}),this.trigger("change")):(this._ensure_row_list_is_copied(l),(a=l.get("name")).set("value",a.deduplicate(this)),p.rows.add(l.toJSON(),{at:s}))}},n.prototype.toFlatJSON=function(e,n){var i,r,s,o,a,u,l,c,p,f;if(null==e&&(e=!1),null==n&&(n=4),(l=this.toJSON()).survey=function(){var e,t,n,i;for(i=[],e=0,t=(n=l.survey).length;e<t;e++)p=n[e],_.isObject(p.type)&&(p.type=[_.keys(p.type)[0],_.values(p.type)[0]].join(" ")),i.push(p);return i}(),_.isObject(l.choices)){for(o in r=[],c=l.choices)if(y.call(c,o))for(s=0,a=(f=c[o]).length;s<a;s++)u=f[s],delete(i=t.extend({list_name:o},u)).setManually,r.push(i);l.choices=r}return l.settings=[this.settings.attributes],this.lockingProfiles&&(l[d]=this.lockingProfiles),e?JSON.stringify(l,null,n):l},n.prototype.toJSON=function(e,t){var n,i,s,o,a;for(o in null==e&&(e=!1),null==t&&(t=4),i={},n={choices:new r.ChoiceLists},i.survey=(a=this,function(){var e,t,i,r,s,o;for(r=[],e=function(e){var t;return"getList"in e&&(t=e.getList())&&n.choices.add(t),"function"==typeof e.export_relevant_values?e.export_relevant_values(r,n):console.error("No r.export_relevant_values. Does this survey have non-standard columns?",e)},a.forEachRow(e,{includeGroupEnds:!0}),t=0,i=(s=a.surveyDetails.models).length;t<i;t++)(o=s[t]).get("value")&&r.push(o.toJSON());return r})(),n)(s=n[o]).length>0&&(i[o]=s.summaryObj(!0));return e?JSON.stringify(i,null,t):i},n.prototype.getSurvey=function(){return this},n.prototype.log=function(e){var t,n,i;null==e&&(e={}),t=e.log||function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],console.log.apply(console,e)},i=["-"],n=function(e){return"forEachRow"in e?(t(i.join("").replace(/-/g,"="),e.get("label").get("value")),i.push("-"),e.forEachRow(n,{flat:!0,includeGroups:!0}),i.pop()):t(i.join(""),e.get("label").get("value"))},this.forEachRow(n,{flat:!0,includeGroups:!0})},n.prototype.summarize=function(){var e,t,n;return n=0,t=!1,e=function(e){return"geopoint"===e.get("type").get("value")&&(t=!0),n++},this.forEachRow(e,{includeGroups:!1}),{rowCount:n,hasGps:t}},n.prototype._insertRowInPlace=function(e,t){var n,i,r;null==t&&(t={}),e._parent&&!t.noDetach&&e.detach({silent:!0}),n=0,t.index&&(n=t.index),r=t.previous,i=t.parent,r&&(n=(i=r.parentRow()).rows.indexOf(r)+1),i||(i=this),i.rows.add(e,{at:n}),e._parent=i.rows,t.event&&i.rows.trigger(t.event)},n.prototype.prepCols=function(e,t){var n,i,r;if(null==t&&(t={}),i=t.exclude||[],n=t.add||[],_.isString(i)||_.isString(n))throw new Error("prepCols parameters should be arrays");return(r=_.filter(_.uniq(_.flatten(e)),(function(e){return b.call(i,e)<0}))).concat.apply(r,n)},n.prototype.toSsStructure=function(){var e,t,n,i;for(i in t={},n=this.toCsvJson())e=n[i],t[i]=e.rowObjects;return t},n.prototype.toCsvJson=function(){var e,t,n;return this.finalize(),(t={}).survey=(n=this,function(){var e,t,i,r,s,o,a;for(r=["name","type","label"],s=[],e=function(e){var t,n;for(n in t=e.toJSON())y.call(t,n)&&(t[n],b.call(r,n)<0&&r.push(n));return s.push(t)},n.forEachRow(e,{includeErrors:!0,includeGroupEnds:!0}),t=0,i=(o=n.surveyDetails.models).length;t<i;t++)(a=o[t]).get("value")&&e(a);return{columns:r,rowObjects:s}})(),(e=function(e){return function(){var t,n,i,s,o,a,u,c,p,d,f,h,m;for(p=new r.ChoiceLists,e.forEachRow((function(e){var t;return(t=function(e){var n;if("getList"in e&&(n=e.getList())&&!p.get(n.get("name")))return p.add(n),t(n)})(e)})),m=[],s=[],o=0,u=(f=p.models).length;o<u;o++)for((t=f[o]).get("name")||t.set("name",l.txtid(),{silent:!0}),t.finalize(),i=(n=t.toJSON()).name,a=0,c=(h=n.options).length;a<c;a++)d=h[a],s.push(_.keys(d)),m.push(_.extend({},d,{list_name:i}));return m.length>0&&{columns:e.prepCols(s,{exclude:["setManually"],add:["list_name"]}),rowObjects:m}}}(this)())&&(t.choices=e),t.settings=this.settings.toCsvJson(),t},n.prototype.toMarkdown=function(){return u.csvJsonToMarkdown(this.toCsvJson())},n.prototype.toCSV=function(){var e,t,n,i;for(i in n=f.sheeted(),t=this.toCsvJson())e=t[i],n.sheet(i,f(e));return n.toString()},n}(p.SurveyFragment)).load=function(e,t){var n,i;if(null==t&&(t=!1),_.isString(e)&&!g(e))throw Error("Invalid CSV passed to form builder");return n=o.deserialize(e),i=a.parse(n),new m(i)},m.load.csv=function(e){return m.load(e,!0)},m.load.md=function(e){var t;return t=u.mdSurveyStructureToObject(e),new m(t)},m.loadDict=function(e,t){var n;return n=a.parse(e,t),new m(n)},g=function(e){return b.call(e,"\n")>=0&&b.call(e,",")>=0},h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.validation={},t.prototype.toCsvJson=function(){return{columns:_.keys(this.attributes),rowObjects:[this.toJSON()]}},t.prototype.enable_auto_name=function(){var e;return this.auto_name=!0,this.on("change:form_id",(e=this,function(){return e.changing_form_title?e.changing_form_title=!1:e.auto_name=!1})),this.on("change:form_title",function(e){return function(t,n){if(e.auto_name)return e.changing_form_title=!0,e.set("form_id",l.sluggifyLabel(n))}}(this))},t}(i.BaseModel),{Survey:m,Settings:h})}).call(this,n(29))},115:function(e,n,i){(function(n){var r,s,o,a,u=function(e,t){return function(){return e.apply(t,arguments)}},l=function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},c={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=i(20),i(47),i(93),s=i(156),r=i(65),e.exports=((a={}).SkipLogicCriterionBuilderView=function(e){function i(){return this.addCriterion=u(this.addCriterion,this),i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.events={"click .skiplogic__deletecriterion":"deleteCriterion","click .skiplogic__addcriterion":"addCriterion","change .skiplogic__delimselect":"markChangedDelimSelector"},i.prototype.render=function(){return o.uniqueId("skiplogic_expr"),this.$el.html("<p>\n  "+t("This question will only be displayed if the following conditions apply")+'\n</p>\n<div class="skiplogic__criterialist"></div>\n<p class="skiplogic__addnew">\n  <button class="skiplogic__addcriterion kobo-button kobo-button--green">+ '+t("Add another condition")+'</button>\n</p>\n<select class="skiplogic__delimselect">\n  <option value="and">'+t("Question should match all of these criteria")+'</option>\n  <option value="or">'+t("Question should match any of these criteria")+"</option>\n</select>"),this.$(".skiplogic__delimselect").val(this.criterion_delimiter).children("[value="+this.criterion_delimiter+"]").attr("selected","selected"),this},i.prototype.addCriterion=function(e){return this.facade.view_factory.survey.trigger("change"),this.facade.add_empty()},i.prototype.deleteCriterion=function(e){var t,i;return this.facade.view_factory.survey.trigger("change"),i=(t=n(e.target)).data("criterionId"),this.facade.remove(i),t.parent().remove()},i.prototype.markChangedDelimSelector=function(e){return this.criterion_delimiter=e.target.value},i}(s.Base),a.SkipLogicCriterion=function(e){function t(e,n,i,r){this.question_picker_view=e,this.operator_picker_view=n,this.response_value_view=i,this.presenter=r,t.__super__.constructor.call(this)}return l(t,e),t.prototype.tagName="div",t.prototype.className="skiplogic__criterion",t.prototype.render=function(){return this.question_picker_view.render(),this.alreadyRendered||this.$el.append(n('<i class="skiplogic__deletecriterion k-icon k-icon-trash" data-criterion-id="'+this.model.cid+'"></i>')),this.change_operator(this.operator_picker_view),this.change_response(this.response_value_view),this.alreadyRendered=!0,this},t.prototype.mark_question_specified=function(e){return null==e&&(e=!1),this.$el.toggleClass("skiplogic__criterion--unspecified-question",!e)},t.prototype.bind_question_picker=function(){var e,t;e=this.$question_picker.val(),this.mark_question_specified("placeholderVal"!==e),"placeholderVal"!==e&&""!==e&&this.question_picker_view.disable_placeholder_option(),this.$question_picker.on("change",(t=this,function(e){"placeholderVal"===e.val&&console.error("Changing question to placeholderVal should not happen!"),t.model.survey.trigger("change"),t.mark_question_specified("placeholderVal"!==e.val),t.presenter.change_question(e.val)}))},t.prototype.bind_operator_picker=function(){return this.$operator_picker.on("change",(e=this,function(){return e.operator_picker_view.value=e.$operator_picker.select2("val"),e.presenter.change_operator(e.operator_picker_view.value),e.model.survey.trigger("change")}));var e},t.prototype.bind_response_value=function(){return this.response_value_view.bind_event((e=this,function(){return e.presenter.change_response(e.response_value_view.val()),e.model.survey.trigger("change")}));var e},t.prototype.response_value_handler=function(){return this.presenter.change_response(this.response_value_view.val())},t.prototype.change_operator=function(e){return this.operator_picker_view=e,this.operator_picker_view.render(),this.$operator_picker=this.operator_picker_view.$el},t.prototype.change_response=function(e){return this.response_value_view.detach(),this.response_value_view=e,this.response_value_view.render(),this.$response_value=this.response_value_view.$el},t.prototype.attach_operator=function(){return this.operator_picker_view.attach_to(this.$el),this.bind_operator_picker()},t.prototype.attach_response=function(){return this.$(".skiplogic__responseval-wrapper").length>0&&this.$(".skiplogic__responseval-wrapper").remove(),this.response_value_view.attach_to(this.$el),this.bind_response_value()},t.prototype.attach_to=function(e){this.question_picker_view.attach_to(this.$el),this.$question_picker=this.question_picker_view.$el,this.bind_question_picker(),this.attach_operator(),this.attach_response(),t.__super__.attach_to.call(this,e)},t}(s.Base),a.QuestionPicker=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="select",t.prototype.className="skiplogic__rowselect",t.prototype.render=function(){return t.__super__.render.call(this),"placeholderVal"!==this.$el.val()&&this.disable_placeholder_option(),this.$el.on("change",this.disable_placeholder_option.bind(this)),this},t.prototype.disable_placeholder_option=function(){var e;"placeholderVal"===(e=this.$el.children(":first")).val()&&e.prop("disabled",!0)},t.prototype.attach_to=function(e){return e.find(".skiplogic__rowselect").remove(),t.__super__.attach_to.call(this,e)},t}(s.DropDown),a.OperatorPicker=function(e){function t(e){this.operators=e,t.__super__.constructor.call(this)}return l(t,e),t.prototype.tagName="div",t.prototype.className="skiplogic__expressionselect",t.prototype.render=function(){return this},t.prototype.attach_to=function(e){var n;return e.find(".skiplogic__expressionselect").remove(),t.__super__.attach_to.call(this,e),this.$el.select2({minimumResultsForSearch:-1,data:(n=this,function(){var e;return e=[],o.each(n.operators,(function(t){return e.push({id:t.id,text:t.label+(1!==t.id?" ("+t.symbol[t.parser_name[0]]+")":"")}),e.push({id:"-"+t.id,text:t.negated_label+(1!==t.id?" ("+t.symbol[t.parser_name[1]]+")":"")})})),e})()}),e.find(".skiplogic__expressionselect.select2-container").show(),this.value?this.val(this.value):this.value=this.$el.select2("val"),this.$el.on("select2-close",function(e){return function(){return e._set_style()}}(this))},t.prototype.val=function(e){return null!=e?(this.$el.select2("val",e),this._set_style(),this.value=e):this.$el.val()},t.prototype._set_style=function(){var e,t,n,i;n=Number(this.$el.val()),this.$el.toggleClass("skiplogic__expressionselect--no-response-value",-1===n||1===n),0!==(t=Math.abs(n))&&(i=o.find(this.operators,(function(e){return e.id===t})),e=n<0?i.abbreviated_negated_label:i.abbreviated_label,this.$el.parents(".skiplogic__criterion").find(".select2-container.skiplogic__expressionselect .select2-chosen").text(e))},t}(s.Base),a.SkipLogicEmptyResponse=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="skiplogic__responseval",t.prototype.attach_to=function(e){return e.find(".skiplogic__responseval").remove(),t.__super__.attach_to.call(this,e)},t}(s.EmptyView),a.SkipLogicTextResponse=function(e){function n(e){n.__super__.constructor.call(this,e,"skiplogic__responseval",t("response value"))}return l(n,e),n.prototype.attach_to=function(e){e.find(".skiplogic__responseval").remove(),n.__super__.attach_to.call(this,e)},n.prototype.bind_event=function(e){return this.$el.on("blur",e)},n}(s.TextBox),a.SkipLogicValidatingTextResponseView=function(e){function t(){return this.val=u(this.val,this),this.clear_invalid_view=u(this.clear_invalid_view,this),this.show_invalid_view=u(this.show_invalid_view,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.render=function(){return t.__super__.render.call(this),this.setElement('<div class="skiplogic__responseval-wrapper">'+this.$el+"<div></div></div>"),this.$error_message=this.$("div"),this.model.bind("validated:invalid",this.show_invalid_view),this.model.bind("validated:valid",this.clear_invalid_view),this.$input=this.$el.find("input"),this},t.prototype.show_invalid_view=function(e,t){if(this.$input.val())return this.$el.addClass("textbox--invalid"),this.$error_message.html(t.value),this.$input.focus()},t.prototype.clear_invalid_view=function(e,t){return this.$el.removeClass("textbox--invalid"),this.$error_message.html("")},t.prototype.bind_event=function(e){return this.$input.on("change",e)},t.prototype.val=function(e){return null!=e?this.$input.val(e):this.$input.val()},t}(a.SkipLogicTextResponse),a.SkipLogicDropDownResponse=function(e){function t(e,n){this.responses=e,this.model=n,t.__super__.constructor.call(this,o.map(this.responses.models,(function(e){return{text:e.get("label"),value:e.cid}})))}return l(t,e),t.prototype.tagName="select",t.prototype.className="skiplogic__responseval",t.prototype.attach_to=function(e){return e.find(".skiplogic__responseval").remove(),t.__super__.attach_to.call(this,e),e.find(".skiplogic__responseval.select2-container").show()},t.prototype.bind_event=function(e){return t.__super__.bind_event.call(this,"change",e)},t.prototype.render=function(){var e,n;return t.__super__.render.call(this),n=this,e=function(){return n.val(n.model.get("cid"))},this.model.off("change:cid",e),this.model.on("change:cid",e)},t}(s.DropDown),a.SkipLogicViewFactory=function(){function e(e){this.survey=e}return e.prototype.create_question_picker=function(e){var n,i;return n=new s.DropDownModel,(i=function(){var i;(i=o.map(e.selectableRows(),(function(e){return{value:e.cid,text:e.getValue("label")}}))).unshift({value:"placeholderVal",text:t("Select question from list")}),n.set("options",i)})(),this.survey.on("sortablestop",i),new a.QuestionPicker(n)},e.prototype.create_operator_picker=function(e){var t;return t=null!=e?o.filter(r.operator_types,(function(t){var n;return n=t.id,p.call(e.operators,n)>=0})):[],new a.OperatorPicker(t)},e.prototype.create_response_value_view=function(e,t,n){switch(null==e?"empty":null!=n.response_type?n.response_type:t.response_type){case"empty":return new a.SkipLogicEmptyResponse;case"text":return new a.SkipLogicTextResponse;case"dropdown":return new a.SkipLogicDropDownResponse(e.getList().options);case"integer":case"decimal":return new a.SkipLogicTextResponse;default:return null}},e.prototype.create_criterion_view=function(e,t,n,i){return new a.SkipLogicCriterion(e,t,n,i)},e.prototype.create_criterion_builder_view=function(){return new a.SkipLogicCriterionBuilderView},e.prototype.create_textarea=function(e,t){return new s.TextArea(e,t)},e.prototype.create_button=function(e,t){return new s.Button(e,t)},e.prototype.create_textbox=function(e,t,n){return null==t&&(t=""),null==n&&(n=""),new s.TextBox(e,t,n)},e.prototype.create_label=function(e,t){return new s.Label(e,t)},e.prototype.create_empty=function(){return new s.EmptyView},e}(),a)}).call(this,i(29))},116:function(e,t,n){var i,r,s=function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=n(69),e.exports=(r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.idAttribute="name",t.prototype.toJSON=function(){var e,t;return!!this.get("value")&&((e={}).name=this.get("name"),e.type=e.name,(t=this.get("parameters"))&&(e.parameters=t),e)},t}(i.BaseModel),{SurveyDetails:function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.loadSchema=function(e){var t,n,i,s;for(t=0,i=(s=e.models).length;t<i;t++)n=s[t],this.add(new r(n._forSurvey()));return this._schema=e,this.add=this.loadSchema=function(){throw new Error("New survey details must be added to the schema")},this},t.prototype.importDefaults=function(){var e,t,n,i;for(e=0,n=(i=this._schema.models).length;e<n;e++)t=i[e],this.get(t.get("name")).set("value",t.get("default"))},t.prototype.importDetail=function(e){var t;if(!(t=this.get(e.type)))throw new Error("SurveyDetail `"+key+"` not loaded from schema. [Aliases have not been implemented]");e.parameters&&t.set("parameters",e.parameters),t.set("value",!0)},t}(i.BaseCollection),SurveyDetail:r})},13:function(e,n,i){"use strict";i.d(n,"a",(function(){return p})),i.d(n,"e",(function(){return d})),i.d(n,"g",(function(){return f})),i.d(n,"c",(function(){return v})),i.d(n,"h",(function(){return y})),i.d(n,"d",(function(){return k})),i.d(n,"j",(function(){return T})),i.d(n,"i",(function(){return R})),i.d(n,"k",(function(){return j})),i.d(n,"l",(function(){return x})),i.d(n,"o",(function(){return C})),i.d(n,"f",(function(){return q})),i.d(n,"m",(function(){return N})),i.d(n,"n",(function(){return I}));var r=i(0),s=i.n(r),o=i(6),a=i(24),u=i(4),l=i(2);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return e.map((function(e){return e.trim().replace(/ /g,"-")}))}function d(e){return o.a.session.currentAccount&&o.a.session.currentAccount.username&&o.a.session.currentAccount.username===e?t("me"):e}function _(e){return e.settings.organization?e.settings.organization:"-"}function f(e,t){var n,i,r=null;return Array.isArray(null===(n=e.summary)||void 0===n?void 0:n.languages)&&(null===(i=e.summary)||void 0===i?void 0:i.languages.length)>=1&&e.summary.languages.forEach((function(e,n){e===t&&(r=n)})),r}function h(e){return e.summary&&e.summary.languages&&e.summary.languages.length>=1?e.summary.languages.join(", "):"-"}function m(e){return e.settings.sector?e.settings.sector.label:"-"}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.settings.country?t?e.settings.country.label:e.settings.country.value:"-"}function v(e){var n=t("untitled"),i={final:n};return e.name&&(i.original=e.name),e.summary&&e.summary.labels&&e.summary.labels.length>0&&(i.question=e.summary.labels[0]),i.original||i.question||(i.empty=n),i.original?i.final=i.original:i.question&&(i.final=i.question),i}function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.label&&Array.isArray(e.label)?e.label[n]:e.label&&!Array.isArray(e.label)?e.label:e.name?e.name:"$autoname"in e&&e.$autoname?e.$autoname:t("Unlabelled")}function b(e){return e===l.ASSET_TYPES.question.id||e===l.ASSET_TYPES.block.id||e===l.ASSET_TYPES.template.id||e===l.ASSET_TYPES.collection.id}function k(e){var t,n;switch(e.asset_type){case l.ASSET_TYPES.template.id:return(null===(t=e.summary)||void 0===t?void 0:t.lock_any)?"k-icon k-icon-template-locked":"k-icon k-icon-template";case l.ASSET_TYPES.question.id:return"k-icon k-icon-question";case l.ASSET_TYPES.block.id:return"k-icon k-icon-block";case l.ASSET_TYPES.survey.id:return(null===(n=e.summary)||void 0===n?void 0:n.lock_any)?"k-icon k-icon-form-locked":e.has_deployment&&!e.deployment__active?"k-icon k-icon-form-archived":e.has_deployment?"k-icon k-icon-form-deployed":"k-icon k-icon-form-draft";case l.ASSET_TYPES.collection.id:return e.access_types&&e.access_types.includes(l.ACCESS_TYPES.subscribed)?"k-icon k-icon-folder-subscribed":D(e.permissions)?"k-icon k-icon-folder-public":e.access_types&&e.access_types.includes(l.ACCESS_TYPES.shared)?"k-icon k-icon-folder-shared":"k-icon k-icon-folder";default:return"k-icon k-icon-form"}}function E(e){var t;if(e.asset_type===l.ASSET_TYPES.template.id?t=l.MODAL_TYPES.LIBRARY_TEMPLATE:e.asset_type===l.ASSET_TYPES.collection.id&&(t=l.MODAL_TYPES.LIBRARY_COLLECTION),!t)throw new Error("Unsupported asset type: ".concat(e.asset_type,"."));o.a.pageState.showModal({type:t,asset:e})}function O(e){o.a.pageState.showModal({type:l.MODAL_TYPES.SHARING,assetid:e.uid})}function w(e){o.a.pageState.showModal({type:l.MODAL_TYPES.FORM_LANGUAGES,asset:e})}function S(e){o.a.pageState.showModal({type:l.MODAL_TYPES.ASSET_TAGS,asset:e})}function A(e){o.a.pageState.showModal({type:l.MODAL_TYPES.REPLACE_PROJECT,asset:e})}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},r=[];return e.forEach((function(e){var s=R(e);if(l.GROUP_TYPES_BEGIN.hasOwnProperty(e.type))r.push(s),t&&(i[s]=r.join("/"));else if(l.GROUP_TYPES_END.hasOwnProperty(e.type))r.pop();else if(l.QUESTION_TYPES.hasOwnProperty(e.type)||e.type===l.SCORE_ROW_TYPE||e.type===l.RANK_LEVEL_TYPE||n&&l.META_QUESTION_TYPES.hasOwnProperty(e.type)){var o="";r.length>=1&&(o=r.join("/")+"/"),i[s]="".concat(o).concat(s)}})),i}function R(e){return e.name||"$autoname"in e&&e.$autoname||e.$kuid}function j(e,t,n){var i,r;if(t.forEach((function(t,n){R(t)===e&&(r=t,i=n)})),"object"===c(r)&&r.hasOwnProperty("label"))return L(r,n);if("object"===c(r)&&"number"==typeof i){var s=t[i+1];if(x(r,s))return L(s,n)}return null}function x(e,t){if(e&&t&&Object.prototype.hasOwnProperty.call(t,"label")){var n=R(e),i=R(t);return"type"in t&&i==="".concat(n,"_label")&&t.type===l.QUESTION_TYPES.note.id||"type"in t&&i==="".concat(n,"_note")&&t.type===l.QUESTION_TYPES.note.id||"type"in t&&i==="".concat(n,"_header")&&t.type===l.QUESTION_TYPES.select_one.id}return!1}function L(e,t){return Array.isArray(e.label)?e.label[t]||null:e.label||null}function C(e){var t="";if(e===l.SCORE_ROW_TYPE)t=l.QUESTION_TYPES.score.icon;else if(e===l.RANK_LEVEL_TYPE)t=l.QUESTION_TYPES.rank.icon;else if(l.QUESTION_TYPES.hasOwnProperty(e)){var n=e;t=l.QUESTION_TYPES[n].icon}return e===l.META_QUESTION_TYPES["background-audio"]?t="k-icon-qt-audio":l.META_QUESTION_TYPES.hasOwnProperty(e)&&(t="qt-meta-default"),t?s.a.createElement("i",{className:"k-icon k-icon-".concat(t),title:e}):null}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=T(e,!1,!0),r=[],s=[],o=0;return e.forEach((function(e){if("begin_group"!==e.type&&"begin_repeat"!==e.type||s.push(y(e,t)),"end_group"!==e.type&&"end_repeat"!==e.type||s.pop(),"begin_repeat"===e.type?o++:"end_repeat"===e.type&&o--,l.QUESTION_TYPES.hasOwnProperty(e.type)||n&&l.META_QUESTION_TYPES.hasOwnProperty(e.type)){var a=R(e);r.push({type:e.type,name:a,isRequired:Boolean(e.required),label:y(e,t),path:i[a],parents:s.slice(0),hasRepatParent:o>=1})}})),r}function P(e){var n=[];return e.asset_type===l.ASSET_TYPES.collection.id?(e.name&&e.settings.organization&&e.settings.sector||n.push(t("Name, organization and sector are required to make collection public.")),0===e.children.count&&n.push(t("Empty collection is not allowed to be made public."))):n.push(t("Only collections are allowed to be made public!")),n}function D(e){var t=!1;return e.forEach((function(e){var n=a.a.getPermissionByCodename(l.PERMISSIONS_CODENAMES.discover_asset);e.user===Object(u.buildUserUrl)(l.ANON_USERNAME)&&void 0!==n&&e.permission===n.url&&(t=!0)})),t}function N(e){return e&&o.a.session.currentAccount&&e.owner__username===o.a.session.currentAccount.username}function $(e){return"".concat(l.ROOT_URL,"/api/v2/assets/").concat(e,"/")}function I(e){return String(e||"").replace(/((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,"")}var U={buildAssetUrl:$,cleanupTags:p,editLanguages:w,editTags:S,getAssetDisplayName:v,getAssetIcon:k,getAssetOwnerDisplayName:d,getCountryDisplayString:g,getFlatQuestionsList:q,getLanguageIndex:f,getLanguagesDisplayString:h,getOrganizationDisplayString:_,getQuestionOrChoiceDisplayName:y,getRowName:R,getSectorDisplayString:m,getSurveyFlatPaths:T,getTranslatedRowLabel:j,isAssetPublic:D,isAssetPublicReady:P,isLibraryAsset:b,isRowSpecialLabelHolder:x,isSelfOwned:N,modifyDetails:E,renderQuestionTypeIcon:C,replaceForm:A,share:O,removeInvalidChars:I};n.b=U;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"cleanupTags","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(d,"getAssetOwnerDisplayName","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(_,"getOrganizationDisplayString","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(f,"getLanguageIndex","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(h,"getLanguagesDisplayString","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(m,"getSectorDisplayString","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(g,"getCountryDisplayString","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(v,"getAssetDisplayName","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(y,"getQuestionOrChoiceDisplayName","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(b,"isLibraryAsset","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(k,"getAssetIcon","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(E,"modifyDetails","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(O,"share","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(w,"editLanguages","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(S,"editTags","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(A,"replaceForm","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(T,"getSurveyFlatPaths","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(R,"getRowName","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(j,"getTranslatedRowLabel","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(x,"isRowSpecialLabelHolder","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(L,"getRowLabelAtIndex","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(C,"renderQuestionTypeIcon","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(q,"getFlatQuestionsList","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(P,"isAssetPublicReady","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(D,"isAssetPublic","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(N,"isSelfOwned","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register($,"buildAssetUrl","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(I,"removeInvalidChars","/srv/src/kpi/jsapp/js/assetUtils.ts"),__REACT_HOT_LOADER__.register(U,"default","/srv/src/kpi/jsapp/js/assetUtils.ts"))},138:function(e,n,i){var r,s,o,a,u,l,c,p,d,_,f,h,m,g,v,y,b,k,E,O,w=function(e,t){for(var n in t)S.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},S={}.hasOwnProperty,A=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},T=[].slice;c=i(20),l=i(47),p=i(14),d=i(69),s=i(59),u=i(40),i(116),i(78),o=i(348),r=i(106),a=i(65),_=i(37).readParameters,f=i(37).writeParameters,e.exports=((O={}).BaseRow=function(e){function t(e,n){var i;for(i in null==e&&(e={}),null==n&&(n={}),e)e[i],""===i&&delete e[i];t.__super__.constructor.call(this,e,n)}return w(t,e),t.kls="BaseRow",t.prototype.ensureKuid=function(){if(!("$kuid"in this.attributes))return this.set("$kuid",u.txtid())},t.prototype.initialize=function(){return this.ensureKuid(),this.convertAttributesToRowDetails()},t.prototype.isError=function(){return!1},t.prototype.convertAttributesToRowDetails=function(){var e,t,n,i;for(e in n=[],t=this.attributes)(i=t[e])instanceof o.RowDetail?n.push(void 0):n.push(this.set(e,new o.RowDetail({key:e,value:i},{_parent:this}),{silent:!0}));return n},t.prototype.attributesArray=function(){var e,t,n;return(e=function(){var e,i;for(t in i=[],e=this.attributes)n=e[t],i.push([t,n]);return i}.call(this)).sort((function(e,t){return e[1]._order<t[1]._order?-1:1})),e},t.prototype.isGroup=function(){return"Group"===this.constructor.kls},t.prototype.isInGroup=function(){var e,t;return"Group"===(null!=(e=this._parent)&&null!=(t=e._parent)?t.constructor.kls:void 0)},t.prototype.detach=function(e){this._parent&&(this._parent.remove(this,e),this._parent=null)},t.prototype.selectableRows=function(){var e,t,n,i,r;return n=[],e=!1,t=["datetime","time","note","calculate","group","kobomatrix","repeat","rank","score"],null===(i=this.getSurvey())?null:(i.forEachRow((r=this,function(i){var s;if(!(e=e||i===r)&&(s=i.getValue("type"),A.call(t,s)<0))return n.push(i)}),{includeGroups:!0}),n)},t.prototype.export_relevant_values=function(e,t){return e.push(this.toJSON2())},t.prototype.toJSON2=function(){var e,t,n,i,r,o,a,u,l;for(i={},e=0,n=(r=this.attributesArray()).length;e<n;e++)t=(o=r[e])[0],l=o[1],"type"!==t||"select_one"!==(a=l.get("typeId"))&&"select_multiple"!==a?(u=this.getValue(t),this.hidden||(c.isBoolean(u)?i[t]=s.boolOutputs[u?"true":"false"]:""!==u&&(i[t]=u))):(i.type=l.get("typeId"),i.select_from_list_name=l.get("listName"));return i},t.prototype.toJSON=function(){var e,t,n,i,r,o,a;for(i={},e=0,n=(r=this.attributesArray()).length;e<n;e++)t=(o=r[e])[0],o[1],a=this.getValue(t),this.hidden||(c.isBoolean(a)?i[t]=s.boolOutputs[a?"true":"false"]:i[t]=a);return i},t}(d.BaseModel),E=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.finalize=function(){},t.prototype.simpleEnsureKuid=function(){if(!("$kuid"in this.attributes))return this.set("$kuid",u.txtid())},t.prototype.getTypeId=function(){return this.get("type")},t.prototype.linkUp=function(){},t.prototype._isSelectQuestion=function(){return!1},t.prototype.get_type=function(){return a.question_types[this.getTypeId()]||a.question_types.default},t.prototype.getValue=function(e){return this.get(e)},t}(l.Model),m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.initialize=function(){return this.simpleEnsureKuid(),this.set("type","rank__level")},t.prototype.export_relevant_values=function(e,t){return e.push(this.attributes)},t}(E),y=function(){function e(){}return e.prototype._extendAll=function(e){var t,n,i,r,s,o,a,l;if(r=function(t,n){return c.isFunction(t)?e[n]=function(){var n;return n=1<=arguments.length?T.call(arguments,0):[],t.apply(e,n)}:e[n]=t},c.each(this,r),r(this.forEachRow,"forEachRow"),t=e.getValue("$kuid",!1),n=this.end_json({$kuid:"/"+t}),e._afterIterator=function(e,t){var i;if(i={export_relevant_values:function(e,t){return e.push(c.extend({},n))},toJSON:function(){return c.extend({},n)}},t.includeGroupEnds)return e(i)},i=e.toJSON,e.clone=function(){var t,n,i,r,s,o,a,l,c,p,d,_,f,h,m,g,v,y;if(t=e.toJSON2(),d={_parent:e._parent,add:!1,merge:!1,remove:!1,silent:!0},(_=new O.Row(t,d))._isCloned=!0,e._rankRows){for(n=0,o=(h=e._rankRows.models).length;n<o;n++)f=h[n],_._rankRows.add(f.toJSON());for(_._rankLevels=e.getSurvey().choices.add({name:u.txtid()}),r=0,a=(m=e.getList().options.models).length;r<a;r++)i=m[r],_._rankLevels.options.add(i.toJSON());_.set("kobo--rank-items",_._rankLevels.get("name")),this.convertAttributesToRowDetails(),_.get("type").set("list",_._rankLevels)}else{for(s=0,l=(g=e._scoreRows.models).length;s<l;s++)y=g[s],_._scoreRows.add(y.toJSON());for(_._scoreChoices=e.getSurvey().choices.add({name:u.txtid()}),p=0,c=(v=e.getList().options.models).length;p<c;p++)i=v[p],_._scoreChoices.options.add(i.toJSON());_.set("kobo--score-choices",_._scoreChoices.get("name")),this.convertAttributesToRowDetails(),_.get("type").set("list",_._scoreChoices)}return _},e.toJSON=function(){return c.extend(i.call(e),{type:"begin_"+e._beginEndKey()},"function"==typeof this._additionalJson?this._additionalJson():void 0)},c.each(this.constructor.prototype,r),e.attributes.__rows){for(s=0,o=(a=e.attributes.__rows).length;s<o;s++)l=a[s],this[this._rowAttributeName].add(l);return delete e.attributes.__rows}},e.prototype.getValue=function(e){return this.get(e)},e.prototype.end_json=function(e){return null==e&&(e={}),c.extend({type:"end_"+this._beginEndKey()},e)},e.prototype.forEachRow=function(e,t){if(e(this),this[this._rowAttributeName].each((function(t){return e(t)})),"_afterIterator"in this)return this._afterIterator(e,t)},e}(),g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.model=m,t}(l.Collection),h=function(e){function n(e){this._rankRows=new g,this._rowAttributeName="_rankRows",this._extendAll(e),e.get("kobo--rank-constraint-message")||e.set("kobo--rank-constraint-message",t("Items cannot be selected more than once"))}return w(n,e),n.prototype._beginEndKey=function(){return"rank"},n.prototype.linkUp=function(e){var t,n,i;return t=null!=(n=this.get("kobo--rank-items"))?n.get("value"):void 0,this._rankLevels=t?this.getSurvey().choices.get(t):this.getSurvey().choices.create(),this._additionalJson=(i=this,function(){return{"kobo--rank-items":i.getList().get("name")}}),this.getList=function(e){return function(){return e._rankLevels}}(this)},n.prototype.export_relevant_values=function(e,t){var n;this._rankLevels&&t.choices.add(this._rankLevels),(n=c.clone(this.toJSON2())).type="begin_rank",n["kobo--rank-items"]=this.getList().get("name"),e.push(n)},n}(y),function(e){function t(){return t.__super__.constructor.apply(this,arguments)}w(t,Array)}(),b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.initialize=function(){return this.set("type","score__row"),this.simpleEnsureKuid()},t.prototype.export_relevant_values=function(e,t){return e.push(this.attributes)},t}(E),k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.model=b,t}(l.Collection),v=function(e){function t(e){this._scoreRows=new k,this._rowAttributeName="_scoreRows",this._extendAll(e)}return w(t,e),t.prototype._beginEndKey=function(){return"score"},t.prototype.linkUp=function(e){var t,n,i;this.getList=(i=this,function(){return i._scoreChoices}),this._additionalJson=function(e){return function(){return{"kobo--score-choices":e.getList().get("name")}}}(this),(n=this.get("kobo--score-choices"))?(t=n.get("value"))?this._scoreChoices=this.getSurvey().choices.get(t):(e.warnings.push("Score choices list not found"),this._scoreChoices=this.getSurvey().choices.add({})):(e.warnings.push("Score choices list not set"),this._scoreChoices=this.getSurvey().choices.add({name:u.txtid()}))},t.prototype.export_relevant_values=function(e,t){var n,i;(i=this._scoreChoices)&&t.choices.add(i),(n=c.clone(this.toJSON2())).type="begin_score",n["kobo--score-choices"]=this.getList().get("name"),e.push(n)},t}(y),O.Row=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.kls="Row",t.prototype.initialize=function(){var e,t,n,i,r,o,a,l,p,d,_,f,m,g,y;for(o in this._parent?(r=this._parent.newRowDetails||s.newRowDetails,i=this._parent.defaultsForType||s.defaultsForType):("undefined"!=typeof console&&null!==console&&console.error("Row not linked to parent survey."),r=s.newRowDetails,i=s.defaultsForType),t=this.attributes.type&&this.attributes.type in i?i[this.attributes.type]:{},n=c.extend({},r,t))if(f=n[o],!(o in this.attributes)){for(m in a={},f)g=f[m],a[m]="function"==typeof g?g():g;this.set(o,a)}return"$kuid"in this.attributes||this.set("$kuid",u.txtid()),"score"===(e=this.getValue("type"))?new v(this):"rank"===e&&new h(this),this.convertAttributesToRowDetails(),d=(_=this.get("type")).get("value"),(p=this.get("select_from_list_name"))&&d&&(d=d+" "+p.get("value"),_.set("value",d,{silent:!0})),y=this,(l=function(e,t,n){var i,r,o,a,u,l;if(c.isObject(t)?(l=c.keys(t)[0],r=c.values(t)[0]):(l=(a=t.split(" "))[0],r=a[1],o=a[2]),_.set("typeId",l,{silent:!0}),r&&(_.set("listName",r,{silent:!0}),(i=y.getSurvey().choices.get(r))&&_.set("list",i)),"or_other"!==o&&"select_one_or_other"!==l&&"select_multiple_or_other"!==l||_.set("orOther",o,{silent:!0}),u=s.lookupRowType(l))return _.set("rowType",u,{silent:!0});throw new Error("type `"+l+"` not found")})(_,d,{}),_.on("change:value",l),_.on("change:listName",(function(e,t,n){var i,r;return i=_.get("rowType"),r=""+_.get("typeId"),i.specifyChoice&&t&&(r+=" "+t),i.orOtherOption&&_.get("orOther")&&(r+=" or_other"),_.set({value:r},{silent:!0})})),_.on("change:list",(function(e,t,n){var i;if(_.get("rowType").specifyChoice)return(i=t.get("name"))||(i=u.txtid(),t.set("name",i,{silent:!0})),this.set("value",this.get("typeId")+" "+i)}))},t.prototype.getTypeId=function(){return this.get("type").get("typeId")},t.prototype.clone=function(){var e,t,n,i,r,s;return e={},i={_parent:this._parent,add:!1,merge:!1,remove:!1,silent:!0},c.each(this.attributes,(s=this,function(t,n){return e[n]=s.getValue(n)})),"select_one"!==(r=(n=(t=new O.Row(e,i)).get("type")).get("typeId"))&&"select_multiple"!==r||(n.set("list",this.getList().clone()),n.set("listName",n.get("list").get("name"))),this.getSurvey().trigger("change"),t},t.prototype.finalize=function(){var e,t;return this.getValue("name")||(t=[],this.getSurvey().forEachRow((function(e){var n;if(n=e.getValue("name"))return t.push(n)})),e=this.getValue("label"),this.get("name").set("value",u.sluggifyLabel(e,t))),this},t.prototype.get_type=function(){return a.question_types[this.getTypeId()]||a.question_types.default},t.prototype._isSelectQuestion=function(){var e;return"select_one"===(e=this.get("type").get("typeId"))||"select_multiple"===e},t.prototype.getAcceptedFiles=function(){var e,t;return null!=(e=this.attributes["body::accept"])&&null!=(t=e.attributes)?t.value:void 0},t.prototype.setAcceptedFiles=function(e){this.setDetail("body::accept",e)},t.prototype.getParameters=function(){var e,t;return _(null!=(e=this.attributes.parameters)&&null!=(t=e.attributes)?t.value:void 0)},t.prototype.setParameters=function(e){var t;t=f(e),this.setDetail("parameters",t)},t.prototype.getList=function(){var e,t;return!(e=null!=(t=this.get("type"))?t.get("list"):void 0)&&this._isSelectQuestion()&&(e=new r.ChoiceList({name:u.txtid()}),this.setList(e)),e},t.prototype.setList=function(e){var t;if((t=this.getSurvey().choices.get(e))||(this.getSurvey().choices.add(e),t=this.getSurvey().choices.get(e)),!t)throw new Error("List not found: "+e);return this.get("type").set("list",t)},t.prototype.parse=function(){var e,t,n,i;for(e in n=[],t=this.attributes)i=t[e],n.push(i.parse());return n},t.prototype.linkUp=function(e){var t,n,i,r;for(t in i=[],n=this.attributes)r=n[t],i.push(r.linkUp(e));return i},t}(O.BaseRow),O.RowError=function(e){function t(e,n){this._error=n.error,window.xlfHideWarnings||("undefined"!=typeof console&&null!==console&&console.error("Error creating row: ["+n.error+"]",e),p.error("Error creating row: ["+n.error+"]")),t.__super__.constructor.call(this,e,n)}return w(t,e),t.prototype.isError=function(){return!0},t.prototype.getValue=function(e){return e in this.attributes?this.attributes[e].get("value"):"[error]"},t}(O.BaseRow),O)},153:function(e,t,n){var i,r,s,o;i=n(154),e.exports=(s=/^\${(\w+)}\s*(!=|<=|>=|=|<|>)\s*((?:date\(\'\d{4}-\d{2}-\d{2}\'\))|(?:-?(?:\d+\.\d+|\.\d+|\d+.?))|(?:\'[^']+\'))/,o=/\${(\w+)}\s*((?:=|!=)\s*(?:NULL|''))/i,r=RegExp(" and | or ","gi"),i(s,o,r,/selected\(\$\{(\w+)\},\s*\'(\w+)\'\)/))},154:function(e,t,n){var i=n(20);e.exports=function(e,t,n,r){function s(n){var i=n.match(t);if(null===i&&(i=n.match(e)),!i)return function(e){var t=e.match(r);if(!t)throw new Error('criterion not recognized: "'+e+'"');return{name:t[1],operator:-1==e.indexOf("not(")?"multiplechoice_selected":"multiplechoice_notselected",response_value:t[2]}}(n);i[2]=i[2].replace(/\s+/,"").replace(/null/i,"NULL");var s={name:i[1],operator:{"=":"resp_equals","!=":"resp_notequals",">":"resp_greater","<":"resp_less",">=":"resp_greaterequals","<=":"resp_lessequals","!=''":"ans_notnull","=''":"ans_null"}[i[2]]};if(i[3]){var o=i[3].replace(/^'([^']*)'$/,"$1");o=o.replace(/date\('(\d{4}-\d{2}-\d{2})'\)/,"$1"),s.response_value=o}return s}return function(e){var t=e.split(n),r=t.length,o=e.match(n);if(o&&i.uniq(o).length>1)throw new Error("multiple criteria join operators are not supported at the moment");return 1===r?{criteria:[s(e)]}:{criteria:i.map(t,(function(e){return s(e)})),operator:o[0].replace(/ /g,"").toUpperCase()}}}},155:function(e,t,n){var i,r,s,o;i=n(154),e.exports=(s=/(\.)\s*(!=|<=|>=|=|<|>)\s*((?:date\(\'\d{4}-\d{2}-\d{2}\'\))|(?:-?(?:\d+\.\d+|\.\d+|\d+.?))|(?:\'[^']+\'))/,o=/(\.)\s*((?:=|!=)\s*(?:NULL|''))/i,r=RegExp(" and | or ","gi"),i(s,o,r,/selected\((\.)\s*,\s*\'(\w+)\'\)/))},156:function(e,t,n){var i,r,s,o=function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=n(20),i=n(47),e.exports=((s={}).Base=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.attach_to=function(e){return e instanceof s.Base&&(e=e.$el),e.append(this.el)},t.prototype.bind_event=function(e,t){return this.$el.off(e,t),this.$el.on(e,t)},t.prototype.detach=function(){return this.$el.remove()},t.prototype.val=function(e){return e?(this.$el.val(e),null==this.$el.val()?this.$el.prop("selectedIndex",0):void 0):this.$el.val()},t}(i.View),s.Label=function(e){function t(e,n,i){this.text=e,this.className=n,this.input=i,t.__super__.constructor.call(this)}return o(t,e),t.prototype.tagName="label",t.prototype.val=function(){},t.prototype.bind_event=function(){},t.prototype.render=function(){return this.text&&this.$el.text(this.text),this.className&&this.$el.addClass(this.className),this.input&&this.$el.attr("for",this.input.cid),this},t}(s.Base),s.EmptyView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.attach_to=function(){},t.prototype.bind_event=function(){},t.prototype.render=function(){return this},t.prototype.val=function(){return null},t}(s.Base),s.TextArea=function(e){function t(e,n){this.text=e,this.className=n,t.__super__.constructor.call(this)}return o(t,e),t.prototype.tagName="textarea",t.prototype.render=function(){return this.$el.val(this.text),this.$el.addClass(this.className),this.$el.on("paste",(function(e){return e.stopPropagation()})),this},t}(s.Base),s.TextBox=function(e){function t(e,n,i){this.text=e,this.className=n,this.placeholder=i,t.__super__.constructor.call(this)}return o(t,e),t.prototype.tagName="input",t.prototype.render=function(){return this.$el.attr("type","text"),this.$el.val(this.text),this.$el.addClass(this.className),this.$el.attr("placeholder",this.placeholder),this.$el.on("paste",(function(e){return e.stopPropagation()})),this},t}(s.Base),s.Button=function(e){function t(e,n){this.text=e,this.className=n,t.__super__.constructor.call(this)}return o(t,e),t.prototype.tagName="button",t.prototype.render=function(){return this.$el.html(this.text),this.$el.addClass(this.className),this},t}(s.Base),s.DropDownModel=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(i.Model),s.DropDown=function(e){function t(e){var n,i;this.render=(n=this.render,i=this,function(){return n.apply(i,arguments)}),this.options=e,t.__super__.constructor.call(this,e),this.options instanceof s.DropDownModel||(this.options=new s.DropDownModel,this.options.set("options",e)),this.options.on("change:options",this.render.bind(this))}return o(t,e),t.prototype.tagName="select",t.prototype.render=function(){var e;return e="",r.each(this.options.get("options"),(function(t){return e+='<option value="'+t.value+'">'+t.text+"</option>"})),this.$el.html(e),this},t.prototype.attach_to=function(e){return t.__super__.attach_to.call(this,e),this.$el.select2({minimumResultsForSearch:-1})},t}(s.Base),s)},157:function(e,t,n){var i,r,s,o,a,u,l,c,p,d=[].slice;r=n(20),s=n(107),i=n(78),e.exports=(a=function(e,t){var n;return null==t&&(t={}),n=o(e,t),!t.error&&t.validate&&u(n,t),n},l=function(e){var t,n,i;return t=s.sheeted(e),(n={}).survey=(i=t.sheet("survey"))?i.toObjects():[],n.choices=(i=t.sheet("choices"))?i.toObjects():[],(i=t.sheet("settings"))&&(n.settings=i.toObjects()[0]),n},c=function(e){var t,n,i,s,o,a,u,l,c,p,_,f,h,m;for(m in e)if(h=e[m],r.isArray(h)&&h.length>0&&r.isArray(h[0])){for(p=[],n=h[0],o=0,u=(i=2<=h.length?d.call(h,1):[]).length;o<u;o++)if(f=i[o],r.isArray(f)){for(c={},s=a=0,l=n.length;a<l;s=++a)t=n[s],s<f.length&&void 0!==(_=f[s])&&null!==_&&(c[t]=f[s]);p.push(c)}else p.push(f);e[m]=p}return e},o=function(e,t){return null==t&&(t={}),r.isString(e)?l(e):r.isObject(e)?c(e):void 0},p=i.q.requiredSheetNameList(),a.validateParse=u=function(e,t){var n,i,r,s,o;for(null==t&&(t={}),o=!1,n=0,i=p.length;n<i;n++)e[r=p[n]]&&(t.surveyType=r,o=!0);return e.settings&&(t.settings=!0),e.choices&&(t.choices=!0),o||(s=p.join(", "),t.error="Missing a survey sheet ["+s+"]"),!t.error},a.deserialize=o,a)},158:function(e,t,n){var i,r,s,o,a,u,l,c,p,d,_,f=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=n(20),o=n(52),i=n(78),r=n(59),a=n(37),e.exports=(p={},u=function(){function e(e,t){this.type=e,this.atts=null!=t?t:{},this.contents=[]}return e.prototype.push=function(e){this.contents.push(e)},e.prototype.export=function(){var t,n,i,r,o;for(t=[],i=0,r=(o=this.contents).length;i<r;i++)(n=o[i])instanceof e&&(n=n.export()),t.push(n);return s.extend({},this.atts,{type:this.type,__rows:t})},e}(),c=function(e){var t,n,r;for(t=0,n=e.length;t<n;t++){if((r=e[t]).__rows)return!0;if(i.q.testGroupable(r.type))return!1}return!0},p.hasBeenParsed=c,l=function(e,t){var n,i;for(n in e)i=e[n],s.isArray(i)&&"tags"!==n&&(delete e[n],s.map(t,(function(t,r){var s;return s=i[r],e[t?n+"::"+t:n]=s})));return e},_=function(e,t,n){var r,s,o,a,c,p,d,_,f,h;for(null==e&&(e="survey"),null==n&&(n=!1),p={open:{},close:{}},c=function(e,t){var n;null==(n=p[e])[t]&&(n[t]=0),p[e][t]++},d=[new u(e)],a=function(e,t){var n;return null==e&&(e="group"),c("open",e),n=new u(e,t),r().push(n),d.push(n)},o=function(e,t){if(c("close",t),d.pop().type!==e.type)throw new Error("mismatched group/repeat tags")},r=function(){var e;if(0===(e=d.length))throw new Error("unmatched group/repeat");return d[e-1]},f=0,h=t.length;f<h;f++)_=t[f],s=i.q.testGroupable(_.type),n&&n.length>0&&(_=l(_,n)),s?s.begin?a(s.type,_):o(s,_.type):r().push(_);if(1!==d.length)throw new Error(JSON.stringify({message:"unclosed groupable set",counts:p}));return r().export().__rows},d=function(e){var t,n,i,s,a,u,l;for(t=0,n=(i=o(e)).length;t<n;t++)s=(l=i[t]).required,f.call(r.truthyValues,s)>=0?l.required=!0:(a=l.required,(f.call(r.falsyValues,a)>=0||void 0===(u=l.required)||""===u)&&(l.required=!1));return i},p.parseArr=_,p.parse=function(e,t){var n;return e.translations,n=a.nullifyTranslations(e.translations,e.translated,e.survey,t),e.survey=n.survey,e.translations=n.translations,e.translations_0=n.translations_0,e.survey&&(e.survey=d(e.survey)),e.survey&&(e.survey=_("survey",e.survey,e.translations)),e.choices&&(e.choices=_("choices",e.choices,e.translations)),e.settings&&s.isArray(e.settings)&&1===e.settings.length&&(e.settings=e.settings[0]),e},p.loadChoiceLists=function(e,t){var n,i,r,s,o,a,u,l,c,p;for(p={},n=[],s=0,u=e.length;s<u;s++)p[a=(i=e[s])["list name"]||i.list_name]||(p[a]=[],n.push(a)),p[a].push(i);for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(t.add({name:r,options:p[r]}));return c},p)},19:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return p}));var i=n(2),r="Partial",s="Users",o={};new Set(["formView","formEdit","formManage","submissionsAdd","submissionsView","submissionsViewPartial","submissionsEdit","submissionsEditPartial","submissionsValidate","submissionsValidatePartial","submissionsDelete","submissionsDeletePartial"]).forEach((function(e){o[e]=e})),Object.freeze(o);var a={};a[o.submissionsView]=o.submissionsViewPartial,a[o.submissionsEdit]=o.submissionsEditPartial,a[o.submissionsValidate]=o.submissionsValidatePartial,a[o.submissionsDelete]=o.submissionsDeletePartial,Object.freeze(a);var u={};u[o.submissionsViewPartial]=i.PERMISSIONS_CODENAMES.view_submissions,u[o.submissionsEditPartial]=i.PERMISSIONS_CODENAMES.change_submissions,u[o.submissionsValidatePartial]=i.PERMISSIONS_CODENAMES.validate_submissions,u[o.submissionsDeletePartial]=i.PERMISSIONS_CODENAMES.delete_submissions,Object.freeze(u);var l={};l[o.formView]=i.PERMISSIONS_CODENAMES.view_asset,l[o.formEdit]=i.PERMISSIONS_CODENAMES.change_asset,l[o.formManage]=i.PERMISSIONS_CODENAMES.manage_asset,l[o.submissionsAdd]=i.PERMISSIONS_CODENAMES.add_submissions,l[o.submissionsView]=i.PERMISSIONS_CODENAMES.view_submissions,l[o.submissionsViewPartial]=i.PERMISSIONS_CODENAMES.partial_submissions,l[o.submissionsEdit]=i.PERMISSIONS_CODENAMES.change_submissions,l[o.submissionsEditPartial]=i.PERMISSIONS_CODENAMES.partial_submissions,l[o.submissionsValidate]=i.PERMISSIONS_CODENAMES.validate_submissions,l[o.submissionsValidatePartial]=i.PERMISSIONS_CODENAMES.partial_submissions,l[o.submissionsDelete]=i.PERMISSIONS_CODENAMES.delete_submissions,l[o.submissionsDeletePartial]=i.PERMISSIONS_CODENAMES.partial_submissions,Object.freeze(l);var c={};Object.keys(a).forEach((function(e){c[l[e]]=e})),Object.freeze(c);var p={};p[o.submissionsEditPartial]=[o.submissionsAdd],Object.freeze(p);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"SUFFIX_PARTIAL","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(s,"SUFFIX_USERS","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(o,"CHECKBOX_NAMES","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(a,"PARTIAL_CHECKBOX_PAIRS","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(u,"PARTIAL_PERM_PAIRS","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(l,"CHECKBOX_PERM_PAIRS","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(c,"PERM_CHECKBOX_PAIRS","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"),__REACT_HOT_LOADER__.register(p,"PARTIAL_IMPLIED_CHECKBOX_PAIRS","/srv/src/kpi/jsapp/js/components/permissions/permConstants.es6"))},2:function(e,n,i){"use strict";function r(e){var t={};return new Set(e).forEach((function(e){t[e]=e})),Object.freeze(t)}i.r(n),i.d(n,"createEnum",(function(){return r})),i.d(n,"ROOT_URL",(function(){return u})),i.d(n,"ANON_USERNAME",(function(){return l})),i.d(n,"PERMISSIONS_CODENAMES",(function(){return c})),i.d(n,"ENKETO_ACTIONS",(function(){return p})),i.d(n,"HOOK_LOG_STATUSES",(function(){return d})),i.d(n,"KEY_CODES",(function(){return _})),i.d(n,"MODAL_TYPES",(function(){return f})),i.d(n,"PROJECT_SETTINGS_CONTEXTS",(function(){return h})),i.d(n,"update_states",(function(){return m})),i.d(n,"AVAILABLE_FORM_STYLES",(function(){return g})),i.d(n,"VALIDATION_STATUSES",(function(){return v})),i.d(n,"VALIDATION_STATUSES_LIST",(function(){return y})),i.d(n,"AssetTypeName",(function(){return a})),i.d(n,"ASSET_TYPES",(function(){return k})),i.d(n,"ASSET_FILE_TYPES",(function(){return E})),i.d(n,"QuestionTypeName",(function(){return b})),i.d(n,"QUESTION_TYPES",(function(){return w})),i.d(n,"MetaQuestionTypeName",(function(){return O})),i.d(n,"META_QUESTION_TYPES",(function(){return A})),i.d(n,"ADDITIONAL_SUBMISSION_PROPS",(function(){return T})),i.d(n,"NAME_MAX_LENGTH",(function(){return R})),i.d(n,"COMMON_QUERIES",(function(){return j})),i.d(n,"ACCESS_TYPES",(function(){return x})),i.d(n,"GroupTypeBeginName",(function(){return S})),i.d(n,"GROUP_TYPES_BEGIN",(function(){return C})),i.d(n,"GroupTypeEndName",(function(){return L})),i.d(n,"GROUP_TYPES_END",(function(){return P})),i.d(n,"MiscRowTypeName",(function(){return q})),i.d(n,"SCORE_ROW_TYPE",(function(){return D})),i.d(n,"RANK_LEVEL_TYPE",(function(){return N})),i.d(n,"ANY_ROW_TYPE_NAMES",(function(){return $})),i.d(n,"CHOICE_LISTS",(function(){return I})),i.d(n,"MATRIX_PAIR_PROPS",(function(){return U})),i.d(n,"DEPLOYMENT_CATEGORIES",(function(){return M})),i.d(n,"QUERY_LIMIT_DEFAULT",(function(){return F})),i.d(n,"MAX_DISPLAYED_STRING_LENGTH",(function(){return B})),i.d(n,"COLLECTION_METHODS",(function(){return H})),i.d(n,"SURVEY_DETAIL_ATTRIBUTES",(function(){return z})),i.d(n,"FUNCTION_TYPE",(function(){return G})),i.d(n,"FUSE_OPTIONS",(function(){return V}));var s,o,a,u=(s=document.head.querySelector("meta[name=kpi-root-path]"),o="",null===s?(console.error('no kpi-root-path meta tag set. defaulting to ""'),o=""):o=s.content.replace(/\/*$/,""),"".concat(window.location.protocol,"//").concat(window.location.host).concat(o)),l="AnonymousUser",c=r(["view_asset","change_asset","discover_asset","manage_asset","add_submissions","view_submissions","partial_submissions","change_submissions","delete_submissions","validate_submissions"]),p=r(["edit","view"]),d={SUCCESS:2,PENDING:1,FAILED:0},_=Object.freeze({TAB:9,ENTER:13,ESC:27,SPACE:32,NBSP:160}),f={SHARING:"sharing",UPLOADING_XLS:"uploading-xls",NEW_FORM:"new-form",LIBRARY_NEW_ITEM:"library-new-item",LIBRARY_TEMPLATE:"library-template",LIBRARY_COLLECTION:"library-collection",LIBRARY_UPLOAD:"library-upload",ENKETO_PREVIEW:"enketo-preview",SUBMISSION:"submission",REPLACE_PROJECT:"replace-project",TABLE_SETTINGS:"table-settings",REST_SERVICES:"rest-services",FORM_LANGUAGES:"form-languages",FORM_TRANSLATIONS_TABLE:"form-translation-table",ASSET_TAGS:"asset-tags",ENCRYPT_FORM:"encrypt-form",BULK_EDIT_SUBMISSIONS:"bulk-edit-submissions",TABLE_MEDIA_PREVIEW:"table-media-preview",DATA_ATTACHMENT_COLUMNS:"data-attachment-columns"},h=Object.freeze({NEW:"newForm",EXISTING:"existingForm",REPLACE:"replaceProject",BUILDER:"formBuilderAside"}),m={UNSAVED_CHANGES:-1,UP_TO_DATE:!0,PENDING_UPDATE:!1,SAVE_FAILED:"SAVE_FAILED"},g=[{value:"",label:t("Default - single page")},{value:"theme-grid no-text-transform",label:t("Grid theme")},{value:"theme-grid",label:t("Grid theme with headings in ALL CAPS")},{value:"pages",label:t("Multiple pages")},{value:"theme-grid pages no-text-transform",label:t("Grid theme + Multiple pages")},{value:"theme-grid pages",label:t("Grid theme + Multiple pages + headings in ALL CAPS")}],v={no_status:{value:null,label:"—"},validation_status_not_approved:{value:"validation_status_not_approved",label:t("Not approved")},validation_status_approved:{value:"validation_status_approved",label:t("Approved")},validation_status_on_hold:{value:"validation_status_on_hold",label:t("On hold")}},y=[v.no_status,v.validation_status_not_approved,v.validation_status_approved,v.validation_status_on_hold];!function(e){e.question="question",e.block="block",e.template="template",e.survey="survey",e.collection="collection"}(a||(a={}));var b,k={question:{id:a.question,label:t("question")},block:{id:a.block,label:t("block")},template:{id:a.template,label:t("template")},survey:{id:a.survey,label:t("project")},collection:{id:a.collection,label:t("collection")}},E={map_layer:{id:"map_layer",label:t("map layer")},form_media:{id:"form_media",label:t("form media")}};!function(e){e.acknowledge="acknowledge",e.audio="audio",e.barcode="barcode",e.calculate="calculate",e.date="date",e.datetime="datetime",e.decimal="decimal",e["xml-external"]="xml-external",e.file="file",e.geopoint="geopoint",e.geoshape="geoshape",e.geotrace="geotrace",e.hidden="hidden",e.image="image",e.integer="integer",e.kobomatrix="kobomatrix",e.note="note",e.range="range",e.rank="rank",e.score="score",e.select_multiple="select_multiple",e.select_one="select_one",e.text="text",e.time="time",e.video="video"}(b||(b={}));var O,w=Object.freeze({acknowledge:{label:t("Acknowledge"),icon:"qt-acknowledge",id:b.acknowledge},audio:{label:t("Audio"),icon:"qt-audio",id:b.audio},barcode:{label:t("Barcode / QR Code"),icon:"qt-barcode",id:b.barcode},calculate:{label:t("Calculate"),icon:"qt-calculate",id:b.calculate},date:{label:t("Date"),icon:"qt-date",id:b.date},datetime:{label:t("Date & time"),icon:"qt-date-time",id:b.datetime},decimal:{label:t("Decimal"),icon:"qt-decimal",id:b.decimal},"xml-external":{label:t("External XML"),icon:"qt-external-xml",id:b["xml-external"]},file:{label:t("File"),icon:"qt-file",id:b.file},geopoint:{label:t("Point"),icon:"qt-point",id:b.geopoint},geoshape:{label:t("Area"),icon:"qt-area",id:b.geoshape},geotrace:{label:t("Line"),icon:"qt-line",id:b.geotrace},hidden:{label:t("Hidden"),icon:"qt-hidden",id:b.hidden},image:{label:t("Photo"),icon:"qt-photo",id:b.image},integer:{label:t("Number"),icon:"qt-number",id:b.integer},kobomatrix:{label:t("Question Matrix"),icon:"qt-question-matrix",id:b.kobomatrix},note:{label:t("Note"),icon:"qt-note",id:b.note},range:{label:t("Range"),icon:"qt-range",id:b.range},rank:{label:t("Ranking"),icon:"qt-ranking",id:b.rank},score:{label:t("Rating"),icon:"qt-rating",id:b.score},select_multiple:{label:t("Select Many"),icon:"qt-select-many",id:b.select_multiple},select_one:{label:t("Select One"),icon:"qt-select-one",id:b.select_one},text:{label:t("Text"),icon:"qt-text",id:b.text},time:{label:t("Time"),icon:"qt-time",id:b.time},video:{label:t("Video"),icon:"qt-video",id:b.video}});!function(e){e.start="start",e.end="end",e.today="today",e.username="username",e.simserial="simserial",e.subscriberid="subscriberid",e.deviceid="deviceid",e.phonenumber="phonenumber",e.audit="audit",e["background-audio"]="background-audio"}(O||(O={}));var S,A=r([O.start,O.end,O.today,O.username,O.simserial,O.subscriberid,O.deviceid,O.phonenumber,O.audit,O["background-audio"]]),T=r(["_id","_uuid","_submission_time","_validation_status","_notes","_status","_submitted_by","_tags","_index"]),R=255,j=Object.freeze({b:"asset_type:block",q:"asset_type:question",t:"asset_type:template",s:"asset_type:survey",c:"asset_type:collection",qb:"(asset_type:question OR asset_type:block)",qbt:"(asset_type:question OR asset_type:block OR asset_type:template)",qbtc:"(asset_type:question OR asset_type:block OR asset_type:template OR asset_type:collection)"}),x=r(["owned","shared","public","subscribed","superuser"]);!function(e){e.begin_group="begin_group",e.begin_score="begin_score",e.begin_rank="begin_rank",e.begin_kobomatrix="begin_kobomatrix",e.begin_repeat="begin_repeat"}(S||(S={}));var L,C=r([S.begin_group,S.begin_score,S.begin_rank,S.begin_kobomatrix,S.begin_repeat]);!function(e){e.end_group="end_group",e.end_score="end_score",e.end_rank="end_rank",e.end_kobomatrix="end_kobomatrix",e.end_repeat="end_repeat"}(L||(L={}));var q,P=r(["end_group","end_score","end_rank","end_kobomatrix","end_repeat"]);!function(e){e.score__row="score__row",e.rank__level="rank__level"}(q||(q={}));var D=q.score__row,N=q.rank__level,$=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},b),O),S),L),q),I=Object.freeze({SELECT:"select_from_list_name",MATRIX:"kobo--matrix_list",SCORE:"kobo--score-choices",RANK:"kobo--rank-items"}),U={inSurvey:I.MATRIX,inChoices:"list_name"},M=Object.freeze({Deployed:{id:"Deployed",label:t("Deployed")},Draft:{id:"Draft",label:t("Draft")},Archived:{id:"Archived",label:t("Archived")}}),F=5e3,B=Object.freeze({form_media:50,connect_projects:30}),H=Object.freeze({offline_url:{id:"offline_url",label:t("Online-Offline (multiple submission)"),desc:t("This allows online and offline submissions and is the best option for collecting data in the field.")},url:{id:"url",label:t("Online-Only (multiple submissions)"),desc:t("This is the best option when entering many records at once on a computer, e.g. for transcribing paper records.")},single_url:{id:"single_url",label:t("Online-Only (single submission)"),desc:t('This allows a single submission, and can be paired with the "return_url" parameter to redirect the user to a URL of your choice after the form has been submitted.')},single_once_url:{id:"single_once_url",label:t("Online-only (once per respondent)"),desc:t("This allows your web form to only be submitted once per user, using basic protection to prevent the same user (on the same browser & device) from submitting more than once.")},iframe_url:{id:"iframe_url",label:t("Embeddable web form code"),desc:t("Use this html5 code snippet to integrate your form on your own website using smaller margins.")},preview_url:{id:"preview_url",label:t("View only"),desc:t("Use this version for testing, getting feedback. Does not allow submitting data.")},android:{id:"android",label:t("Android application"),desc:t("Use this option to collect data in the field with your Android device."),url:"https://play.google.com/store/apps/details?id=org.koboc.collect.android&hl=en"}}),z=Object.freeze({value:{id:"value"},parameters:{id:"parameters"}}),G=Object.freeze({function:{id:"function"}}),V={isCaseSensitive:!1,includeScore:!0,minMatchCharLength:1,shouldSort:!1,ignoreFieldNorm:!0,threshold:.2,ignoreLocation:!0},Y={ROOT_URL:u,ANON_USERNAME:l,PERMISSIONS_CODENAMES:c,HOOK_LOG_STATUSES:d,KEY_CODES:_,MODAL_TYPES:f,PROJECT_SETTINGS_CONTEXTS:h,update_states:m,AVAILABLE_FORM_STYLES:g,VALIDATION_STATUSES:v,VALIDATION_STATUSES_LIST:y,ASSET_TYPES:k,ASSET_FILE_TYPES:E,QUESTION_TYPES:w,META_QUESTION_TYPES:A,ADDITIONAL_SUBMISSION_PROPS:T,NAME_MAX_LENGTH:R,COMMON_QUERIES:j,ACCESS_TYPES:x,GROUP_TYPES_BEGIN:C,GROUP_TYPES_END:P,SCORE_ROW_TYPE:D,RANK_LEVEL_TYPE:N,DEPLOYMENT_CATEGORIES:M,QUERY_LIMIT_DEFAULT:F,CHOICE_LISTS:I,MAX_DISPLAYED_STRING_LENGTH:B,SURVEY_DETAIL_ATTRIBUTES:z,FUNCTION_TYPE:G},Q=Y;n.default=Q;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"createEnum","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(u,"ROOT_URL","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(l,"ANON_USERNAME","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(c,"PERMISSIONS_CODENAMES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(p,"ENKETO_ACTIONS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(d,"HOOK_LOG_STATUSES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(_,"KEY_CODES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(f,"MODAL_TYPES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(h,"PROJECT_SETTINGS_CONTEXTS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(m,"update_states","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(g,"AVAILABLE_FORM_STYLES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(v,"VALIDATION_STATUSES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(y,"VALIDATION_STATUSES_LIST","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(a,"AssetTypeName","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(k,"ASSET_TYPES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(E,"ASSET_FILE_TYPES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(b,"QuestionTypeName","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(w,"QUESTION_TYPES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(O,"MetaQuestionTypeName","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(A,"META_QUESTION_TYPES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(T,"ADDITIONAL_SUBMISSION_PROPS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(R,"NAME_MAX_LENGTH","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(j,"COMMON_QUERIES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(x,"ACCESS_TYPES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(S,"GroupTypeBeginName","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(C,"GROUP_TYPES_BEGIN","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(L,"GroupTypeEndName","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(P,"GROUP_TYPES_END","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(q,"MiscRowTypeName","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(D,"SCORE_ROW_TYPE","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(N,"RANK_LEVEL_TYPE","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register($,"ANY_ROW_TYPE_NAMES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(I,"CHOICE_LISTS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(U,"MATRIX_PAIR_PROPS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(M,"DEPLOYMENT_CATEGORIES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(F,"QUERY_LIMIT_DEFAULT","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(B,"MAX_DISPLAYED_STRING_LENGTH","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(H,"COLLECTION_METHODS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(z,"SURVEY_DETAIL_ATTRIBUTES","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(G,"FUNCTION_TYPE","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(V,"FUSE_OPTIONS","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(Y,"constants","/srv/src/kpi/jsapp/js/constants.ts"),__REACT_HOT_LOADER__.register(Q,"default","/srv/src/kpi/jsapp/js/constants.ts"))},22:function(e,t,n){"use strict";n.r(t),n.d(t,"hasRowRestriction",(function(){return o})),n.d(t,"hasAssetRestriction",(function(){return a})),n.d(t,"getLockingProfile",(function(){return u})),n.d(t,"getRowLockingProfile",(function(){return l})),n.d(t,"getAssetLockingProfile",(function(){return c})),n.d(t,"isRowLocked",(function(){return p})),n.d(t,"isAssetLocked",(function(){return d})),n.d(t,"hasAssetAnyLocking",(function(){return _})),n.d(t,"isAssetAllLocked",(function(){return f})),n.d(t,"isAssetLockable",(function(){return h})),n.d(t,"getQuestionFeatures",(function(){return m})),n.d(t,"getGroupFeatures",(function(){return g})),n.d(t,"getFormFeatures",(function(){return v}));var i=n(13),r=n(2),s=n(23);function o(e,t,n){if(f(e))return s.LOCK_ALL_RESTRICTION_NAMES.includes(n);var i=l(e,t);return!!i&&i.restrictions.includes(n)}function a(e,t){if(f(e))return s.LOCK_ALL_RESTRICTION_NAMES.includes(t);var n=c(e);return!!n&&n.restrictions.includes(t)}function u(e,t){var n=null;return e&&Array.isArray(e[s.LOCKING_PROFILES_PROP_NAME])&&e[s.LOCKING_PROFILES_PROP_NAME].forEach((function(e,i){e.name===t&&(n={index:i,name:e.name,restrictions:e.restrictions})})),n}function l(e,t){var n=e.survey.find((function(e){return Object(i.i)(e)===t}));return n&&"string"==typeof n[s.LOCKING_PROFILE_PROP_NAME]&&n[s.LOCKING_PROFILE_PROP_NAME].length>=1?u(e,n[s.LOCKING_PROFILE_PROP_NAME]):null}function c(e){return e.settings&&"string"==typeof e.settings[s.LOCKING_PROFILE_PROP_NAME]&&e.settings[s.LOCKING_PROFILE_PROP_NAME].length>=1?u(e,e.settings[s.LOCKING_PROFILE_PROP_NAME]):null}function p(e,t){return!!f(e)||Boolean(l(e,t))}function d(e){return!!f(e)||Boolean(c(e))}function _(e){if(d(e))return!0;var t=null==e?void 0:e.survey.find((function(t){return p(e,Object(i.i)(t))}));return Boolean(t)}function f(e){return Boolean((null==e?void 0:e.settings)&&!0===e.settings[s.LOCK_ALL_PROP_NAME])}function h(e){return e===r.ASSET_TYPES.survey.id}function m(e,t){return e.survey.find((function(e){return Object(i.i)(e)===t}))?y(s.QUESTION_RESTRICTIONS,l(e,t),f(e)):null}function g(e,t){return e.survey.find((function(e){return Object(i.i)(e)===t}))?y(s.GROUP_RESTRICTIONS,l(e,t),f(e)):null}function v(e){return y(s.FORM_RESTRICTIONS,c(e),f(e))}function y(e,t,n){var i={cans:[],cants:[]};return e.forEach((function(e){n||t&&t.restrictions.includes(e.name)?i.cants.push(e):i.cans.push(e)})),i}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(o,"hasRowRestriction","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(a,"hasAssetRestriction","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(u,"getLockingProfile","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(l,"getRowLockingProfile","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(c,"getAssetLockingProfile","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(p,"isRowLocked","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(d,"isAssetLocked","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(_,"hasAssetAnyLocking","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(f,"isAssetAllLocked","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(h,"isAssetLockable","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(m,"getQuestionFeatures","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(g,"getGroupFeatures","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(v,"getFormFeatures","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"),__REACT_HOT_LOADER__.register(y,"_getFeatures","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.es6"))},23:function(e,n,i){"use strict";i.r(n),i.d(n,"LOCKING_RESTRICTIONS",(function(){return r})),i.d(n,"QUESTION_RESTRICTIONS",(function(){return s})),i.d(n,"GROUP_RESTRICTIONS",(function(){return o})),i.d(n,"FORM_RESTRICTIONS",(function(){return a})),i.d(n,"LOCK_ALL_RESTRICTION_NAMES",(function(){return u})),i.d(n,"LOCK_ALL_PROP_NAME",(function(){return l})),i.d(n,"LOCKING_PROFILE_PROP_NAME",(function(){return c})),i.d(n,"LOCKING_PROFILES_PROP_NAME",(function(){return p})),i.d(n,"LOCKING_UI_CLASSNAMES",(function(){return d}));var r=Object.freeze({choice_add:{name:"choice_add",label:t("Add choice to question")},choice_delete:{name:"choice_delete",label:t("Remove choice from question")},choice_label_edit:{name:"choice_label_edit",label:t("Edit choice labels")},choice_order_edit:{name:"choice_order_edit",label:t("Change choice order")},choice_value_edit:{name:"choice_value_edit",label:t("Edit choice values")},question_delete:{name:"question_delete",label:t("Delete question")},question_label_edit:{name:"question_label_edit",label:t("Edit question labels")},question_settings_edit:{name:"question_settings_edit",label:t("Edit question settings")},question_skip_logic_edit:{name:"question_skip_logic_edit",label:t("Edit skip logic")},question_validation_edit:{name:"question_validation_edit",label:t("Edit validation")},group_delete:{name:"group_delete",label:t("Delete entire group")},group_label_edit:{name:"group_label_edit",label:t("Edit group labels")},group_question_add:{name:"group_question_add",label:t("Add question to group")},group_question_delete:{name:"group_question_delete",label:t("Remove question from group")},group_question_order_edit:{name:"group_question_order_edit",label:t("Change question order within group")},group_settings_edit:{name:"group_settings_edit",label:t("Edit group settings")},group_skip_logic_edit:{name:"group_skip_logic_edit",label:t("Edit skip logic")},group_split:{name:"group_split",label:t("Split group")},form_appearance:{name:"form_appearance",label:t("Change form appearance")},form_meta_edit:{name:"form_meta_edit",label:t("Change form meta questions")},form_replace:{name:"form_replace",label:t("Replace whole form")},group_add:{name:"group_add",label:t("Add group")},question_add:{name:"question_add",label:t("Add question")},question_order_edit:{name:"question_order_edit",label:t("Change question order")},language_edit:{name:"language_edit",label:t("Change languages")}}),s=[r.choice_add,r.choice_delete,r.choice_label_edit,r.choice_order_edit,r.choice_value_edit,r.question_delete,r.question_label_edit,r.question_settings_edit,r.question_skip_logic_edit,r.question_validation_edit],o=[r.group_delete,r.group_label_edit,r.group_question_add,r.group_question_delete,r.group_question_order_edit,r.group_settings_edit,r.group_skip_logic_edit,r.group_split],a=[r.form_appearance,r.form_meta_edit,r.form_replace,r.group_add,r.question_add,r.question_order_edit,r.language_edit],u=[r.choice_add.name,r.choice_delete.name,r.choice_label_edit.name,r.choice_order_edit.name,r.choice_value_edit.name,r.question_delete.name,r.question_label_edit.name,r.question_settings_edit.name,r.question_skip_logic_edit.name,r.question_validation_edit.name,r.group_delete.name,r.group_label_edit.name,r.group_question_add.name,r.group_question_delete.name,r.group_question_order_edit.name,r.group_settings_edit.name,r.group_skip_logic_edit.name,r.group_split.name,r.form_appearance.name,r.form_meta_edit.name,r.form_replace.name,r.group_add.name,r.question_add.name,r.question_order_edit.name,r.language_edit.name],l="kobo--lock_all",c="kobo--locking-profile",p="kobo--locking-profiles",d={HIDDEN:"locking__ui-hidden",DISABLED:"locking__ui-disabled"};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"LOCKING_RESTRICTIONS","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(s,"QUESTION_RESTRICTIONS","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(o,"GROUP_RESTRICTIONS","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(a,"FORM_RESTRICTIONS","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(u,"LOCK_ALL_RESTRICTION_NAMES","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(l,"LOCK_ALL_PROP_NAME","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(c,"LOCKING_PROFILE_PROP_NAME","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(p,"LOCKING_PROFILES_PROP_NAME","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"),__REACT_HOT_LOADER__.register(d,"LOCKING_UI_CLASSNAMES","/srv/src/kpi/jsapp/js/components/locking/lockingConstants.es6"))},24:function(e,n,i){"use strict";var r=i(8);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var n,i,r,s=l(c);function c(){var e;return o(this,c),(e=s.apply(this,arguments)).permissions=[],e}return n=c,(i=[{key:"setPermissions",value:function(e){this.permissions=e}},{key:"getPermissionByCodename",value:function(e){return this.verifyReady(),this.permissions.find((function(t){return t.codename===e}))}},{key:"getPermission",value:function(e){return this.verifyReady(),this.permissions.find((function(t){return t.url===e}))}},{key:"verifyReady",value:function(){if(!this.isReady())throw new Error(t("Permission config is not ready or failed to initialize!"))}},{key:"isReady",value:function(){return Array.isArray(this.permissions)&&0!==this.permissions.length}}])&&a(n.prototype,i),r&&a(n,r),c}(i.n(r).a.Store),_=new d,f=_;n.a=f;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"PermConfigStore","/srv/src/kpi/jsapp/js/components/permissions/permConfig.ts"),__REACT_HOT_LOADER__.register(_,"permConfig","/srv/src/kpi/jsapp/js/components/permissions/permConfig.ts"),__REACT_HOT_LOADER__.register(f,"default","/srv/src/kpi/jsapp/js/components/permissions/permConfig.ts"))},3:function(e,n,i){"use strict";i.d(n,"a",(function(){return D}));var r=i(14),s=i.n(r),o=i(8),a=i.n(o);function u(e,t){var n=e.utils;return{triggerPromise:function(){var e=this,i=arguments,r=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0,s=new t((function(t,s){if(e.willCallPromise)n.nextTick((function(){var n=e.promise;e.promise=function(i){return i.then(t,s),e.promise=n,e.promise.apply(e,arguments)},e.trigger.apply(e,i)}));else{if(r)var o=e.completed.listen((function(){var e=Array.prototype.slice.call(arguments);o(),a(),t(e.length>1?e:e[0])})),a=e.failed.listen((function(){var e=Array.prototype.slice.call(arguments);o(),a(),s(e.length>1?e:e[0])}));n.nextTick((function(){e.trigger.apply(e,i)})),r||t()}}));return s.catch((function(){})),s},promise:function(e){var t=this;if(!(this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0))throw new Error('Publisher must have "completed" and "failed" child publishers');e.then((function(e){return t.completed(e)}),(function(e){return t.failed(e)}))},listenAndPromise:function(e,t){var n=this;t=t||this,this.willCallPromise=(this.willCallPromise||0)+1;var i=this.listen((function(){if(!e)throw new Error("Expected a function returning a promise but got "+e);var i=arguments,r=e.apply(t,i);return n.promise.call(n,r)}),t);return function(){n.willCallPromise--,i.call(n)}}}}var l=function(e){return function(t){var n=u(t,e),i=n.triggerPromise,r=n.promise,s=n.listenAndPromise;t.PublisherMethods.triggerAsync=i,t.PublisherMethods.promise=r,t.PublisherMethods.listenAndPromise=s}},c=l,p=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(u,"createFunctions","/srv/src/kpi/jsapp/js/libs/reflux-promise.js"),__REACT_HOT_LOADER__.register(l,"default","/srv/src/kpi/jsapp/js/libs/reflux-promise.js")),i(7)),d=i(4),_=i(2),f=i(24);a.a.use(c(window.Promise));var h=a.a.createActions({getConfig:{children:["completed","failed"]},getAssetPermissions:{children:["completed","failed"]},bulkSetAssetPermissions:{children:["completed","failed"]},assignAssetPermission:{children:["completed","failed"]},removeAssetPermission:{children:["completed","failed"]},setAssetPublic:{children:["completed","failed"]},copyPermissionsFrom:{children:["completed","failed"]}});h.getConfig.listen((function(){p.a.getPermissionsConfig().done(h.getConfig.completed).fail(h.getConfig.failed)})),h.getConfig.failed.listen((function(){Object(d.notify)("Failed to get permissions config!","error")})),h.getAssetPermissions.listen((function(e){p.a.getAssetPermissions(e).done(h.getAssetPermissions.completed).fail(h.getAssetPermissions.failed)})),h.bulkSetAssetPermissions.listen((function(e,t){p.a.bulkSetAssetPermissions(e,t).done((function(e){h.bulkSetAssetPermissions.completed(e)})).fail((function(){h.getAssetPermissions(e),h.bulkSetAssetPermissions.failed()}))})),h.assignAssetPermission.listen((function(e,t){p.a.assignAssetPermission(e,t).done((function(){h.getAssetPermissions(e),h.assignAssetPermission.completed(e)})).fail((function(){h.getAssetPermissions(e),h.assignAssetPermission.failed(e)}))})),h.removeAssetPermission.listen((function(e,t,n){p.a.removePermission(t).done((function(){n||h.getAssetPermissions(e),h.removeAssetPermission.completed(e,n)})).fail((function(){h.getAssetPermissions(e),h.removeAssetPermission.failed(e)}))})),h.setAssetPublic.listen((function(e,t){if(t){var n=e.permissions.filter((function(t){return t.user!==e.owner}));n.push({user:Object(d.buildUserUrl)(_.ANON_USERNAME),permission:f.a.getPermissionByCodename(_.PERMISSIONS_CODENAMES.view_asset).url}),n.push({user:Object(d.buildUserUrl)(_.ANON_USERNAME),permission:f.a.getPermissionByCodename(_.PERMISSIONS_CODENAMES.discover_asset).url}),p.a.bulkSetAssetPermissions(e.uid,n).done((function(){h.setAssetPublic.completed(e.uid,t)})).fail((function(){h.setAssetPublic.failed(e.uid,t)}))}else{var i=e.permissions.find((function(e){return e.user===Object(d.buildUserUrl)(_.ANON_USERNAME)&&e.permission===f.a.getPermissionByCodename(_.PERMISSIONS_CODENAMES.view_asset).url}));p.a.removePermission(i.url).done((function(){h.setAssetPublic.completed(e.uid,t)})).fail((function(){h.setAssetPublic.failed(e.uid,t)}))}})),h.copyPermissionsFrom.listen((function(e,t){p.a.copyPermissionsFrom(e,t).done((function(){h.getAssetPermissions(t),h.copyPermissionsFrom.completed(e,t)})).fail(h.copyPermissionsFrom.failed)}));"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(h,"permissionsActions","/srv/src/kpi/jsapp/js/actions/permissions.es6");var m=a.a.createActions({getInAppMessages:{children:["completed","failed"]},setMessageAcknowledged:{children:["completed","failed"]},setMessageReadTime:{children:["completed","failed"]}});m.getInAppMessages.listen((function(){p.a.getHelpInAppMessages().done(m.getInAppMessages.completed).fail(m.getInAppMessages.failed)})),m.getInAppMessages.failed.listen((function(){Object(d.notify)(t("Failed to get in app messages."),"error")})),m.setMessageReadTime.listen((function(e,t){p.a.patchHelpInAppMessage(e,{interactions:{readTime:t,acknowledged:!0}}).done(m.setMessageReadTime.completed).fail(m.setMessageReadTime.failed)})),m.setMessageReadTime.failed.listen((function(){Object(d.notify)(t("Failed to set message readTime."),"error")})),m.setMessageAcknowledged.listen((function(e,t){p.a.patchHelpInAppMessage(e,{interactions:{acknowledged:t}}).done(m.setMessageAcknowledged.completed).fail(m.setMessageAcknowledged.failed)})),m.setMessageAcknowledged.failed.listen((function(){Object(d.notify)(t("Failed to set message acknowledged."),"error")}));"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(m,"helpActions","/srv/src/kpi/jsapp/js/actions/help.es6");var g=a.a.createActions({searchMyCollectionAssets:{children:["started","completed","failed"]},searchMyLibraryAssets:{children:["started","completed","failed"]},searchMyCollectionMetadata:{children:["completed","failed"]},searchMyLibraryMetadata:{children:["completed","failed"]},searchPublicCollections:{children:["started","completed","failed"]},searchPublicCollectionsMetadata:{children:["completed","failed"]},subscribeToCollection:{children:["completed","failed"]},unsubscribeFromCollection:{children:["completed","failed"]},moveToCollection:{children:["completed","failed"]},getCollections:{children:["completed","failed"]}});g.searchMyCollectionAssets.listen((function(e){var t=p.a.searchMyCollectionAssets(e).done(g.searchMyCollectionAssets.completed).fail(g.searchMyCollectionAssets.failed);g.searchMyCollectionAssets.started(t.abort)})),g.searchMyLibraryAssets.listen((function(e){var t=p.a.searchMyLibraryAssets(e).done(g.searchMyLibraryAssets.completed).fail(g.searchMyLibraryAssets.failed);g.searchMyLibraryAssets.started(t.abort)})),g.searchMyCollectionMetadata.listen((function(e){p.a.searchMyCollectionMetadata(e).done(g.searchMyCollectionMetadata.completed).fail(g.searchMyCollectionMetadata.failed)})),g.searchMyLibraryMetadata.listen((function(e){p.a.searchMyLibraryMetadata(e).done(g.searchMyLibraryMetadata.completed).fail(g.searchMyLibraryMetadata.failed)})),g.searchPublicCollections.listen((function(e){var t=p.a.searchPublicCollections(e).done(g.searchPublicCollections.completed).fail(g.searchPublicCollections.failed);g.searchPublicCollections.started(t.abort)})),g.searchPublicCollectionsMetadata.listen((function(e){p.a.searchPublicCollectionsMetadata(e).done(g.searchPublicCollectionsMetadata.completed).fail(g.searchPublicCollectionsMetadata.failed)})),g.subscribeToCollection.listen((function(e){p.a.subscribeToCollection(e).done(g.subscribeToCollection.completed).fail(g.subscribeToCollection.failed)})),g.unsubscribeFromCollection.listen((function(e){p.a.unsubscribeFromCollection(e).done(g.unsubscribeFromCollection.completed).fail(g.unsubscribeFromCollection.failed)})),g.moveToCollection.listen((function(e,t){p.a.patchAsset(e,{parent:t}).done(g.moveToCollection.completed).fail(g.moveToCollection.failed)})),g.getCollections.listen((function(e){p.a.getCollections(e).done(g.getCollections.completed).fail(g.getCollections.failed)})),g.moveToCollection.completed.listen((function(e){null===e.parent?Object(d.notify)(t("Successfuly removed from collection")):Object(d.notify)(t("Successfuly moved to collection"))})),g.moveToCollection.failed.listen((function(){Object(d.notify)(t("Move to collection failed"),"error")}));var v=function(e){var n;"abort"!==e.statusText&&Object(d.notify)((null===(n=e.responseJSON)||void 0===n?void 0:n.detail)||t("Failed to get the results"),"error")};g.searchMyLibraryAssets.failed.listen(v),g.searchMyLibraryMetadata.failed.listen(v),g.searchPublicCollections.failed.listen(v),g.searchPublicCollectionsMetadata.failed.listen(v);var y=g,b=y,k=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(g,"libraryActions","/srv/src/kpi/jsapp/js/actions/library.es6"),__REACT_HOT_LOADER__.register(v,"onAnySearchFailed","/srv/src/kpi/jsapp/js/actions/library.es6"),__REACT_HOT_LOADER__.register(y,"default","/srv/src/kpi/jsapp/js/actions/library.es6")),a.a.createActions({getSubmissions:{children:["completed","failed"]},bulkDeleteStatus:{children:["completed","failed"]},bulkPatchStatus:{children:["completed","failed"]},bulkPatchValues:{children:["completed","failed"]},bulkDelete:{children:["completed","failed"]}}));k.getSubmissions.listen((function(e){p.a.getSubmissions(e.uid,e.pageSize,e.page,e.sort,e.fields,e.filter).done((function(t){k.getSubmissions.completed(t,e)})).fail((function(t){k.getSubmissions.failed(t,e)}))})),k.bulkDeleteStatus.listen((function(e,t){p.a.bulkRemoveSubmissionsValidationStatus(e,t).done(k.bulkDeleteStatus.completed).fail(k.bulkDeleteStatus.failed)})),k.bulkDeleteStatus.failed.listen((function(){Object(d.notify)(t("Failed to update submissions."),"error")})),k.bulkPatchStatus.listen((function(e,t){p.a.bulkPatchSubmissionsValidationStatus(e,t).done(k.bulkPatchStatus.completed).fail(k.bulkPatchStatus.failed)})),k.bulkPatchStatus.failed.listen((function(){Object(d.notify)(t("Failed to update submissions."),"error")})),k.bulkPatchValues.listen((function(e,t,n){p.a.bulkPatchSubmissionsValues(e,t,n).done(k.bulkPatchValues.completed).fail(k.bulkPatchValues.failed)})),k.bulkPatchValues.completed.listen((function(e){0!==e.failures&&Object(d.notify)(t("Failed to update some submissions values."),"error")})),k.bulkPatchValues.failed.listen((function(){Object(d.notify)(t("Failed to update submissions values."),"error")})),k.bulkDelete.listen((function(e,t){p.a.bulkDeleteSubmissions(e,t).done(k.bulkDelete.completed).fail(k.bulkDelete.failed)})),k.bulkDelete.failed.listen((function(){Object(d.notify)(t("Failed to delete submissions."),"error")}));var E=k,O=E,w=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(k,"submissionsActions","/srv/src/kpi/jsapp/js/actions/submissions.es6"),__REACT_HOT_LOADER__.register(E,"default","/srv/src/kpi/jsapp/js/actions/submissions.es6")),a.a.createActions({loadMedia:{children:["completed","failed"]},uploadMedia:{children:["completed","failed"]},deleteMedia:{children:["completed","failed"]}}));w.uploadMedia.listen((function(e,t){p.a.postFormMedia(e,t).done((function(){w.uploadMedia.completed(e)})).fail(w.uploadMedia.failed)})),w.uploadMedia.completed.listen((function(e){w.loadMedia(e)})),w.uploadMedia.failed.listen((function(){s.a.error(t("Could not upload your media"))})),w.loadMedia.listen((function(e){p.a.getAssetFiles(e,"form_media").done(w.loadMedia.completed).fail(w.loadMedia.failed)})),w.loadMedia.failed.listen((function(){s.a.error(t("Something went wrong with getting your media"))})),w.deleteMedia.listen((function(e,t){p.a.deleteFormMedia(t).done((function(){w.deleteMedia.completed(e)})).fail(w.deleteMedia.failed)})),w.deleteMedia.completed.listen((function(e){s.a.success(t("Successfully deleted media")),w.loadMedia(e)})),w.deleteMedia.failed.listen((function(){s.a.error(t("Failed to delete media!"))}));var S=w,A=S,T=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register("form_media","FORM_MEDIA_FILE_TYPE","/srv/src/kpi/jsapp/js/actions/mediaActions.es6"),__REACT_HOT_LOADER__.register(w,"formMediaActions","/srv/src/kpi/jsapp/js/actions/mediaActions.es6"),__REACT_HOT_LOADER__.register(S,"default","/srv/src/kpi/jsapp/js/actions/mediaActions.es6")),a.a.createActions({getExport:{children:["completed","failed"]},getExports:{children:["completed","failed"]},createExport:{children:["completed","failed"]},deleteExport:{children:["completed","failed"]},getExportSettings:{children:["completed","failed"]},getExportSetting:{children:["completed","failed"]},updateExportSetting:{children:["completed","failed"]},createExportSetting:{children:["completed","failed"]},deleteExportSetting:{children:["completed","failed"]}}));T.getExports.listen((function(e){p.a.getAssetExports(e).done(T.getExports.completed).fail(T.getExports.failed)})),T.getExport.listen((function(e,t){p.a.getAssetExport(e,t).done(T.getExport.completed).fail(T.getExport.failed)})),T.createExport.listen((function(e,t){p.a.createAssetExport(e,t).done(T.createExport.completed).fail(T.createExport.failed)})),T.createExport.failed.listen((function(){Object(d.notify)(t("Failed to create export"),"error")})),T.deleteExport.listen((function(e,t){p.a.deleteAssetExport(e,t).done(T.deleteExport.completed).fail(T.deleteExport.failed)})),T.deleteExport.failed.listen((function(){Object(d.notify)(t("Failed to delete export"),"error")})),T.getExportSettings.listen((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.a.getExportSettings(e).done((function(e){T.getExportSettings.completed(e,t)})).fail(T.getExportSettings.failed)})),T.getExportSetting.listen((function(e,t){p.a.getExportSetting(e,t).done(T.getExportSetting.completed).fail(T.getExportSetting.failed)})),T.updateExportSetting.listen((function(e,t,n){var i={name:n.name,export_settings:JSON.stringify(n.export_settings)};p.a.updateExportSetting(e,t,i).done(T.updateExportSetting.completed).fail(T.updateExportSetting.failed)})),T.updateExportSetting.failed.listen((function(){Object(d.notify)(t("Failed to update export setting"),"error")})),T.createExportSetting.listen((function(e,t){var n={name:t.name,export_settings:JSON.stringify(t.export_settings)};p.a.createExportSetting(e,n).done(T.createExportSetting.completed).fail(T.createExportSetting.failed)})),T.createExportSetting.failed.listen((function(){Object(d.notify)(t("Failed to create export setting"),"error")})),T.deleteExportSetting.listen((function(e,t){p.a.deleteExportSetting(e,t).done(T.deleteExportSetting.completed).fail(T.deleteExportSetting.failed)})),T.deleteExportSetting.failed.listen((function(){Object(d.notify)(t("Failed to delete export setting"),"error")}));var R=T,j=R,x=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(T,"exportsActions","/srv/src/kpi/jsapp/js/actions/exportsActions.es6"),__REACT_HOT_LOADER__.register(R,"default","/srv/src/kpi/jsapp/js/actions/exportsActions.es6")),a.a.createActions({attachToSource:{children:["started","completed","failed"]},detachSource:{children:["completed","failed"]},patchSource:{children:["started","completed","failed"]},getAttachedSources:{children:["completed","failed"]},getSharingEnabledAssets:{children:["completed","failed"]},toggleDataSharing:{children:["completed","failed"]},updateColumnFilters:{children:["completed","failed"]}}));x.attachToSource.listen((function(e,t){p.a.attachToSource(e,t).done(x.attachToSource.completed).fail(x.attachToSource.failed),x.attachToSource.started()})),x.attachToSource.failed.listen((function(e){var n;s.a.error((null==e||null===(n=e.responseJSON)||void 0===n?void 0:n.filename[0])||(null==e?void 0:e.responseJSON)||t("Failed to attach to source"))})),x.detachSource.listen((function(e){p.a.detachSource(e).done(x.detachSource.completed).fail(x.detachSource.failed)})),x.detachSource.failed.listen((function(e){s.a.error((null==e?void 0:e.responseJSON)||t("Failed to detach from source"))})),x.patchSource.listen((function(e,t){p.a.patchSource(e,t).done(x.patchSource.completed).fail(x.patchSource.failed),x.patchSource.started()})),x.patchSource.failed.listen((function(e){s()((null==e?void 0:e.responseJSON)||t("Failed to patch source"))})),x.getAttachedSources.listen((function(e){p.a.getAttachedSources(e).done((function(e){var t=[];e.results.forEach((function(e){var n=Object(d.getAssetUIDFromUrl)(e.source);t.push({sourceName:Object(d.truncateString)(e.source__name,_.MAX_DISPLAYED_STRING_LENGTH.connect_projects),sourceUrl:e.source,sourceUid:n,linkedFields:e.fields,filename:Object(d.truncateFile)(e.filename,_.MAX_DISPLAYED_STRING_LENGTH.connect_projects),attachmentUrl:e.url})})),x.getAttachedSources.completed(t)})).fail(x.getAttachedSources.failed)})),x.getSharingEnabledAssets.listen((function(){p.a.getSharingEnabledAssets().done(x.getSharingEnabledAssets.completed).fail(x.getSharingEnabledAssets.failed)})),x.getSharingEnabledAssets.failed.listen((function(){s.a.error(t("Failed to retrieve sharing enabled assets"))})),x.toggleDataSharing.listen((function(e,t){p.a.patchDataSharing(e,t).done(x.toggleDataSharing.completed).fail(x.toggleDataSharing.failed)})),x.toggleDataSharing.failed.listen((function(e){var n;s.a.error((null==e||null===(n=e.responseJSON)||void 0===n?void 0:n.detail)||t("Failed to toggle sharing"))})),x.updateColumnFilters.listen((function(e,t){p.a.patchDataSharing(e,t).done(x.updateColumnFilters.completed).fail(x.updateColumnFilters.failed)})),x.updateColumnFilters.failed.listen((function(e){s.a.error((null==e?void 0:e.responseJSON)||t("Failed to update column filters"))}));var L=x,C=L;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(x,"dataShareActions","/srv/src/kpi/jsapp/js/actions/dataShareActions.es6"),__REACT_HOT_LOADER__.register(L,"default","/srv/src/kpi/jsapp/js/actions/dataShareActions.es6"));function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}a.a.use(c(window.Promise));var D={permissions:h,help:m,library:b,submissions:O,media:A,exports:j,dataShare:C};D.navigation=a.a.createActions(["transitionStart","transitionEnd","routeUpdate","documentTitleUpdate"]),D.auth=a.a.createActions({verifyLogin:{children:["loggedin","anonymous","failed"]},logout:{children:["completed","failed"]},changePassword:{children:["completed","failed"]},getEnvironment:{children:["completed","failed"]},getApiToken:{children:["completed","failed"]}}),D.survey=a.a.createActions({addExternalItemAtPosition:{children:["completed","failed"]}}),D.search=a.a.createActions({assets:{children:["completed","failed"]}}),D.resources=a.a.createActions({createImport:{children:["completed","failed"]},loadAsset:{children:["completed","failed"]},deployAsset:{children:["completed","failed"]},setDeploymentActive:{children:["completed","failed"]},createSnapshot:{children:["completed","failed"]},cloneAsset:{children:["completed","failed"]},deleteAsset:{children:["completed","failed"]},listTags:{children:["completed","failed"]},createResource:{asyncResult:!0},updateAsset:{asyncResult:!0},updateSubmissionValidationStatus:{children:["completed","failed"]},removeSubmissionValidationStatus:{children:["completed","failed"]},deleteSubmission:{children:["completed","failed"]},duplicateSubmission:{children:["completed","failed"]},refreshTableSubmissions:{children:["completed","failed"]},getAssetFiles:{children:["completed","failed"]}}),D.hooks=a.a.createActions({getAll:{children:["completed","failed"]},add:{children:["completed","failed"]},update:{children:["completed","failed"]},delete:{children:["completed","failed"]},getLogs:{children:["completed","failed"]},retryLog:{children:["completed","failed"]},retryLogs:{children:["completed","failed"]}}),D.misc=a.a.createActions({getUser:{children:["completed","failed"]},checkUsername:{asyncResult:!0,children:["completed","failed"]},updateProfile:{children:["completed","failed"]}}),h.assignAssetPermission.failed.listen((function(){Object(d.notify)(t("Failed to update permissions"),"error")})),h.removeAssetPermission.failed.listen((function(){Object(d.notify)(t("Failed to remove permissions"),"error")})),h.bulkSetAssetPermissions.failed.listen((function(){Object(d.notify)(t("Failed to update permissions"),"error")})),h.assignAssetPermission.completed.listen((function(e){D.resources.loadAsset({id:e})})),h.copyPermissionsFrom.completed.listen((function(e,t){D.resources.loadAsset({id:t})})),h.setAssetPublic.completed.listen((function(e){D.resources.loadAsset({id:e})})),h.removeAssetPermission.completed.listen((function(e,t){t||D.resources.loadAsset({id:e})})),D.misc.getUser.listen((function(e){p.a.getUser(e).done(D.misc.getUser.completed).fail(D.misc.getUser.failed)})),D.misc.checkUsername.listen((function(e){p.a.queryUserExistence(e).done(D.misc.checkUsername.completed).fail(D.misc.checkUsername.failed)})),D.misc.updateProfile.listen((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.a.patchProfile(e).done((function(){var e;(e=D.misc.updateProfile).completed.apply(e,arguments),t.onComplete&&t.onComplete.apply(t,arguments)})).fail((function(){var e;(e=D.misc.updateProfile).failed.apply(e,arguments),t.onFail&&t.onFail.apply(t,arguments)}))})),D.misc.updateProfile.completed.listen((function(){Object(d.notify)(t("updated profile successfully"))})),D.misc.updateProfile.failed.listen((function(e){for(var n=!1,i=0,r=Object.entries(e.responseJSON);i<r.length;i++){var s=q(r[i],2),o=s[0];s[1];"non_fields_error"!==o&&(n=!0)}n?Object(d.notify)(t("Some fields contain errors"),"error"):Object(d.notify)(t("failed to update profile"),"error")})),D.resources.createImport.listen((function(e,t,n){p.a.createImport(e).done((function(e){D.resources.createImport.completed(e),"function"==typeof t&&t(e)})).fail((function(e){D.resources.createImport.failed(e),"function"==typeof n&&n(e)}))})),D.resources.createSnapshot.listen((function(e){p.a.createAssetSnapshot(e).done(D.resources.createSnapshot.completed).fail(D.resources.createSnapshot.failed)})),D.resources.listTags.listen((function(e){p.a.listTags(e).done(D.resources.listTags.completed).fail(D.resources.listTags.failed)})),D.resources.listTags.completed.listen((function(e){e.next&&window.Raven&&Raven.captureMessage("MAX_TAGS_EXCEEDED: Too many tags")})),D.resources.updateAsset.listen((function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.a.patchAsset(e,n).done((function(r){D.resources.updateAsset.completed(r),"function"==typeof i.onComplete&&i.onComplete(r,e,n),Object(d.notify)(t("successfully updated"))})).fail((function(e){D.resources.updateAsset.failed(e),i.onFailed&&i.onFailed(e)}))})),D.resources.deployAsset.listen((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.a.deployAsset(e,t).done((function(e){D.resources.deployAsset.completed(e.asset),"function"==typeof n.onDone&&n.onDone(e,t)})).fail((function(e){D.resources.deployAsset.failed(e,t),"function"==typeof n.onFail&&n.onFail(e,t)}))})),D.resources.deployAsset.failed.listen((function(e,n){var i,r=null;e.responseJSON&&(e.responseJSON.xform_id_string||e.responseJSON.detail)?e.responseJSON.xform_id_string?r="\n      <p>".concat(t("your form id was not valid:"),"</p>\n      <p><pre>").concat(e.responseJSON.xform_id_string,"</pre></p>\n      <p>").concat(Object(d.replaceSupportEmail)(t("if this problem persists, contact help@kobotoolbox.org")),"</p>\n    "):e.responseJSON.detail&&(r="\n      <p>".concat(t("your form cannot be deployed because it contains errors:"),"</p>\n      <p><pre>").concat(e.responseJSON.detail,"</pre></p>\n    ")):(i=500==e.status&&e.responseJSON&&e.responseJSON.error?"<pre>".concat(e.responseJSON.error,"</pre>"):500==e.status&&e.responseText?"<pre>".concat(e.responseText,"</pre>"):t("please check your connection and try again."),r="\n      <p>".concat(Object(d.replaceSupportEmail)(t("if this problem persists, contact help@kobotoolbox.org")),"</p>\n      <p>").concat(i,"</p>\n    "));s.a.alert(t("unable to deploy"),r)})),D.resources.setDeploymentActive.listen((function(e){p.a.setDeploymentActive(e).done((function(e){D.resources.setDeploymentActive.completed(e.asset)})).fail(D.resources.setDeploymentActive.failed)})),D.resources.setDeploymentActive.completed.listen((function(e){e.deployment__active?Object(d.notify)(t("Project unarchived successfully")):Object(d.notify)(t("Project archived successfully"))})),D.resources.getAssetFiles.listen((function(e,t){p.a.getAssetFiles(e,t).done(D.resources.getAssetFiles.completed).fail(D.resources.getAssetFiles.failed)})),D.reports=a.a.createActions({setStyle:{children:["completed","failed"]},setCustom:{children:["completed","failed"]}}),D.reports.setStyle.listen((function(e,t){p.a.patchAsset(e,{report_styles:t}).done((function(e){D.reports.setStyle.completed(e),D.resources.updateAsset.completed(e)})).fail(D.reports.setStyle.failed)})),D.reports.setCustom.listen((function(e,t){p.a.patchAsset(e,{report_custom:t}).done((function(e){D.reports.setCustom.completed(e),D.resources.updateAsset.completed(e)})).fail(D.reports.setCustom.failed)})),D.table=a.a.createActions({updateSettings:{children:["completed","failed"]}}),D.table.updateSettings.listen((function(e,t){p.a.patchAsset(e,{settings:t}).done((function(e){D.table.updateSettings.completed(e),D.resources.updateAsset.completed(e)})).fail(D.table.updateSettings.failed)})),D.map=a.a.createActions({setMapStyles:{children:["started","completed","failed"]}}),D.map.setMapStyles.listen((function(e,t){p.a.patchAsset(e,{map_styles:t}).done((function(e){D.map.setMapStyles.completed(e),D.resources.updateAsset.completed(e)})).fail(D.map.setMapStyles.failed),D.map.setMapStyles.started(e,t)})),D.resources.createResource.listen((function(e){p.a.createResource(e).done((function(e){D.resources.createResource.completed(e)})).fail((function(){var e;(e=D.resources.createResource).failed.apply(e,arguments)}))})),D.resources.deleteAsset.listen((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.a.deleteAsset(e).done((function(){D.resources.deleteAsset.completed(e),"function"==typeof n.onComplete&&n.onComplete(e)})).fail((function(n){D.resources.deleteAsset.failed(e),s.a.alert(t("Unable to delete asset!"),"<p>".concat(t("Error details:"),"</p><pre style='max-height: 200px;'>").concat(n.responseText,"</pre>"))}))})),D.resources.cloneAsset.listen((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.a.cloneAsset(e).done((function(e){D.resources.cloneAsset.completed(e),"function"==typeof t.onComplete&&t.onComplete(e)})).fail(D.resources.cloneAsset.failed)})),D.resources.cloneAsset.failed.listen((function(){Object(d.notify)(t("Could not create project!"),"error")})),D.search.assets.listen((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.a.searchAssets(e).done((function(n){D.search.assets.completed(e,n),"function"==typeof t.onComplete&&t.onComplete(e,n)})).fail((function(n){D.search.assets.failed(e,n),"function"==typeof t.onFailed&&t.onFailed(e,n)}))})),D.auth.logout.completed.listen((function(){window.setTimeout((function(){window.location.replace("","")}),1)})),D.auth.logout.listen((function(){p.a.logout().done(D.auth.logout.completed).fail((function(){console.error("logout failed for some reason. what should happen now?")}))})),D.auth.verifyLogin.listen((function(){p.a.selfProfile().done((function(e){e.username?D.auth.verifyLogin.loggedin(e):D.auth.verifyLogin.anonymous(e)})).fail(D.auth.verifyLogin.failed)})),D.auth.changePassword.listen((function(e,t){p.a.patchProfile({current_password:e,new_password:t}).done(D.auth.changePassword.completed).fail(D.auth.changePassword.failed)})),D.auth.changePassword.completed.listen((function(){Object(d.notify)(t("changed password successfully"))})),D.auth.changePassword.failed.listen((function(){Object(d.notify)(t("failed to change password"),"error")})),D.auth.getEnvironment.listen((function(){p.a.environment().done((function(e){D.auth.getEnvironment.completed(e)})).fail(D.auth.getEnvironment.failed)})),D.auth.getEnvironment.failed.listen((function(){Object(d.notify)(t("failed to load environment data"),"error")})),D.auth.getApiToken.listen((function(){p.a.apiToken().done((function(e){D.auth.getApiToken.completed(e.token)})).fail(D.auth.getApiToken.failed)})),D.auth.getApiToken.failed.listen((function(){Object(d.notify)(t("failed to load API token"),"error")})),D.resources.loadAsset.listen((function(e){p.a.getAsset(e).done(D.resources.loadAsset.completed).fail(D.resources.loadAsset.failed)})),D.resources.updateSubmissionValidationStatus.listen((function(e,t,n){p.a.updateSubmissionValidationStatus(e,t,n).done((function(e){D.resources.updateSubmissionValidationStatus.completed(e,t)})).fail((function(e){console.error(e),D.resources.updateSubmissionValidationStatus.failed(e)}))})),D.resources.removeSubmissionValidationStatus.listen((function(e,t){p.a.removeSubmissionValidationStatus(e,t).done((function(e){D.resources.removeSubmissionValidationStatus.completed(e,t)})).fail((function(e){console.error(e),D.resources.removeSubmissionValidationStatus.failed(e)}))})),D.resources.deleteSubmission.listen((function(e,n){p.a.deleteSubmission(e,n).done((function(){Object(d.notify)(t("submission deleted")),D.resources.deleteSubmission.completed(),D.resources.loadAsset({id:e})})).fail((function(){s.a.error(t("failed to delete submission")),D.resources.deleteSubmission.failed()}))})),D.resources.duplicateSubmission.listen((function(e,n,i){p.a.duplicateSubmission(e,n).done((function(n){Object(d.notify)(t("Successfully duplicated submission")),D.resources.duplicateSubmission.completed(e,n._id,i),D.resources.loadAsset({id:e})})).fail((function(e){s.a.error(t("Failed to duplicate submission")),D.resources.duplicateSubmission.failed(e)}))})),D.hooks.getAll.listen((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.a.getHooks(e).done((function(){var e;(e=D.hooks.getAll).completed.apply(e,arguments),"function"==typeof t.onComplete&&t.onComplete.apply(t,arguments)})).fail((function(){var e;(e=D.hooks.getAll).failed.apply(e,arguments),"function"==typeof t.onFail&&t.onFail.apply(t,arguments)}))})),D.hooks.add.listen((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.a.addExternalService(e,t).done((function(){var t;D.hooks.getAll(e),(t=D.hooks.add).completed.apply(t,arguments),"function"==typeof n.onComplete&&n.onComplete.apply(n,arguments)})).fail((function(){var e;(e=D.hooks.add).failed.apply(e,arguments),"function"==typeof n.onFail&&n.onFail.apply(n,arguments)}))})),D.hooks.add.completed.listen((function(e){Object(d.notify)(t("REST Service added successfully"))})),D.hooks.add.failed.listen((function(e){Object(d.notify)(t("Failed adding REST Service"),"error")})),D.hooks.update.listen((function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p.a.updateExternalService(e,t,n).done((function(){var t;D.hooks.getAll(e),(t=D.hooks.update).completed.apply(t,arguments),"function"==typeof i.onComplete&&i.onComplete.apply(i,arguments)})).fail((function(){var e;(e=D.hooks.update).failed.apply(e,arguments),"function"==typeof i.onFail&&i.onFail.apply(i,arguments)}))})),D.hooks.update.completed.listen((function(){Object(d.notify)(t("REST Service updated successfully"))})),D.hooks.update.failed.listen((function(){s.a.error(t("Failed saving REST Service"))})),D.hooks.delete.listen((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.a.deleteExternalService(e,t).done((function(){var t;D.hooks.getAll(e),(t=D.hooks.delete).completed.apply(t,arguments),"function"==typeof n.onComplete&&n.onComplete.apply(n,arguments)})).fail((function(){var e;(e=D.hooks.delete).failed.apply(e,arguments),"function"==typeof n.onFail&&n.onFail.apply(n,arguments)}))})),D.hooks.delete.completed.listen((function(e){Object(d.notify)(t("REST Service deleted permanently"))})),D.hooks.delete.failed.listen((function(e){Object(d.notify)(t("Could not delete REST Service"),"error")})),D.hooks.getLogs.listen((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.a.getHookLogs(e,t).done((function(){var e;(e=D.hooks.getLogs).completed.apply(e,arguments),"function"==typeof n.onComplete&&n.onComplete.apply(n,arguments)})).fail((function(){var e;(e=D.hooks.getLogs).failed.apply(e,arguments),"function"==typeof n.onFail&&n.onFail.apply(n,arguments)}))})),D.hooks.retryLog.listen((function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p.a.retryExternalServiceLog(e,t,n).done((function(){var n;D.hooks.getLogs(e,t),(n=D.hooks.retryLog).completed.apply(n,arguments),"function"==typeof i.onComplete&&i.onComplete.apply(i,arguments)})).fail((function(){var e;(e=D.hooks.retryLog).failed.apply(e,arguments),"function"==typeof i.onFail&&i.onFail.apply(i,arguments)}))})),D.hooks.retryLog.completed.listen((function(e){Object(d.notify)(t("Submission retry requested successfully"))})),D.hooks.retryLog.failed.listen((function(e){Object(d.notify)(t("Submission retry request failed"),"error")})),D.hooks.retryLogs.listen((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.a.retryExternalServiceLogs(e,t).done((function(){var e;(e=D.hooks.retryLogs).completed.apply(e,arguments),"function"==typeof n.onComplete&&n.onComplete.apply(n,arguments)})).fail((function(){var i;D.hooks.getLogs(e,t),(i=D.hooks.retryLogs).failed.apply(i,arguments),"function"==typeof n.onFail&&n.onFail.apply(n,arguments)}))})),D.hooks.retryLogs.completed.listen((function(e){Object(d.notify)(e.detail,"warning")})),D.hooks.retryLogs.failed.listen((function(e){Object(d.notify)(t("Retrying all submissions failed"),"error")}));"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(D,"actions","/srv/src/kpi/jsapp/js/actions.es6")},306:function(e,t,n){var i,r,s,o,a,u,l;u=n(20),o=n(114),a=n(40),r=n(138),s=n(93),i=n(59),e.exports=(l={},u.extend(l,o,r),l._keys=u.keys(l),l.rowDetailsSkipLogic=s,l.utils=a,l.configs=i,l)},323:function(e,t,n){var i,r,s,o,a,u,l=[].slice;r=n(20),i=function(){function e(e){this.name=e,this.equivs=[],this.invals=[]}return e.prototype._append=function(e,t){var n,i,r;if(e instanceof Array)for(i=0,r=e.length;i<r;i++)n=e[i],this._append(n,t);else this[t].push(e);return this},e.prototype.equiv=function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],this._append(e,"equivs")},e.prototype.inval=function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],this._append(e,"invals")},e.prototype.main=function(e){return e?(this._main=e,this):this._main},e}(),(s={}).cascading={choices:function(){var e,t,n,i;for(i=[],e=0,t=(n=[["state","texas","Texas",null,null],["state","washington","Washington",null,null],["county","king","King","washington",null],["county","pierce","Pierce","washington",null],["county","king","King","texas",null],["county","cameron","Cameron","texas",null],["city","dumont","Dumont",null,"king"],["city","finney","Finney",null,"king"],["city","brownsville","brownsville",null,"cameron"],["city","harlingen","harlingen",null,"cameron"],["city","seattle","Seattle",null,"king"],["city","redmond","Redmond",null,"king"],["city","tacoma","Tacoma",null,"pierce"],["city","puyallup","Puyallup",null,"pierce"]]).length;e<t;e++)o=n[e],i.push(r.object(["list_name","name","label","state","county"],o));return i}()},s.pizza_survey=(a={survey:[{type:{select_one:"yes_no"},name:"likes_pizza",label:"Do you like pizza?"}],choices:{yes_no:[{name:"yes",label:"Yes"},{name:"no",label:"No"}]}},u={survey:[{type:"select_one yes_no",name:"likes_pizza",label:"Do you like pizza?"}],choices:{yes_no:[{name:"yes",label:"Yes"},{name:"no",label:"No"}]}},new i("pizza_survey").equiv(a,u,"survey,,,\n,type,name,label\n,select_one yes_no,likes_pizza,Do you like pizza?\nchoices,,,\n,list name,name,label\n,yes_no,yes,Yes\n,yes_no,no,No").main(a)),s.groups=function(){var e,t;return"survey,,,\n,type,name,label\n,text,q1,Question1\n,begin group,grp,\n,text,g1q1,Group1Question1\n,text,g1q2,Group1Question2\n,end group,,",e={survey:[{type:"text",name:"q1",label:"Question1"},{type:"begin group",name:"grp"},{type:"text",name:"g1q1",label:"Group1Question1"},{type:"text",name:"g1q2",label:"Group1Question2"},{type:"end group"}]},t={survey:[{type:"text",name:"q1",label:"Question1"},{type:"group",name:"grp",rows:[{type:"text",name:"g1q1",label:"Group1Question1"},{type:"text",name:"g1q2",label:"Group1Question2"}]},{type:"end group"}]},new i("groups").equiv("survey,,,\n,type,name,label\n,text,q1,Question1\n,begin group,grp,\n,text,g1q1,Group1Question1\n,text,g1q2,Group1Question2\n,end group,,",e,t).main(e)}(),e.exports=s},342:function(e,t,n){"use strict";var i,r;e.exports=(i={create:function(e){return new r(e)},__validators:{invalidChars:function(e,t){return!new RegExp("["+t+"]").test(e)},unique:function(e,t){return 0===_.filter(t,(function(t){return t===e})).length}}},(r=function(e){this.options=e}).prototype.validate=function(e){for(var t=this.options.validations.length,n=this.options.validations,r=0;r<t;r++){var s=n[r];if(s.args||(s.args=[]),s.args.unshift(e),!i.__validators[s.name].apply(this,s.args))return s.failureMessage}return!0},i)},343:function(e,t,n){var i,r,s,o,a,u,l;o=n(65),r=n(93),u=n(115),s=n(40),a=n(344),i=n(345),l=n(346),e.exports={relevant:{getValue:function(){var e;return"undefined"===(e=this.serialize())&&("undefined"!=typeof Raven&&null!==Raven&&Raven.captureException("Serialized value is returning a string, undefined"),e=""),e},postInitialize:function(){var e,t,n,i;return n=this.getSurvey(),t=new r.SkipLogicFactory(n),i=new u.SkipLogicViewFactory(n),e=new o.SkipLogicHelperFactory(t,i,n,this._parent,this.get("value")),this.facade=new o.SkipLogicPresentationFacade(t,e,i)},serialize:function(){return this.facade.serialize()},parse:function(){},linkUp:function(e){return this.facade.initialize()}},constraint:{getValue:function(){var e;return"undefined"===(e=this.serialize())&&("undefined"!=typeof Raven&&null!==Raven&&Raven.captureException("Serialized value is returning a string, undefined"),e=""),e},postInitialize:function(){var e,t,n,r;return n=this.getSurvey(),t=new i.ValidationLogicModelFactory(n),r=new l.ValidationLogicViewFactory(n),e=new a.ValidationLogicHelperFactory(t,r,n,this._parent,this.get("value")),this.facade=new o.SkipLogicPresentationFacade(t,e,r)},serialize:function(){return this.facade.serialize()},parse:function(){},linkUp:function(e){return this.facade.initialize()}},label:{postInitialize:function(){}},name:{deduplicate:function(e){var t,n;return t=[],e.forEachRow((n=this,function(e){var i;if(e.get("name")!==n)return i=e.getValue("name"),t.push(i)}),{includeGroups:!0}),s.sluggifyLabel(this.get("value"),t)}}}},344:function(e,n,i){(function(n){var r,s,o,a=function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},u={}.hasOwnProperty;s=i(155),r=i(65),e.exports=((o={}).ValidationLogicHelperFactory=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.create_presenter=function(e,t){return new o.ValidationLogicPresenter(e,t,this.current_question,this.survey,this.view_factory)},t.prototype.create_builder=function(){return new o.ValidationLogicBuilder(this.model_factory,this.view_factory,this.survey,this.current_question,this)},t.prototype.create_context=function(){return new o.ValidationLogicHelperContext(this.model_factory,this.view_factory,this,this.serialized_criteria)},t}(r.SkipLogicHelperFactory),o.ValidationLogicPresenter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.change_question=function(){},t}(r.SkipLogicPresenter),o.ValidationLogicBuilder=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype._parse_skip_logic_criteria=function(e){return s(e)},t.prototype._get_question=function(){return this.current_question},t.prototype.build_empty_criterion=function(){var e,t,n;return e=this.view_factory.create_operator_picker(this.current_question.get_type()),n=this.view_factory.create_response_value_view(this.current_question,this.current_question.get_type(),this._operator_type()),(t=this.build_criterion_logic(this.model_factory.create_operator("empty"),e,n)).model.change_question(this.current_question.cid),t},t.prototype.questions=function(){return[this.current_question]},t.prototype._operator_type=function(){var e,n;return null==(e=t.__super__._operator_type.call(this))&&(n=this.current_question.get_type().operators[0],e=r.operator_types[1===n?this.current_question.get_type().operators[1]:n]),e},t}(r.SkipLogicBuilder),o.ValidationLogicHelperContext=function(e){function t(e,n,i,r){this.model_factory=e,this.view_factory=n,this.helper_factory=i,this.state={serialize:function(){return r}},this.questionTypeHasNoValidationOperators()?this.use_hand_code_helper():t.__super__.constructor.call(this,e,n,i,r)}return a(t,e),t.prototype.use_mode_selector_helper=function(){return this.state=new o.ValidationLogicModeSelectorHelper(this.view_factory,this),this.render(this.destination)},t.prototype.use_hand_code_helper=function(){this.state=new o.ValidationLogicHandCodeHelper(this.state.serialize(),this.builder,this.view_factory,this),this.questionTypeHasNoValidationOperators()&&(this.state.button=this.view_factory.create_empty()),this.render(this.destination)},t.prototype.questionTypeHasNoValidationOperators=function(){var e,t,n;return(n=this.helper_factory.current_question.get("type").get("typeId"))?((e=null!=(t=r.question_types[n])?t.operators:void 0)||(e=r.question_types.default.operators),e.length===e[0]):console.error("no type id found for question",this.helper_factory.current_question)},t}(r.SkipLogicHelperContext),o.ValidationLogicModeSelectorHelper=function(e){function n(e,i){this.context=i,n.__super__.constructor.call(this,e,i),this.handcode_button=e.create_button("<i>${}</i> "+t("Manually enter your validation logic in XLSForm code"),"kobo-button kobo-button--blue")}return a(n,e),n}(r.SkipLogicModeSelectorHelper),o.ValidationLogicHandCodeHelper=function(e){function i(e,r,s,o){i.__super__.constructor.call(this,e,r,s,o),this.$handCode=n('<div class="card__settings__fields__field">\n  <label for="'+this.context.helper_factory.current_question.cid+'-handcode">'+t("Validation Code:")+'</label>\n  <span class="settings__input">\n    <input type="text" name="constraint" id="'+this.context.helper_factory.current_question.cid+'-handcode" class="text" value="">\n  </span>\n</div>'),this.textarea=this.$handCode.find("#"+this.context.helper_factory.current_question.cid+"-handcode"),this.textarea.val(this.criteria)}return a(i,e),i.prototype.render=function(e){var t;return e.replaceWith(this.$handCode),this.button.render().attach_to(this.$handCode),this.button.bind_event("click",(t=this,function(){return t.$handCode.replaceWith(e),t.context.use_mode_selector_helper()})),this.$handCode.on("change",function(e){return function(){return e.context.view_factory.survey.trigger("change")}}(this))},i.prototype.serialize=function(){return this.textarea.val()},i}(r.SkipLogicHandCodeHelper),o)}).call(this,i(29))},345:function(e,t,n){var i,r,s=function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},o={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n(47),i=n(93),e.exports=((r={}).ValidationLogicModelFactory=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.create_operator=function(e,t,n){var s;switch(s=null,e){case"text":s=new r.ValidationLogicTextOperator(t);break;case"date":s=new r.ValidationLogicDateOperator(t);break;case"basic":s=new r.ValidationLogicBasicOperator(t);break;case"existence":s=new r.ValidationLogicExistenceOperator(t);break;case"select_multiple":s=new r.ValidationLogicSelectMultipleOperator(t);break;case"empty":return new i.EmptyOperator}return s.set("id",n),s},t.prototype.create_criterion_model=function(){return new r.ValidationLogicCriterion(this,this.survey)},t}(i.SkipLogicFactory),r.ValidationLogicBasicOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.serialize=function(e,t){return". "+this.get("symbol")+" "+t},t}(i.SkipLogicOperator),r.ValidationLogicTextOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.serialize=function(e,n){return t.__super__.serialize.call(this,""," '"+n.replace(/'/g,"\\'")+"'")},t}(r.ValidationLogicBasicOperator),r.ValidationLogicDateOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.serialize=function(e,n){return-1===n.indexOf("date")&&(n="date('"+n+"')"),t.__super__.serialize.call(this,""," "+n)},t}(r.ValidationLogicBasicOperator),r.ValidationLogicExistenceOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.serialize=function(){return t.__super__.serialize.call(this,"","''")},t}(r.ValidationLogicBasicOperator),r.ValidationLogicSelectMultipleOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.serialize=function(e,t){var n;return n="selected(., '"+t+"')",this.get("is_negated")?"not("+n+")":n},t}(i.SelectMultipleSkipLogicOperator),r.ValidationLogicCriterion=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.change_question=function(e){var t,n,i,r;if(t=this._get_question()?this._get_question().get_type():{name:null},this.set("question_cid",e),n=this._get_question().get_type(),null==this.get("operator").get_id()||(i=this.get("operator").get_id(),a.call(n.operators,i)>=0)?t.name!==n.name&&this.change_operator(this.get("operator").get_value()):this.change_operator(1!==n.operators[0]?n.operators[0]:n.operators[1]),null===this.get("operator").get_type().response_type&&this._get_question().response_type!==(null!=(r=this.get("response_value"))?r.get_type():void 0))return this.change_response(this.get("response_value").get("value"))},t}(i.SkipLogicCriterion),r)},346:function(e,t,n){var i,r,s,o,a,u=function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},l={}.hasOwnProperty,c=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=n(20),r=n(115),s=n(156),i=n(65),e.exports=((a={}).ValidationLogicViewFactory=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.create_criterion_builder_view=function(){return new a.ValidationLogicCriterionBuilder},t.prototype.create_question_picker=function(){return new a.ValidationLogicQuestionPicker},t.prototype.create_operator_picker=function(e){var t;return t=o.filter(i.operator_types,(function(t){var n;return 1!==t.id&&(n=t.id,c.call(e.operators,n)>=0)})),new r.OperatorPicker(t)},t}(r.SkipLogicViewFactory),a.ValidationLogicCriterionBuilder=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=function(){return t.__super__.render.call(this),this.$el.html(this.$el.html().replace("only be displayed","be valid only")),this},t}(r.SkipLogicCriterionBuilderView),a.ValidationLogicQuestionPicker=function(e){function t(){t.__super__.constructor.call(this,"This question's response has to be")}return u(t,e),t.prototype.attach_to=function(e){return e.find(".skiplogic__rowselect").remove(),t.__super__.attach_to.call(this,e)},t}(s.Label),a)},347:function(e,t,n){var i,r,s,o,a,u,l,c,p,d,_,f,h,m,g,v,y=function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},b={}.hasOwnProperty,k=[].slice,E=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};l=n(20),u=n(47),i=n(69),s=n(138),n(78),a=n(40),r=n(59),n(116),o=n(65),e.exports=(n(4).t,v={},d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype._isSelectQuestion=function(){return!1},t}(u.Model),_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.model=d,t}(u.Collection),p=function(){function e(e){var t,n,i,r,s,o,a,u;if(this._kobomatrix_columns=new _,this._rowAttributeName="_kobomatrix_columns",r=function(t,n){return l.isFunction(t)?e[n]=function(){var n;return n=1<=arguments.length?k.call(arguments,0):[],t.apply(e,n)}:e[n]=t},l.each(this,r),r(this.forEachRow,"forEachRow"),t=e.getValue("$kuid",!1),n={type:"end_"+this._beginEndKey(),$kuid:"/"+t},e._afterIterator=function(e,t){var i;if(i={export_relevant_values:function(e,t){return e.push(l.extend({},n))},toJSON:function(){return l.extend({},n)}},t.includeGroupEnds)return e(i)},i=e.toJSON,e.clone=function(){return console.error("clone kobomatrix rows")},e.toJSON=function(){return l.extend(i.call(e),{type:"begin_"+e._beginEndKey()},"function"==typeof this._additionalJson?this._additionalJson():void 0)},l.each(this.constructor.prototype,r),e.attributes.__rows){for(s=0,o=(a=e.attributes.__rows).length;s<o;s++)u=a[s],this[this._rowAttributeName].add(u);delete e.attributes.__rows}}return e.prototype._kobomatrix_cols=function(){return this.rows},e.prototype._isSelectQuestion=function(){return!1},e.prototype.get_type=function(){return o.question_types.default},e.prototype._beginEndKey=function(){return"kobomatrix"},e.prototype.linkUp=function(e){var t,n,i,r;return this.getList=(r=this,function(){return r.items}),t={},(n=null!=(i=this.get("kobo--matrix_list"))?i.get("value"):void 0)?t[n]=this.getSurvey().choices.get(n):(n=this.set("kobo--matrix_list","matrix_"+a.txtid()),t[n]=this.getSurvey().choices.create()),this.rows.each(function(e){return function(n){var i,r;if(i=null!=(r=n.get("select_from_list_name"))?r.get("value"):void 0)return t[i]=e.getSurvey().choices.get(i)}}(this)),this.items=t,this.items},e}(),g=function(e,t){return e["__"+t]=e[t],e[t]=function(){var n;return n=1<=arguments.length?k.call(arguments,0):[],e._meta[t].apply(e._meta,n)}},m=function(e,t){"_beforeIterator"in this&&this._beforeIterator(e,t),"includeErrors"in t||(t.includeErrors=!1),this.rows.each((function(n,i,r){if("function"==typeof n.forEachRow){if(t.includeGroups&&e(n),!t.flat)return n.forEachRow(e,t)}else{if(!n.isError())return e(n);if(t.includeErrors)return e(n)}})),"_afterIterator"in this&&this._afterIterator(e,t)},v.SurveyFragment=function(e){function t(e,n){this.rows=new f([],{_parent:this}),this._meta=new u.Model,g(this,"set"),g(this,"get"),g(this,"on"),g(this,"off"),g(this,"trigger"),t.__super__.constructor.call(this,e,n)}return y(t,e),t.prototype._validate=function(){var e;return this.clearErrors(),e=!0,this.settings.get("form_id")||(this.addError("form id must not be empty"),e=!1),this.settings.get("form_title")||(this.addError("form title must not be empty"),e=!1),e},t.prototype.clearErrors=function(){return this.errors=[]},t.prototype.addError=function(e){return this.errors.push(e)},t.prototype.linkUp=function(e){return this.invoke("linkUp",e)},t.prototype.forEachRow=function(e,t){return null==t&&(t={}),m.apply(this,[e,t])},t.prototype.getRowDescriptors=function(){var e;return e=[],this.forEachRow((function(t){var n;return n={label:t.getValue("label"),name:t.getValue("name")},e.push(n)})),e},t.prototype.findRowByCid=function(e,t){var n,i;return null==t&&(t={}),i=!1,n=function(t){return t.cid===e&&(i=t),!i},this.forEachRow(n,t),i},t.prototype.findRowByName=function(e,t){var n;return n=!1,this.forEachRow((function(t){return(t.getValue("name")||a.sluggifyLabel(t.getValue("label")))===e&&(n=t),!n}),t),n},t.prototype.addRowAtIndex=function(e,t){return this.addRow(e,{at:t})},t.prototype.addRow=function(e,t){var n,i,r;return null==t&&(t={}),(n=t.after)?(delete t.after,t._parent=n._parent,r=1+t._parent.models.indexOf(n),t.at=r):(i=t.before)?(delete t.before,t._parent=i._parent,r=t._parent.models.indexOf(i),t.at=r):t._parent=this.rows,t._parent.add(e,t)},t.prototype.detach=function(){this._parent.remove(this)},t.prototype.remove=function(e){return e.detach()},t.prototype._addGroup=function(e){var t,n,i,s,o,a,u,l,c,p,d,_,f;e._parent=this.rows,"type"in e||(e.type="group"),"__rows"in e||(e.__rows=[]),e.__rows=[].concat.apply([],e.__rows),_=[],this.forEachRow((function(e){return _.push(e.cid)}),{includeGroups:!0,includeErrors:!0}),l=!1;for(s=0,a=(c=e.__rows).length;s<a;s++)d=c[s],f=_.indexOf(d.cid),(!1===l||f<l)&&(l=f,n=d);for(t={previous:n.precedingRow(),parent:n.parentRow()},o=0,u=(p=e.__rows).length;o<u;o++)(d=p[o]).detach({silent:!0});return null==e.label&&(e.label=r.newGroupDetails.label.value),i=new v.Group(e),this.getSurvey()._insertRowInPlace(i,t),(t.parent||this.getSurvey().rows).trigger("add",i)},t.prototype._allRows=function(){var e;return e=[],this.forEachRow((function(t){if("Row"===t.constructor.kls)return e.push(t)}),{}),e},t.prototype.finalize=function(){return this.forEachRow((function(e){return e.finalize()}),{includeGroups:!0}),this},t}(i.BaseCollection),v.Group=function(e){function t(e,n){var i,r,s,o;for(null==e&&(e={}),i=e.__rows||[],void 0===e.label&&(e.label=""),this._parent=e._parent,delete e.__rows,this.rows=new f([],{_parent:this}),t.__super__.constructor.call(this,e,n),i&&this.rows.add(i),r=0,s=i.length;r<s;r++)(o=i[r])._parent=o.collection=this.rows}return y(t,e),t.kls="Group",t.key="group",t.prototype._isSelectQuestion=function(){return!1},t.prototype.get_type=function(){return o.question_types.default},t.prototype.initialize=function(){var e,t,n,i;for(t in e=r.newGroupDetails)n=e[t],this.has(t)||("function"==typeof n.value?this.set(t,n.value(this)):this.set(t,n));if(this.ensureKuid(),i="repeat"===this.get("type"),this.set("_isRepeat",i),this.convertAttributesToRowDetails(),"kobomatrix"===this.getValue("type"))return new p(this)},t.prototype.addRowAtIndex=function(e,t){return e._parent=this.rows,this.rows.add(e,{at:t})},t.prototype._isRepeat=function(){var e;return!!(null!=(e=this.get("_isRepeat"))?e.get("value"):void 0)},t.prototype.autoname=function(){var e,t,n;if(void 0===(e=this.getValue("name"))||""===e)return n={lowerCase:!1,stripSpaces:!0,lrstrip:!0,incrementorPadding:3,validXmlTag:!0},t=a.sluggify(this.getValue("label"),n),this.setDetail("name",t)},t.prototype.finalize=function(){return this.autoname()},t.prototype.detach=function(e){return this._parent.remove(this,e)},t.prototype.splitApart=function(){var e,t,n,i,r,s;for(s=this._parent.models.indexOf(this),this.detach(),n=e=0,t=(i=this.rows.models).length;e<t;n=++e)(r=i[n])._parent=this._parent,this._parent._parent.addRowAtIndex(r,s+n)},t.prototype._beforeIterator=function(e,t){if(t.includeGroupEnds)return e(this.groupStart())},t.prototype._afterIterator=function(e,t){if(t.includeGroupEnds)return e(this.groupEnd())},t.prototype.forEachRow=function(e,t){return null==t&&(t={}),m.apply(this,[e,t])},t.prototype._groupOrRepeatKey=function(){return this._isRepeat()?"repeat":"group"},t.prototype.groupStart=function(){var e;return e=this,{export_relevant_values:function(e,t){return e.push(this.toJSON())},toJSON:function(){var t,n,i,r;for(t in n={},i=e.attributes)r=i[t],"_isRepeat"!==t&&(n[t]=r.getValue());return n.type="begin_"+e._groupOrRepeatKey(),n}}},t.prototype.groupEnd=function(){var e,t;return t=this.getValue("$kuid"),e={type:"end_"+this._groupOrRepeatKey(),$kuid:"/"+t},{export_relevant_values:function(t,n){return t.push(l.extend({},e))},toJSON:function(){return l.extend({},e)}}},t}(s.BaseRow),c=["begin_group","end_group","begin_repeat","end_repeat"],h=function(e){var t,n;if(t=function(){var e,t,n,i;for(e in n=[],t=r.defaultSurveyDetails)i=t[e],n.push(i.name);return n}(),n=null!=e?e.type:void 0,E.call(c,n)>=0)throw new Error("Invalid type at this stage: "+n);if(E.call(t,n)>=0)throw new Error(n+" is not properly handled as a SurveyDetail");return"score"===n?s.Row:"group"===n||"repeat"===n||"kobomatrix"===n?v.Group:s.Row},f=function(e){function t(){var e,n;e=1<=arguments.length?k.call(arguments,0):[],t.__super__.constructor.apply(this,e),this.on("add",(n=this,function(e,t,i){return n._parent.getSurvey().trigger("rows-add",e,t,i)})),this.on("remove",function(e){return function(t,n,i){return e._parent.getSurvey().trigger("rows-remove",t,n,i)}}(this))}return y(t,e),t.prototype.model=function(e,t){var n,i;n=h(e);try{return new n(e,l.extend({},t,{_parent:t.collection}))}catch(n){return i=n,new s.RowError(e,l.extend({},t,{error:i,_parent:t.collection}))}},t.prototype.comparator=function(e){return e.ordinal},t}(i.BaseCollection),v)},348:function(e,t,n){var i;i=n(69),e.exports={RowDetail:i.RowDetail}},349:function(e,t,n){var i,r;i=n(107),e.exports=((r={}).mdSurveyStructureToObject=function(e){var t,n,i,r,s,o,a,u,l,c,p,d,_,f;for(i=function(e){return String(e).replace(/^\s+|\s+$/g,"")},f=!1,s=!1,_={},t=function(){var e,t,n,i,r,o,a,u,l,c,p;for(t=s[0],p=[],n=0,r=(u=s.slice(1)).length;n<r;n++){for(c={},a=i=0,o=(l=u[n]).length;i<o;a=++i)e=l[a],t[a]&&(c[t[a]]=e);p.push(c)}return _[f]=p,s=[]},a=0,l=(d=e.split("\n")).length;a<l;a++){for(n=[],o=u=0,c=(p=i(d[a]).split("|")).length;u<c;o=++u)r=p[o],o>0&&n.push(i(r));n[0]?(s&&t(),f=n[0],s=[]):s&&s.push(n.slice(1,n.length-1))}return t(),_},r.csvJsonToMarkdown=function(e){var t,n,r,s,o,a,u,l,c,p,d,_,f,h,m,g,v,y,b,k,E,O,w,S;for(S in n=[],s=function(e,t){n[t]||(n[t]=0),e>n[t]&&(n[t]=e)},r=function(e,t){var n;return e||(e=""),(n=t-e.length)>0&&(e+=new Array(n+1).join(" ")),e},t=function(e,t){var i,s,o,a,u,l;for(null==t&&(t=0),i=s=0,u=t;0<=u?s<u:s>u;i=0<=u?++s:--s)e.unshift("");for(e.length=n.length,i=o=0,a=e.length;o<a;i=++o)l=e[i],e[i]=r(l,n[i]);g+="| "+e.join(" | ")+" |\n"},w=i.sheeted(),g="\n",e){for(a=e[S],s(S.length,0),o=w.sheet(S,i(a)),u=l=0,d=(v=a.columns).length;l<d;u=++l)s(v[u].length,u+1);for(c=0,_=(y=o.rowArray).length;c<_;c++)for(u=p=0,f=(E=y[c]).length;p<f;u=++p)s(E[u].length,u+1)}for(S in b=w._sheets)for(O=b[S],t([S]),t(O.columns,1),m=0,h=(k=O.rowArray).length;m<h;m++)t(E=k[m],1);return g},r)},37:function(e,t,n){"use strict";n.r(t),n.d(t,"getFormBuilderAssetType",(function(){return l})),n.d(t,"surveyToValidJson",(function(){return c})),n.d(t,"unnullifyTranslations",(function(){return p})),n.d(t,"nullifyTranslations",(function(){return d})),n.d(t,"koboMatrixParser",(function(){return _})),n.d(t,"readParameters",(function(){return f})),n.d(t,"writeParameters",(function(){return h}));var i=n(52),r=n.n(i),s=n(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){return e&&s.ASSET_TYPES[e]?s.ASSET_TYPES[e]:t&&s.ASSET_TYPES[t]?s.ASSET_TYPES[t]:null}function c(e){return e.toFlatJSON(),JSON.stringify(e.toFlatJSON())}function p(e,t){var n=JSON.parse(e),i=[];t.translated&&(i=t.translated);var r=t.translations_0;return r||(r=null),n.settings[0].default_language||null===r||(n.settings[0].default_language=r),null!==r&&(n.choices&&n.choices.forEach((function(e){i.forEach((function(t){void 0!==e[t]&&(e["".concat(t,"::").concat(r)]=e[t],delete e[t])}))})),n.survey&&n.survey.forEach((function(e){i.forEach((function(t){void 0!==e[t]&&(void 0===n.settings[0]||"string"!=typeof n.settings[0].style||!n.settings[0].style.includes("theme-grid")||"begin_group"!==e.type||null!==e[t]&&""!==e[t]||delete e[t],e["".concat(t,"::").concat(r)]=e[t],delete e[t])}))}))),JSON.stringify(n)}function d(e,t,n,i){var s={survey:r()(n),translations:r()(e)};if(void 0===e)return s.translations=[null],s;if(s.translations.length>1&&-1!==s.translations.indexOf(null))throw new Error('There is an unnamed translation in your form definition.\nPlease give a name to all translations in your form.\nUse "Manage Translations" option from form landing page.');if(i){var o=i._initialParams.translations_0||null;if(s.translations[0]===o);else if(s.translations.includes(o)){var a=s.translations.indexOf(o);s.translations.unshift(s.translations.pop(a)),s.survey.forEach((function(e){t.forEach((function(t){var n=e[t];n&&n.unshift(n.pop(a))}))}))}s.translations.includes(o)||(s.translations.unshift(o),s.survey.forEach((function(e){t.forEach((function(t){if(e[t]){var n=null;e.name?n=e.name:e.$autoname&&(n=e.$autoname),e[t].unshift(n)}}))})))}return null!==s.translations[0]&&(s.translations_0=s.translations[0],s.translations[0]=null),s}function _(e){var t={};if(e.content&&(t=JSON.parse(e.content)),e.source&&(t=JSON.parse(e.source)),!t.survey)return e;for(var n=!1,i=t.survey.length,r=0;r<i;r++)"kobomatrix"===t.survey[r].type&&(t.survey[r].type="begin_kobomatrix",t.survey[r].appearance="field-list",i++,t.survey.splice(r+1,0,{type:"end_kobomatrix",$kuid:"/".concat(t.survey[r].$kuid)}));for(r=0;r<i;r++)if("begin_kobomatrix"===t.survey[r].type){n=!0;var s=localStorage.getItem("koboMatrix.".concat(t.survey[r].$kuid));if(null!=s){var o,u=a((s=JSON.parse(s)).cols);try{for(u.s();!(o=u.n()).done;){var l=o.value;r++,i++,t.survey.splice(r,0,s[l])}}catch(e){u.e(e)}finally{u.f()}for(var c=0,p=Object.keys(s.choices);c<p.length;c++){var d=p[c];t.choices.push(s.choices[d])}}}return n&&(e.content&&(e.content=JSON.stringify(t)),e.source&&(e.source=JSON.stringify(t))),e}function f(e){if("string"!=typeof e)return null;var t={},n=" ";e.includes(";")?n=";":e.includes(",")&&(n=",");var i=";, ".replace(n,"");return e.replace(new RegExp(" *= *","g"),"=").split(new RegExp("[".concat(i,"]*").concat(n,"[").concat(i,"]*"),"g")).forEach((function(e){if(e.includes("=")){var n=e.slice(0,e.indexOf("=")),i=e.slice(n.length+1);t[n]=i}})),Object.keys(t).length<1?null:t}function h(e){var t=[];return Object.keys(e).forEach((function(n){if(void 0!==e[n]&&null!==e[n]){var i=e[n];"object"===o(i)&&(i=JSON.stringify(i)),t.push("".concat(n,"=").concat(i))}})),t.join(";")}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(l,"getFormBuilderAssetType","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"),__REACT_HOT_LOADER__.register(c,"surveyToValidJson","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"),__REACT_HOT_LOADER__.register(p,"unnullifyTranslations","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"),__REACT_HOT_LOADER__.register(d,"nullifyTranslations","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"),__REACT_HOT_LOADER__.register(_,"koboMatrixParser","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"),__REACT_HOT_LOADER__.register(f,"readParameters","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"),__REACT_HOT_LOADER__.register(h,"writeParameters","/srv/src/kpi/jsapp/js/components/formBuilder/formBuilderUtils.es6"))},393:function(e,t,n){var i={"./af":172,"./af.js":172,"./ar":173,"./ar-dz":174,"./ar-dz.js":174,"./ar-kw":175,"./ar-kw.js":175,"./ar-ly":176,"./ar-ly.js":176,"./ar-ma":177,"./ar-ma.js":177,"./ar-sa":178,"./ar-sa.js":178,"./ar-tn":179,"./ar-tn.js":179,"./ar.js":173,"./az":180,"./az.js":180,"./be":181,"./be.js":181,"./bg":182,"./bg.js":182,"./bm":183,"./bm.js":183,"./bn":184,"./bn.js":184,"./bo":185,"./bo.js":185,"./br":186,"./br.js":186,"./bs":187,"./bs.js":187,"./ca":188,"./ca.js":188,"./cs":189,"./cs.js":189,"./cv":190,"./cv.js":190,"./cy":191,"./cy.js":191,"./da":192,"./da.js":192,"./de":193,"./de-at":194,"./de-at.js":194,"./de-ch":195,"./de-ch.js":195,"./de.js":193,"./dv":196,"./dv.js":196,"./el":197,"./el.js":197,"./en-au":198,"./en-au.js":198,"./en-ca":199,"./en-ca.js":199,"./en-gb":200,"./en-gb.js":200,"./en-ie":201,"./en-ie.js":201,"./en-il":202,"./en-il.js":202,"./en-in":203,"./en-in.js":203,"./en-nz":204,"./en-nz.js":204,"./en-sg":205,"./en-sg.js":205,"./eo":206,"./eo.js":206,"./es":207,"./es-do":208,"./es-do.js":208,"./es-us":209,"./es-us.js":209,"./es.js":207,"./et":210,"./et.js":210,"./eu":211,"./eu.js":211,"./fa":212,"./fa.js":212,"./fi":213,"./fi.js":213,"./fil":214,"./fil.js":214,"./fo":215,"./fo.js":215,"./fr":216,"./fr-ca":217,"./fr-ca.js":217,"./fr-ch":218,"./fr-ch.js":218,"./fr.js":216,"./fy":219,"./fy.js":219,"./ga":220,"./ga.js":220,"./gd":221,"./gd.js":221,"./gl":222,"./gl.js":222,"./gom-deva":223,"./gom-deva.js":223,"./gom-latn":224,"./gom-latn.js":224,"./gu":225,"./gu.js":225,"./he":226,"./he.js":226,"./hi":227,"./hi.js":227,"./hr":228,"./hr.js":228,"./hu":229,"./hu.js":229,"./hy-am":230,"./hy-am.js":230,"./id":231,"./id.js":231,"./is":232,"./is.js":232,"./it":233,"./it-ch":234,"./it-ch.js":234,"./it.js":233,"./ja":235,"./ja.js":235,"./jv":236,"./jv.js":236,"./ka":237,"./ka.js":237,"./kk":238,"./kk.js":238,"./km":239,"./km.js":239,"./kn":240,"./kn.js":240,"./ko":241,"./ko.js":241,"./ku":242,"./ku.js":242,"./ky":243,"./ky.js":243,"./lb":244,"./lb.js":244,"./lo":245,"./lo.js":245,"./lt":246,"./lt.js":246,"./lv":247,"./lv.js":247,"./me":248,"./me.js":248,"./mi":249,"./mi.js":249,"./mk":250,"./mk.js":250,"./ml":251,"./ml.js":251,"./mn":252,"./mn.js":252,"./mr":253,"./mr.js":253,"./ms":254,"./ms-my":255,"./ms-my.js":255,"./ms.js":254,"./mt":256,"./mt.js":256,"./my":257,"./my.js":257,"./nb":258,"./nb.js":258,"./ne":259,"./ne.js":259,"./nl":260,"./nl-be":261,"./nl-be.js":261,"./nl.js":260,"./nn":262,"./nn.js":262,"./oc-lnc":263,"./oc-lnc.js":263,"./pa-in":264,"./pa-in.js":264,"./pl":265,"./pl.js":265,"./pt":266,"./pt-br":267,"./pt-br.js":267,"./pt.js":266,"./ro":268,"./ro.js":268,"./ru":269,"./ru.js":269,"./sd":270,"./sd.js":270,"./se":271,"./se.js":271,"./si":272,"./si.js":272,"./sk":273,"./sk.js":273,"./sl":274,"./sl.js":274,"./sq":275,"./sq.js":275,"./sr":276,"./sr-cyrl":277,"./sr-cyrl.js":277,"./sr.js":276,"./ss":278,"./ss.js":278,"./sv":279,"./sv.js":279,"./sw":280,"./sw.js":280,"./ta":281,"./ta.js":281,"./te":282,"./te.js":282,"./tet":283,"./tet.js":283,"./tg":284,"./tg.js":284,"./th":285,"./th.js":285,"./tk":286,"./tk.js":286,"./tl-ph":287,"./tl-ph.js":287,"./tlh":288,"./tlh.js":288,"./tr":289,"./tr.js":289,"./tzl":290,"./tzl.js":290,"./tzm":291,"./tzm-latn":292,"./tzm-latn.js":292,"./tzm.js":291,"./ug-cn":293,"./ug-cn.js":293,"./uk":294,"./uk.js":294,"./ur":295,"./ur.js":295,"./uz":296,"./uz-latn":297,"./uz-latn.js":297,"./uz.js":296,"./vi":298,"./vi.js":298,"./x-pseudo":299,"./x-pseudo.js":299,"./yo":300,"./yo.js":300,"./zh-cn":301,"./zh-cn.js":301,"./zh-hk":302,"./zh-hk.js":302,"./zh-mo":303,"./zh-mo.js":303,"./zh-tw":304,"./zh-tw.js":304};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=393},4:function(e,t,n){"use strict";n.r(t),n.d(t,"LANGUAGE_COOKIE_NAME",(function(){return d})),n.d(t,"assign",(function(){return _})),n.d(t,"notify",(function(){return h})),n.d(t,"formatTime",(function(){return m})),n.d(t,"formatTimeDate",(function(){return g})),n.d(t,"formatTimeDateShort",(function(){return v})),n.d(t,"formatDate",(function(){return y})),n.d(t,"getUsernameFromUrl",(function(){return b})),n.d(t,"getAssetUIDFromUrl",(function(){return k})),n.d(t,"buildUserUrl",(function(){return E})),n.d(t,"log",(function(){return w})),n.d(t,"replaceSupportEmail",(function(){return S})),n.d(t,"replaceBracketsWithLink",(function(){return A})),n.d(t,"currentLang",(function(){return T})),n.d(t,"getLangAsObject",(function(){return R})),n.d(t,"getLangString",(function(){return j})),n.d(t,"stringToColor",(function(){return x})),n.d(t,"isAValidUrl",(function(){return L})),n.d(t,"checkLatLng",(function(){return C})),n.d(t,"validFileTypes",(function(){return q})),n.d(t,"escapeHtml",(function(){return P})),n.d(t,"renderCheckbox",(function(){return D})),n.d(t,"hasLongWords",(function(){return N})),n.d(t,"hasVerticalScrollbar",(function(){return $})),n.d(t,"getScrollbarWidth",(function(){return I})),n.d(t,"toTitleCase",(function(){return U})),n.d(t,"launchPrinting",(function(){return M})),n.d(t,"truncateString",(function(){return F})),n.d(t,"truncateUrl",(function(){return B})),n.d(t,"truncateFile",(function(){return H})),n.d(t,"generateAutoname",(function(){return z})),n.d(t,"csrfSafeMethod",(function(){return G}));var i=n(11),r=n.n(i),s=n(14),o=n.n(s),a=n(170),u=n(2);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d="django_language",_=n(90);o.a.defaults.notifier.delay=10,o.a.defaults.notifier.position="bottom-left",o.a.defaults.notifier.closeButton=!0;var f=new a.a;function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";o.a.notify(e,t)}function m(e){return r()(e).calendar(null,{sameElse:"LL"})}function g(e){return r()(e).format("LLL")}function v(e){return r()(e).format("lll")}function y(e){return r()(e).format("ll")}function b(e){var t=e.match(/\/users\/(.*)\//);return null!==t?t[1]:null}function k(e){var t=e.match(/.*\/([^/]+)\//);return null!==t?t[1]:null}function E(e){return e.startsWith(window.location.protocol)?(console.error("buildUserUrl() called with URL instead of username (incomplete v2 migration)"),e):"".concat(u.default.ROOT_URL,"/api/v2/users/").concat(e,"/")}var O,w=((O=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.log.apply(console,t),t[0]}).profileSeconds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.profile(),window.setTimeout((function(){console.profileEnd()}),1e3*e)},O);window.log=w;function S(e,t){return"string"==typeof t?e.replace("help@kobotoolbox.org",t):e}function A(e,t){var n=/\[([^\]]+)\]/g;if(!t)return e.replace(n,"$1");var i='<a href="'.concat(t,'" target="_blank">$1</a>');return e.replace(n,i)}function T(){return f.get(d)||"en"}function R(e){var t=e.indexOf("("),n=e.indexOf(")"),i=e.substring(t+1,n),r=e.substring(0,t).trim();return i&&r&&r.length+i.length+3===e.length?{code:i,name:r}:void 0}function j(e){return"object"===p(e)&&e.name&&e.code?"".concat(e.name," (").concat(e.code,")"):void 0}function x(e,t){t="number"==typeof t?t:-15;return function(e,t){var n=parseInt(e,16),i=Math.round(2.55*t),r=(n>>16)+i,s=(n>>8&255)+i,o=(255&n)+i;return(16777216+65536*(r<255?r<1?0:r:255)+256*(s<255?s<1?0:s:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)}(function(e){return(e>>24&255).toString(16)+(e>>16&255).toString(16)+(e>>8&255).toString(16)+(255&e).toString(16)}(function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(e)),t)}function L(e){try{return new URL(e),!0}catch(e){return!1}}function C(e){return!!(e&&e[0]&&e[1])}function q(){return[".xls",".xlsx","application/xls","application/vnd.ms-excel","application/octet-stream","application/vnd.openxmlformats","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",""].join(",")}function P(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}function D(e,t,n){var i="";return n&&(i+="alertify-toggle-important"),'<div class="alertify-toggle checkbox '.concat(i,'"><label class="checkbox__wrapper"><input type="checkbox" class="checkbox__input" id="').concat(e,'"><span class="checkbox__label">').concat(t,"</span></label></div>")}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,n=e.split(" "),i=Math.max.apply(Math,l(n.map((function(e){return e.length}))));return i>=t}function $(e){return e.scrollHeight>e.offsetHeight}function I(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var n=e.offsetWidth-t.offsetWidth;return null!==e.parentNode&&e.parentNode.removeChild(e),n}function U(e){return e.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))}function M(){window.print()}function F(e,t){var n=e,i=Math.trunc(t/2);if(t<n.length){var r=n.substring(0,i),s=n.slice(n.length-i);n=r+"…"+s}return n}function B(e,t){return F(e.replace("https://","").replace("http://",""),t)}function H(e,t){return F(e.replace(/\.[^/.]+$/,""),t)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return e.toLowerCase().substring(t,n).replace(/(\ |\.)/g,"_")}function G(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"LANGUAGE_COOKIE_NAME","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(f,"cookies","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(h,"notify","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(m,"formatTime","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(g,"formatTimeDate","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(v,"formatTimeDateShort","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(y,"formatDate","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(b,"getUsernameFromUrl","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(k,"getAssetUIDFromUrl","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(E,"buildUserUrl","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(w,"log","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register("help@kobotoolbox.org","originalSupportEmail","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(S,"replaceSupportEmail","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(A,"replaceBracketsWithLink","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(T,"currentLang","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(R,"getLangAsObject","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(j,"getLangString","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(x,"stringToColor","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(L,"isAValidUrl","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(C,"checkLatLng","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(q,"validFileTypes","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(P,"escapeHtml","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(D,"renderCheckbox","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(N,"hasLongWords","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register($,"hasVerticalScrollbar","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(I,"getScrollbarWidth","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(U,"toTitleCase","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(M,"launchPrinting","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(F,"truncateString","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(B,"truncateUrl","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(H,"truncateFile","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(z,"generateAutoname","/srv/src/kpi/jsapp/js/utils.ts"),__REACT_HOT_LOADER__.register(G,"csrfSafeMethod","/srv/src/kpi/jsapp/js/utils.ts"))},40:function(e,t,n){var i,r,s,o,a,u=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=n(20),i=n(153),r=n(155),e.exports=(o=function(e){return e.replace(/^[\s\t\uFEFF\xA0]+|[\s\t\uFEFF\xA0]+$/g,"")},(a={skipLogicParser:i,validationLogicParser:r}).split_paste=function(e){var t,n,i,r,a,u,l,c,p,d,_,f,h,m,g,v;for(p=[],t=0,a=(_=e.split("\n")).length;t<a;t++)m=_[t],(g=o(m)).match(/^\s*$/)||p.push(g.split(/\t/));for(d=[],n=0,u=(f=p.slice(1)).length;n<u;n++){for(c=[],l=i=0,h=(m=f[n]).length;0<=h?i<h:i>h;l=0<=h?++i:--i)r=p[0][l],(v=m[l]).length>0&&c.push([r,v]);d.push(s.object(c))}return d},a.txtid=function(){return"AAnCAnn".replace(/[AaCn]/g,(function(e){var t,n,i;return i=function(){var e;return e=Math.floor(52*Math.random()),e+=e<=25?65:71,String.fromCharCode(e)},n=Math.random(),"a"===e?i():"A"===e?String.fromCharCode(65+(26*n|0)):"C"===e?(t=Math.floor(62*n))>52?t-52:i():"n"===e?Math.floor(10*n):void 0})).toLowerCase()},a.parseHelper={parseSkipLogic:function(e,t,n){var r,s,o,a,u,l;e.meta.set("rawValue",t);try{for(u=i(t),e.reset(),e.parseable=!0,l=u.criteria,s=0,o=l.length;s<o;s++)a={name:(r=l[s]).name,expressionCode:r.operator},"multiplechoice_selected"===r.operator?a.criterionOption=e.getSurvey().findRowByName(r.name).getList().options.get(r.response_value):a.criterion=r.response_value,e.add(a,{silent:!0,_parent:n});return void(u.operator&&e.meta.set("delimSelect",u.operator.toLowerCase()))}catch(t){return e.parseable=!1}}},a.sluggifyLabel=function(e,t){return null==t&&(t=[]),a.sluggify(e,{preventDuplicates:t,lowerCase:!1,preventDuplicateUnderscores:!0,stripSpaces:!0,lrstrip:!0,incrementorPadding:3,validXmlTag:!0})},a.isValidXmlTag=function(e){return 0===e.search(/^[a-zA-Z_:]([a-zA-Z0-9_:.])*$/)},a.sluggify=function(e,t){var n;if(null==t&&(t={}),""===e)return"";if((t=s.defaults(t,{lrstrip:!1,lstrip:!1,rstrip:!1,descriptor:"slug",lowerCase:!0,replaceNonWordCharacters:!0,nonWordCharsExceptions:!1,preventDuplicateUnderscores:!1,validXmlTag:!1,underscores:!0,characterLimit:30,preventDuplicates:!1,incrementorPadding:!1})).lrstrip&&(t.lstrip=!0,t.rstrip=!0),t.lstrip&&(e=e.replace(/^\s+/,"")),t.rstrip&&(e=e.replace(/\s+$/,"")),t.lowerCase&&(e=e.toLowerCase()),t.underscores&&(e=e.replace(/\s/g,"_").replace(/[_]+/g,"_")),t.replaceNonWordCharacters&&(n=t.nonWordCharsExceptions?RegExp("\\W^["+t.nonWordCharsExceptions+"]","g"):/\W+/g,(e=e.replace(n,"_")).match(/._$/)&&(e=e.replace(/_$/,""))),s.isNumber(t.characterLimit)&&(e=e.slice(0,t.characterLimit)),t.validXmlTag&&e[0].match(/^\d/)&&(e="_"+e),t.preventDuplicateUnderscores)for(;-1!==e.search(/__/);)e=e.replace(/__/,"_");return s.isArray(t.preventDuplicates)&&(e=function(){var n,i,r,s,o,a,l;if(a=function(){var e,n,i,r;for(r=[],e=0,n=(i=t.preventDuplicates).length;e<n;e++)(o=i[e])&&r.push(o.toLowerCase());return r}(),0===(i=e).length)throw new Error("Renaming Error: "+t.descriptor+" is empty");for(n=i,r=0;l=n.toLowerCase(),u.call(a,l)>=0;)s=""+ ++r,t.incrementorPadding&&r<Math.pow(10,t.incrementorPadding)&&(s=("000000000000"+r).slice(-1*t.incrementorPadding)),n=i+"_"+s;return n}()),e},a)},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(24),r=n(2),s=n(19),o=n(4);function a(e){var t=[],n=[];if([s.a.formView,s.a.formEdit,s.a.formManage,s.a.submissionsAdd,s.a.submissionsView,s.a.submissionsEdit,s.a.submissionsValidate,s.a.submissionsDelete].forEach((function(r){var o=s.c[r];if(e[o]){var a=s.e[o];n.push({url:i.a.getPermissionByCodename(a).url,filters:[{_submitted_by:{$in:e[o+s.h]}}]})}else e[r]&&t.push(c(e.username,s.b[r]))})),n.length>=1){var o=c(e.username,r.PERMISSIONS_CODENAMES.partial_submissions);o.partial_permissions=n,t.push(o)}return t=l(t=u(t))}function u(e){var t=new Set;return e.forEach((function(e){i.a.getPermission(e.permission).contradictory.forEach((function(e){t.add(e)}))})),e=e.filter((function(e){return!t.has(e.permission)}))}function l(e){var t=new Set;return e.forEach((function(e){i.a.getPermission(e.permission).implied.forEach((function(e){t.add(e)}))})),e=e.filter((function(e){return!t.has(e.permission)}))}function c(e,t){return{user:Object(o.buildUserUrl)(e),permission:i.a.getPermissionByCodename(t).url}}function p(e){var t={};return e.forEach((function(e){e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.view_asset).url&&(t.formView=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.change_asset).url&&(t.formEdit=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.manage_asset).url&&(t.formManage=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.partial_submissions).url&&e.partial_permissions.forEach((function(e){var n=i.a.getPermission(e.url),r=s.f[n.codename]+s.g;t[r]=!0,e.filters.forEach((function(e){e._submitted_by&&(t[r+s.h]=e._submitted_by.$in)}))})),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.add_submissions).url&&(t.submissionsAdd=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.view_submissions).url&&(t.submissionsView=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.change_submissions).url&&(t.submissionsEdit=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.delete_submissions).url&&(t.submissionsDelete=!0),e.permission===i.a.getPermissionByCodename(r.PERMISSIONS_CODENAMES.validate_submissions).url&&(t.submissionsValidate=!0)})),t}function d(e){var t=[];return e.forEach((function(e){e.permissions.forEach((function(n){var i={user:e.user.url,permission:n.permission};n.partial_permissions&&(i.partial_permissions=n.partial_permissions),t.push(i)}))})),t}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],s={};return e.forEach((function(e){(Object(o.getUsernameFromUrl)(e.user)!==r.ANON_USERNAME||n)&&(s[e.user]||(s[e.user]=[]),s[e.user].push({url:e.url,permission:e.permission,partial_permissions:e.partial_permissions?e.partial_permissions:void 0}))})),Object.keys(s).forEach((function(e){i.push({user:{url:e,name:Object(o.getUsernameFromUrl)(e),isOwner:e===t||Object(o.getUsernameFromUrl)(e)===Object(o.getUsernameFromUrl)(t)},permissions:s[e]})})),f(i)}function f(e){return e.sort((function(e,t){return e.user.isOwner?-1:t.user.isOwner?1:e.user.url<t.user.url?-1:e.user.url>t.user.url?1:0}))}var h={parseFormData:a,buildFormData:p,parseBackendData:_,parseUserWithPermsList:d,sortParseBackendOutput:f};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(a,"parseFormData","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(u,"removeContradictoryPerms","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(l,"removeImpliedPerms","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(c,"buildBackendPerm","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(p,"buildFormData","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(d,"parseUserWithPermsList","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(_,"parseBackendData","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(f,"sortParseBackendOutput","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"),__REACT_HOT_LOADER__.register(h,"permParser","/srv/src/kpi/jsapp/js/components/permissions/permParser.es6"))},59:function(e,t,n){var i,r,s,o,a,u,l,c,p,d,_=function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},f={}.hasOwnProperty;s=n(20),r=n(47),i=n(40),e.exports=((o={}).defaultSurveyDetails={start_time:{name:"start",label:"start time",description:"Records when the survey was begun",default:!0},end_time:{name:"end",label:"end time",description:"records when the survey was marked as completed",default:!0},today:{name:"today",label:"today",description:"includes today's date",default:!1},username:{name:"username",label:"username",description:"includes interviewer's username",default:!1},simserial:{name:"simserial",label:"sim serial",description:"records the serial number of the network sim card",default:!1},subscriberid:{name:"subscriberid",label:"subscriber id",description:"records the subscriber id of the sim card",default:!1},deviceid:{name:"deviceid",label:"device id",aliases:["imei"],description:"Records the internal device ID number (works on Android phones)",default:!1},phoneNumber:{name:"phonenumber",label:"phone number",description:"Records the device's phone number, when available",default:!1},audit:{name:"audit",label:"audit",description:"Records the behavior of enumerators as they navigate through a form",default:!1},bg_aud:{name:"background-audio",label:"background audio",description:"record bg audio",default:!1}},a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype._forSurvey=function(){return{name:this.get("name"),label:this.get("label"),description:this.get("description")}},t}(r.Model),o.SurveyDetailSchema=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.model=a,t.prototype.typeList=function(){var e;return this._typeList||(this._typeList=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.models).length;t<n;t++)e=i[t],r.push(e.get("name"));return r}.call(this)),this._typeList},t}(r.Collection),o.surveyDetailSchema=new o.SurveyDetailSchema(s.values(o.defaultSurveyDetails)),o.defaultsGeneral={label:{value:"New Question"}},o.defaultsForType={geotrace:{label:{value:"Record a line"},required:{value:!1,_hideUnlessChanged:!0}},geoshape:{label:{value:"Record an area"},required:{value:!1,_hideUnlessChanged:!0}},geopoint:{label:{value:"Record your current location"},required:{value:!1,_hideUnlessChanged:!0}},image:{label:{value:"Point and shoot! Use the camera to take a photo"}},video:{label:{value:"Use the camera to record a video"}},audio:{label:{value:"Use the camera's microphone to record a sound"}},file:{label:{value:"Upload a file"}},note:{label:{value:"This note can be read out loud"},required:{value:!1,_hideUnlessChanged:!0}},integer:{label:{value:"Enter a number"}},barcode:{label:{value:"Use the camera to scan a barcode"}},decimal:{label:{value:"Enter a number"}},date:{label:{value:"Enter a date"}},range:{label:{value:"Enter a number within a specified range"}},calculate:{calculation:{value:""},label:{value:"calculation"},required:{value:!1,_hideUnlessChanged:!0}},hidden:{label:{value:"hidden"},required:{value:!1,_hideUnlessChanged:!0}},datetime:{label:{value:"Enter a date and time"}},time:{label:{value:"Enter a time"}},acknowledge:{label:{value:"Acknowledge"}},"xml-external":{label:{value:"File_name"},required:{value:!1,_hideUnlessChanged:!0}}},o.paramTypes={number:"number",boolean:"boolean"},o.questionParams={range:{start:{type:o.paramTypes.number,defaultValue:0},end:{type:o.paramTypes.number,defaultValue:10},step:{type:o.paramTypes.number,defaultValue:1}},image:{"max-pixels":{type:o.paramTypes.number,defaultValue:1024}},select_one:{randomize:{type:o.paramTypes.boolean},seed:{type:o.paramTypes.number}},select_multiple:{randomize:{type:o.paramTypes.boolean},seed:{type:o.paramTypes.number}}},o.columns=["type","name","label","hint","guidance_hint","required","relevant","default","constraint"],o.lookupRowType=(p=[["note","Note",{preventRequired:!0}],["acknowledge","Acknowledge"],["text","Text"],["integer","Integer"],["decimal","Decimal"],["range","Range"],["geopoint","Geopoint (GPS)"],["geotrace","Geotrace (GPS)"],["geoshape","Geoshape (GPS)"],["image","Image",{isMedia:!0}],["barcode","Barcode / QR code"],["date","Date"],["time","Time"],["datetime","Date and Time"],["audio","Audio",{isMedia:!0}],["video","Video",{isMedia:!0}],["file","File"],["calculate","Calculate"],["hidden","Hidden"],["select_one","Select",{orOtherOption:!0,specifyChoice:!0}],["score","Score"],["score__row","Score Row"],["rank","Rank"],["kobomatrix","Advanced Matrix"],["rank__level","Rank Level"],["select_multiple","Multiple choice",{orOtherOption:!0,specifyChoice:!0}],["xml-external","External XML"]],u=function(e){var t;this.name=e[0],this.label=e[1],(t=e[2])||(t={}),s.extend(this,t)},d=function(){var e,t,n;for(n=[],e=0,t=p.length;e<t;e++)l=p[e],n.push(new u(l));return n}(),(c=function(e){var t,n,i,r;for(t=0,n=d.length;t<n;t++)(r=d[t]).name===e&&(i=r);return i}).typeSelectList=function(){return d},c),o.autoset_kuid=!0,o.columnOrder=function(e){return-1===o.columns.indexOf(e)&&o.columns.push(e),o.columns.indexOf(e)},o.newRowDetails={name:{value:""},type:{value:"text"},hint:{value:"",_hideUnlessChanged:!0},guidance_hint:{value:""},required:{value:!1,_hideUnlessChanged:!0},relevant:{value:"",_hideUnlessChanged:!0},default:{value:"",_hideUnlessChanged:!0},constraint:{value:"",_hideUnlessChanged:!0},constraint_message:{value:"",_hideUnlessChanged:!0},tags:{value:"",_hideUnlessChanged:!0},appearance:{value:"",_hideUnlessChanged:!0}},o.newGroupDetails={name:{value:function(){return"group_"+i.txtid()}},label:{value:"Group"},type:{value:"group"},_isRepeat:{value:!1},relevant:{value:"",_hideUnlessChanged:!0},appearance:{value:"",_hideUnlessChanged:!0}},o.question_types={},o.truthyValues=["yes","YES","true","true()","TRUE"],o.falsyValues=["no","NO","false","false()","FALSE"],o.boolOutputs={true:"true",false:"false"},o)},6:function(e,n,i){"use strict";i.d(n,"a",(function(){return _}));var r=i(8),s=i.n(r),o=i(170),a=i(91),u=i(3),l=i(4),c=i(2),p=new o.a;function d(e,t){var n={},i=!1;return Object.keys(t).forEach((function(r){e[r]!==t[r]&&(n[r]=t[r],i=!0)})),!!i&&n}var _={};_.tags=s.a.createStore({init:function(){this.queries={},this.listenTo(u.a.resources.listTags.completed,this.listTagsCompleted)},listTagsCompleted:function(e){this.trigger(e.results)}});_.surveyState=s.a.createStore({init:function(){this.state={}},setState:function(e){var t=d(this.state,e);t&&(Object(l.assign)(this.state,e),this.trigger(t))}}),_.assetSearch=s.a.createStore({init:function(){this.queries={},this.listenTo(u.a.search.assets.completed,this.onSearchAssetsCompleted)},getRecentSearch:function(e){if(e in this.queries&&(new Date).getTime()-this.queries[e][1].getTime()<3e5)return this.queries[e][0];return!1},onSearchAssetsCompleted:function(e,t){t.query=e.q,this.queries[e.q]=[t,new Date],t.count>0&&this.trigger(t)}}),_.translations=s.a.createStore({init:function(){this.state={isTranslationTableUnsaved:!1}},setState:function(e){var t=d(this.state,e);t&&(Object(l.assign)(this.state,t),this.trigger(t))},setTranslationTableUnsaved:function(e){this.setState({isTranslationTableUnsaved:e})}}),_.pageState=s.a.createStore({init:function(){this.state={assetNavExpanded:!1,showFixedDrawer:!1}},setState:function(e){var t=d(this.state,e);t&&(Object(l.assign)(this.state,t),this.trigger(t))},toggleFixedDrawer:function(){var e={},t=!this.state.showFixedDrawer;e.showFixedDrawer=t,Object(l.assign)(this.state,e),this.trigger(e)},showModal:function(e){this.setState({modal:e})},hideModal:function(){this._onHideModal&&this._onHideModal(),this.setState({modal:!1})},switchModal:function(e){var t=this;this.hideModal(),window.setTimeout((function(){t.showModal(e)}),0)},switchToPreviousModal:function(){this.switchModal({type:this.state.modal.previousType})},hasPreviousModal:function(){return this.state.modal&&this.state.modal.previousType}}),_.snapshots=s.a.createStore({init:function(){this.listenTo(u.a.resources.createSnapshot.completed,this.snapshotCreated),this.listenTo(u.a.resources.createSnapshot.failed,this.snapshotCreationFailed)},snapshotCreated:function(e){this.trigger(Object(l.assign)({success:!0},e))},snapshotCreationFailed:function(e){this.trigger(Object(l.assign)({success:!1},e.responseJSON))}}),_.session=s.a.createStore({currentAccount:{username:c.ANON_USERNAME},isAuthStateKnown:!1,isLoggedIn:!1,init:function(){u.a.misc.updateProfile.completed.listen(this.onUpdateProfileCompleted),this.listenTo(u.a.auth.verifyLogin.loggedin,this.onLoggedIn),this.listenTo(u.a.auth.verifyLogin.anonymous,this.onNotLoggedIn),this.listenTo(u.a.auth.verifyLogin.failed,this.onVerifyLoginFailed),u.a.auth.verifyLogin()},onUpdateProfileCompleted:function(e){this.currentAccount=e,this.trigger({currentAccount:this.currentAccount})},onLoggedIn:function(e){this.isAuthStateKnown=!0,this.isLoggedIn=!0,this.currentAccount=e,this.trigger()},onNotLoggedIn:function(e){Object(l.log)("login confirmed anonymous",e.message),this.isAuthStateKnown=!0,this.trigger()},onVerifyLoginFailed:function(e){Object(l.log)("login not verified",e.status,e.statusText)}}),_.allAssets=s.a.createStore({init:function(){this.data=[],this.byUid={},this._waitingOn={},this.listenTo(u.a.search.assets.completed,this.onListAssetsCompleted),this.listenTo(u.a.search.assets.failed,this.onListAssetsFailed),this.listenTo(u.a.resources.updateAsset.completed,this.onUpdateAssetCompleted),this.listenTo(u.a.resources.deleteAsset.completed,this.onDeleteAssetCompleted),this.listenTo(u.a.resources.cloneAsset.completed,this.onCloneAssetCompleted),this.listenTo(u.a.resources.loadAsset.completed,this.onLoadAssetCompleted),this.listenTo(u.a.permissions.removeAssetPermission.completed,this.onDeletePermissionCompleted)},whenLoaded:function(e,t){"string"==typeof e&&"function"==typeof t&&(this.byUid[e]&&this.byUid[e].content?t.call(this,this.byUid[e]):(this._waitingOn[e]||(this._waitingOn[e]=[]),this._waitingOn[e].push(t),u.a.resources.loadAsset({id:e})))},getAsset:function(e){return this.byUid[e]},onUpdateAssetCompleted:function(e){var t=this;this.registerAsset(e),this.data.forEach((function(n,i){n.uid===e.uid&&(t.data[i]=e)}))},onLoadAssetCompleted:function(e){this.registerAsset(e)},onCloneAssetCompleted:function(e){this.registerAsset(e),this.byUid[e.uid]=e,this.data.unshift(e),this.trigger(this.data)},onDeleteAssetCompleted:function(e){var t=this;this.byUid[e.uid]&&(this.byUid[e.uid].deleted="true",this.trigger(this.data),window.setTimeout((function(){t.data=t.data.filter((function(t){return t.uid!==e.uid})),t.trigger(t.data)}),500))},onDeletePermissionCompleted:function(e,t){t&&this.onDeleteAssetCompleted({uid:e})},registerAsset:function(e){var t=Object(a.a)(e);e.tags=t.tags,this.byUid[e.uid]=e,e.content&&this.callCallbacks(e)},callCallbacks:function(e){if(this._waitingOn[e.uid])for(;this._waitingOn[e.uid].length>0;){this._waitingOn[e.uid].pop().call(this,e)}},onListAssetsCompleted:function(e,t){t.results.forEach(this.registerAsset),this.data=t.results,this.trigger(this.data)},onListAssetsFailed:function(e,n){var i;Object(l.notify)((null==n||null===(i=n.responseJSON)||void 0===i?void 0:i.detail)||t("failed to list assets"))}}),_.selectedAsset=s.a.createStore({init:function(){this.uid=p.get("selectedAssetUid"),this.listenTo(u.a.resources.cloneAsset.completed,this.onCloneAssetCompleted)},onCloneAssetCompleted:function(e){this.uid=e.uid,this.asset=_.allAssets.byUid[e.uid],this.asset||console.error("selectedAssetStore error"),this.trigger(this.asset)},toggleSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t||this.uid!==e?(this.uid=e,this.asset=_.allAssets.byUid[e]):(this.uid=!1,this.asset={}),p.set("selectedAssetUid",this.uid),this.trigger({selectedAssetUid:this.uid}),!1!==this.uid}}),_.userExists=s.a.createStore({init:function(){this.checked={},this.listenTo(u.a.misc.checkUsername.completed,this.usernameExists),this.listenTo(u.a.misc.checkUsername.failed,this.usernameDoesntExist)},checkUsername:function(e){if(e in this.checked)return this.checked[e]},usernameExists:function(e){this.checked[e]=!0,this.trigger(this.checked,e)},usernameDoesntExist:function(e){this.checked[e]=!1,this.trigger(this.checked,e)}});"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"cookies","/srv/src/kpi/jsapp/js/stores.es6"),__REACT_HOT_LOADER__.register(d,"changes","/srv/src/kpi/jsapp/js/stores.es6"),__REACT_HOT_LOADER__.register(_,"stores","/srv/src/kpi/jsapp/js/stores.es6"),__REACT_HOT_LOADER__.register(300,"MAX_SEARCH_AGE","/srv/src/kpi/jsapp/js/stores.es6"))},64:function(e,n,i){"use strict";i.d(n,"a",(function(){return c})),i.d(n,"d",(function(){return _})),i.d(n,"c",(function(){return g})),i.d(n,"b",(function(){return b}));var r,s=i(13),o=i(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.group_root="group_root",e.group_repeat="group_repeat",e.group_regular="group_regular",e.group_matrix="group_matrix",e.group_matrix_row="group_matrix_row"}(r||(r={}));var c=Object(o.createEnum)([r.group_root,r.group_repeat,r.group_regular,r.group_matrix,r.group_matrix_row]),p=function(){function e(t,n,i){u(this,e),this.label=null,this.name=null,this.children=[],this.type=t,n&&(this.label=n),i&&(this.name=i)}var t,n,i;return t=e,(n=[{key:"addChild",value:function(e){this.children.push(e)}}])&&l(t.prototype,n),i&&l(t,i),e}(),d=function e(t,n,i,r,s){u(this,e),this.data=null,this.type=t,this.label=n,this.name=i,s&&(this.data=s),r&&(this.listName=r)};function _(e,t,n,i){var r=Object(s.j)(e,!0),a=new p(c.group_root);return function a(u,l){for(var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=function(g){var v=e[g],b=Object(s.i)(v),k=y(v),E=Object(s.k)(b,e,n),O=null;if(null!==u.name&&(O=r[u.name]),!m(b,O,e))return"continue";if(v.type===o.QUESTION_TYPES.note.id||v.type===o.QUESTION_TYPES.hidden.id)return"continue";if(Object(s.l)(e[g-1],v))return"continue";var w=h(b,e,l);if(v.type===o.GROUP_TYPES_BEGIN.begin_repeat)Array.isArray(w)&&w.forEach((function(e,t){var n=new p(c.group_repeat,E,b);u.addChild(n),a(n,e,t)}));else if(v.type===o.GROUP_TYPES_BEGIN.begin_kobomatrix){var S=new p(c.group_matrix,E,b);u.addChild(S),Array.isArray(t)&&t.forEach((function(r){r[o.MATRIX_PAIR_PROPS.inChoices]===v[o.MATRIX_PAIR_PROPS.inSurvey]&&f(e,t,i,n,S,Object(s.i)(r),l)}))}else if(v.type===o.GROUP_TYPES_BEGIN.begin_group||v.type===o.GROUP_TYPES_BEGIN.begin_score||v.type===o.GROUP_TYPES_BEGIN.begin_rank){var A=new p(c.group_regular,E,b);u.addChild(A),a(A,w,_)}else if(Object.keys(o.QUESTION_TYPES).includes(v.type)||v.type===o.SCORE_ROW_TYPE||v.type===o.RANK_LEVEL_TYPE){if(Array.isArray(w)&&null!==_&&(w=w[_]),v.type===o.SCORE_ROW_TYPE||v.type===o.RANK_LEVEL_TYPE)k=y(e.find((function(e){return Object(s.i)(e)===u.name})));var T=new d(v.type,E,b,k,w);u.addChild(T)}},v=0;v<e.length;v++)g(v)}(a,i),a}function f(e,t,n,i,r,o,a){if(null!==r.name){var u=Object(s.k)(o,t,i),l=new p(c.group_matrix_row,u,o);r.addChild(l);var _=Object(s.j)(e,!0),f=_[r.name];Object.keys(_).forEach((function(t){if(_[t].startsWith("".concat(f,"/"))){var u=e.find((function(e){return Object(s.i)(e)===t}));if(void 0===u)return;var c=null,p="".concat(f,"_").concat(o,"/").concat(r.name,"_").concat(o,"_").concat(t);n[p]?c=n[p]:a[p]&&(c=a[p]);var h=new d(u.type,Object(s.k)(t,e,i),t,y(u),c);l.addChild(h)}}))}}function h(e,t,n){if(null===n||"object"!==a(n))return null;var i=Object(s.j)(t,!0)[e];if(n[i])return n[i];if(n[e])return n[e];if(i){var r=g(n,i);if(r.length>=1)return r;var o=v(n,i);if(Object.keys(o).length>=1)return o}return null}function m(e,t,n){var i=Object(s.j)(n,!0);return null===t?i[e]===e:i[e]==="".concat(t,"/").concat(e)}function g(e,t){var n=[];return function e(i,r){var s=t.split("/").slice(0,r+1).join("/");s===t?Object.prototype.hasOwnProperty.call(i,t)&&n.push(i[t]):Array.isArray(i[s])&&i[s].forEach((function(t){e(t,r+1)}))}(e,0),n}function v(e,t){var n={};return Object.keys(e).forEach((function(i){i.startsWith("".concat(t,"/"))&&(n[i]=e[i])})),n}function y(e){var t;if(e&&Object.keys(e).includes(o.CHOICE_LISTS.SELECT)&&(t=e[o.CHOICE_LISTS.SELECT]),e&&Object.keys(e).includes(o.CHOICE_LISTS.MATRIX)&&(t=e[o.CHOICE_LISTS.MATRIX]),e&&Object.keys(e).includes(o.CHOICE_LISTS.SCORE)&&(t=e[o.CHOICE_LISTS.SCORE]),e&&Object.keys(e).includes(o.CHOICE_LISTS.RANK)&&(t=e[o.CHOICE_LISTS.RANK]),"string"==typeof t)return t}function b(e,n){var i=n.replace(/ /g,"_"),r=t("Could not find ##fileName##").replace("##fileName##",n);return e._attachments.forEach((function(e){e.filename.includes(i)&&(r=e)})),r}var k={DISPLAY_GROUP_TYPES:c,getSubmissionDisplayData:_,getRepeatGroupAnswers:g};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"DisplayGroupTypeName","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(c,"DISPLAY_GROUP_TYPES","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(p,"DisplayGroup","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(d,"DisplayResponse","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(_,"getSubmissionDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(f,"populateMatrixData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(h,"getRowData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(m,"isRowFromCurrentGroupLevel","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(g,"getRepeatGroupAnswers","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(v,"getRegularGroupAnswers","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(y,"getRowListName","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(b,"getMediaAttachment","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"),__REACT_HOT_LOADER__.register(k,"default","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.ts"))},65:function(e,n,i){(function(n){var r,s,o,a,u,l,c=function(e,t){return function(){return e.apply(t,arguments)}},p=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=i(20),s=i(47),r=i(153),e.exports=((l={}).SkipLogicHelperFactory=function(){function e(e,t,n,i,r){this.model_factory=e,this.view_factory=t,this.survey=n,this.current_question=i,this.serialized_criteria=r}return e.prototype.create_presenter=function(e,t){return new l.SkipLogicPresenter(e,t,this.current_question,this.survey,this.view_factory)},e.prototype.create_builder=function(){return new l.SkipLogicBuilder(this.model_factory,this.view_factory,this.survey,this.current_question,this)},e.prototype.create_context=function(){return new l.SkipLogicHelperContext(this.model_factory,this.view_factory,this,this.serialized_criteria)},e}(),l.SkipLogicPresentationFacade=function(){function e(e,t,n){this.model_factory=e,this.helper_factory=t,this.view_factory=n}return e.prototype.initialize=function(){return null!=this.context?this.context:this.context=this.helper_factory.create_context()},e.prototype.serialize=function(){return null==this.context&&(this.context=this.helper_factory.create_context()),this.context.serialize()},e.prototype.render=function(e){return null==this.context&&(this.context=this.helper_factory.create_context()),this.context.render(e)},e}(),l.SkipLogicPresenter=function(){function e(e,t,n,i,r){var s,a;this.model=e,this.view=t,this.current_question=n,this.survey=i,this.view_factory=r,this.view.presenter=this,this.survey?(a=this,s=function(e){var t,n,i;if((i=a.model._get_question())&&i._isSelectQuestion()&&i.getList().cid===e)return t=a.model.get("response_value").get("cid"),i.getList().options.get(t)?(n=o.map(i.getList().options.models,(function(e){return{text:e.get("label"),value:e.cid}})),a.view.response_value_view.options.set("options",n),a.view.response_value_view.val(t),a.view.response_value_view.$el.trigger("change"),a.model.change_response(t)):a.dispatcher.trigger("remove:presenter",a.model.cid)},this.survey.on("choice-list-update",s,this),this.survey.on("remove-option",s,this),this.survey.on("row-detail-change",function(e){return function(t,n){if(e.destination&&"label"===n)return e.render(e.destination)}}(this),this)):console.error("this.survey is not yet available")}return e.prototype.change_question=function(e){var t,n;return this.model.change_question(e),this.question=this.model._get_question(),t=this.question.get_type(),this.question.on("remove",(n=this,function(){return n.dispatcher.trigger("remove:presenter",n.model.cid)})),this.view.change_operator(this.view_factory.create_operator_picker(t)),this.view.operator_picker_view.val(this.model.get("operator").get_value()),this.view.attach_operator(),this.change_response_view(t,this.model.get("operator").get_type()),this.finish_changing()},e.prototype.change_operator=function(e){return this.model.change_operator(e),this.change_response_view(this.model._get_question().get_type(),this.model.get("operator").get_type()),this.finish_changing()},e.prototype.change_response=function(e){return this.model.change_response(e),this.finish_changing()},e.prototype.change_response_view=function(e,t){var n,i,r,s;return(s=this.view_factory.create_response_value_view(this.model._get_question(),e,t)).model=this.model.get("response_value"),this.view.change_response(s),this.view.attach_response(),r=s.model.get("value"),(n=this.model._get_question())._isSelectQuestion()&&(i=o.find(n.getList().options.models,(function(e){return e.get("name")===r})))&&i.cid&&(r=i.cid),this.view.response_value_view.val(r),s.$el.trigger("change")},e.prototype.finish_changing=function(){return this.dispatcher.trigger("changed:model",this)},e.prototype.is_valid=function(){var e;return!!this.model._get_question()&&(1===this.model.get("operator").get_type().id||""!==(e=this.model.get("response_value").get("value"))&&void 0!==e&&!1!==this.model.get("response_value").isValid())},e.prototype.render=function(e){var t,n,i,r;return this.destination=e,this.view.question_picker_view.detach(),this.view.question_picker_view=this.view_factory.create_question_picker(this.current_question),this.view.render(),this.view.question_picker_view.val(this.model.get("question_cid")),this.view.operator_picker_view.val(this.model.get("operator").get_value()),r=null!=(n=this.model.get("response_value"))?n.get("value"):void 0,(t=this.model._get_question())&&t._isSelectQuestion()&&(r=null!=(i=o.find(t.getList().options.models,(function(e){return e.get("name")===r})))?i.cid:void 0),this.view.response_value_view.val(r),this.view.attach_to(this.destination),this.dispatcher.trigger("rendered",this)},e.prototype.serialize=function(){return this.model.serialize()},e}(),l.SkipLogicBuilder=function(){function e(e,t,n,i,r){this.model_factory=e,this.view_factory=t,this.survey=n,this.current_question=i,this.helper_factory=r,this.build_empty_criterion=c(this.build_empty_criterion,this),this.build_criterion=c(this.build_criterion,this),this.build_operator_logic=c(this.build_operator_logic,this)}return e.prototype.build_criterion_builder=function(e){var t,n,i;if(""===e)return[[this.build_empty_criterion()],"and"];try{n=this._parse_skip_logic_criteria(e),0===(t=o.filter(o.map(n.criteria,(i=this,function(e){return i.criterion=e,i.build_criterion()})),(function(e){return!!e}))).length&&t.push(this.build_empty_criterion())}catch(t){return"undefined"!=typeof Raven&&null!==Raven&&Raven.captureException(new Error("could not parse skip logic. falling back to hand-coded"),{extra:{criteria:e}}),!1}return[t,n.operator]},e.prototype._parse_skip_logic_criteria=function(e){return r(e)},e.prototype.build_operator_logic=function(e){return[this.build_operator_model(e,this._operator_type().symbol[this.criterion.operator]),this.view_factory.create_operator_picker(e)]},e.prototype.build_operator_model=function(e,t){var n;return n=this._operator_type(),this.model_factory.create_operator("existence"===n.type?"existence":e.equality_operator_type,t,n.id)},e.prototype._operator_type=function(){return o.find(l.operator_types,(e=this,function(t){var n,i;return n=null!=(i=e.criterion)?i.operator:void 0,p.call(t.parser_name,n)>=0}));var e},e.prototype.build_criterion_logic=function(e,t,n){var i,r;return(i=this.model_factory.create_criterion_model()).set("operator",e),(r=this.view_factory.create_criterion_view(this.view_factory.create_question_picker(this.current_question),t,n)).model=i,this.helper_factory.create_presenter(i,r)},e.prototype.build_criterion=function(){var e,t,n,i,r,s,a,u,l,c;if(!(i=this._get_question()))return!1;if(!(p.call(this.questions(),i)>=0))throw"question is not selectable";return r=i.get_type(),e=(s=this.build_operator_logic(r))[0],t=s[1],l=this.view_factory.create_response_value_view(i,r,this._operator_type()),(n=this.build_criterion_logic(e,t,l)).model.change_question(i.cid),u=i._isSelectQuestion()?null!=(a=o.find(i.getList().options.models,(c=this,function(e){return e.get("name")===c.criterion.response_value})))?a.cid:void 0:this.criterion.response_value,n.model.change_response(u||""),l.model=n.model.get("response_value"),l.val(u),n},e.prototype._get_question=function(){return this.survey.findRowByName(this.criterion.name)},e.prototype.build_empty_criterion=function(){var e,t;return e=this.view_factory.create_operator_picker(null),t=this.view_factory.create_response_value_view(null),this.build_criterion_logic(this.model_factory.create_operator("empty"),e,t)},e.prototype.questions=function(){return this.selectable=this.current_question.selectableRows()||this.selectable,this.selectable},e}(),l.SkipLogicHelperContext=function(){function e(e,t,n,i){this.model_factory=e,this.view_factory=t,this.helper_factory=n,this.state={serialize:function(){return i}},null==i||""===i?(i="",this.use_mode_selector_helper()):this.use_criterion_builder_helper(),null==this.state&&(this.state={serialize:function(){return i}},this.use_hand_code_helper())}return e.prototype.render=function(e){this.destination=e,null!=this.destination&&(this.destination.empty(),this.state.render(this.destination))},e.prototype.serialize=function(){return this.state.serialize()},e.prototype.use_criterion_builder_helper=function(){var e;null==this.builder&&(this.builder=this.helper_factory.create_builder()),!1===(e=this.builder.build_criterion_builder(this.state.serialize()))?this.state=null:(this.state=new l.SkipLogicCriterionBuilderHelper(e[0],e[1],this.builder,this.view_factory,this),this.render(this.destination))},e.prototype.use_hand_code_helper=function(){this.state=new l.SkipLogicHandCodeHelper(this.state.serialize(),this.builder,this.view_factory,this),this.render(this.destination)},e.prototype.use_mode_selector_helper=function(){this.helper_factory.survey.off(null,null,this.state),this.state=new l.SkipLogicModeSelectorHelper(this.view_factory,this),this.render(this.destination)},e}(),l.SkipLogicCriterionBuilderHelper=function(){function e(e,t,n,i,r){var a,u;this.presenters=e,this.builder=n,this.view_factory=i,this.context=r,this.view=this.view_factory.create_criterion_builder_view(),this.view.criterion_delimiter=(t||"and").toLowerCase(),this.view.facade=this,this.dispatcher=o.clone(s.Events),this.dispatcher.on("remove:presenter",(u=this,function(e){return u.remove(e)})),this.dispatcher.on("changed:model",function(e){return function(t){return e.determine_add_new_criterion_visibility()}}(this)),this.dispatcher.on("rendered",function(e){return function(t){return e.determine_add_new_criterion_visibility()}}(this)),a=function(e){return function(){var t,n,i,r,s;for(s=e.builder.questions(),r=[],o.each(e.presenters,(function(e){var t;if(e.model._get_question()&&(t=e.model._get_question(),!(p.call(s,t)>=0)))return r.push(e.model.cid)})),t=0,n=r.length;t<n;t++)i=r[t],e.remove(i);if(0===e.presenters.length)return e.context.use_mode_selector_helper()}}(this),this.builder.survey.on("sortablestop",a,this),a(),o.each(this.presenters,function(e){return function(t){return t.dispatcher=e.dispatcher,t.serialize_all=o.bind(e.serialize,e)}}(this))}return e.prototype.determine_criterion_delimiter_visibility=function(){return this.presenters.length<2?this.$criterion_delimiter.hide():this.$criterion_delimiter.show()},e.prototype.render=function(e){return this.view.render().attach_to(e),this.$criterion_delimiter=this.view.$(".skiplogic__delimselect"),this.$add_new_criterion_button=this.view.$(".skiplogic__addcriterion"),this.determine_criterion_delimiter_visibility(),this.destination=this.view.$(".skiplogic__criterialist"),o.each(this.presenters,(t=this,function(e){return e.render(t.destination)}));var t},e.prototype.serialize=function(){var e;return e=o.map(this.presenters,(function(e){return e.serialize()})),o.filter(e,(function(e){return e})).join(" "+this.view.criterion_delimiter+" ")},e.prototype.add_empty=function(){var e;return(e=this.builder.build_empty_criterion()).dispatcher=this.dispatcher,e.serialize_all=o.bind(this.serialize,this),this.presenters.push(e),e.render(this.destination),this.determine_criterion_delimiter_visibility()},e.prototype.remove=function(e){var t;if(o.each(this.presenters,(t=this,function(n,i){if(null!=n&&n.model.cid===e)return(n=t.presenters.splice(i,1)[0]).view.$el.remove(),t.builder.survey.off(null,null,n),t.determine_add_new_criterion_visibility()})),0===this.presenters.length)return this.context.use_mode_selector_helper()},e.prototype.determine_add_new_criterion_visibility=function(){var e,t,n;if(this.all_presenters_are_valid()?(e="show()",null!=(t=this.$add_new_criterion_button)&&t.show()):(e="hide()",null!=(n=this.$add_new_criterion_button)&&n.hide()),!this.$add_new_criterion_button)return"undefined"!=typeof Raven&&null!==Raven?Raven.captureException("@$add_new_criterion_button is not defined. cannot call "+e+" [inside of determine_add_new_criterion_visibility]"):void 0},e.prototype.all_presenters_are_valid=function(){return!o.find(this.presenters,(function(e){return!e.is_valid()}))},e.prototype.switch_editing_mode=function(){return this.builder.build_hand_code_criteria(this.serialize())},e}(),l.SkipLogicHandCodeHelper=function(){function e(e,t,i,r){this.criteria=e,this.builder=t,this.view_factory=i,this.context=r,this.$parent=n("<div>"),this.textarea=this.view_factory.create_textarea(this.criteria,"skiplogic__handcode-edit"),this.button=this.view_factory.create_button('<i class="k-icon k-icon-trash"></i>',"skiplogic-handcode__cancel")}return e.prototype.render=function(e){return e.append(this.$parent),this.textarea.render().attach_to(this.$parent),this.button.render().attach_to(this.$parent),this.button.bind_event("click",(t=this,function(){return t.context.use_mode_selector_helper()}));var t},e.prototype.serialize=function(){return this.textarea.$el.val()||this.criteria},e}(),l.SkipLogicModeSelectorHelper=function(){function e(e,n){this.context=n,this.criterion_builder_button=e.create_button("<i>+</i> "+t("Add a condition"),"kobo-button kobo-button--green"),this.handcode_button=e.create_button("<i>${}</i> "+t("Manually enter your skip logic in XLSForm code"),"kobo-button kobo-button--blue")}return e.prototype.render=function(e){var t,i;return t=n("<div>"),e.append(t),this.criterion_builder_button.render().attach_to(t),this.handcode_button.render().attach_to(t),this.criterion_builder_button.bind_event("click",(i=this,function(){return i.context.view_factory.survey.trigger("change"),i.context.use_criterion_builder_helper()})),this.handcode_button.bind_event("click",function(e){return function(){return e.context.view_factory.survey.trigger("change"),e.context.use_hand_code_helper()}}(this))},e.prototype.serialize=function(){return""},e.prototype.switch_editing_mode=function(){},e}(),u={EX:(a={EXISTENCE:1,EQUALITY:2,GREATER_THAN:3,GREATER_THAN_EQ:4}).EXISTENCE,EQ:a.EQUALITY,GT:a.GREATER_THAN,GE:a.GREATER_THAN_EQ},l.question_types={default:{operators:[u.EX,u.EQ],equality_operator_type:"text",response_type:"text",name:"default"},select_one:{operators:[u.EQ,u.EX],equality_operator_type:"text",response_type:"dropdown",name:"select_one"},select_multiple:{operators:[u.EQ,u.EX],equality_operator_type:"select_multiple",response_type:"dropdown",name:"select_multiple"},integer:{operators:[u.GT,u.EX,u.EQ,u.GE],equality_operator_type:"basic",response_type:"integer",name:"integer"},barcode:{operators:[u.GT,u.EX,u.EQ,u.GE],equality_operator_type:"text",response_type:"text",name:"barcode"},decimal:{operators:[u.EX,u.EQ,u.GT,u.GE],equality_operator_type:"basic",response_type:"decimal",name:"decimal"},geopoint:{operators:[u.EX],name:"geopoint"},geotrace:{operators:[u.EX],name:"geotrace"},geoshape:{operators:[u.EX],name:"geoshape"},image:{operators:[u.EX],name:"image"},audio:{operators:[u.EX],name:"audio"},video:{operators:[u.EX],name:"video"},acknowledge:{operators:[u.EX],name:"acknowledge"},date:{operators:[u.EQ,u.GT,u.GE],equality_operator_type:"date",response_type:"text",name:"date"}},l.operator_types=[{id:1,type:"existence",label:t("Was Answered"),negated_label:t("Was not Answered"),abbreviated_label:t("Was Answered"),abbreviated_negated_label:t("Was not Answered"),parser_name:["ans_notnull","ans_null"],symbol:{ans_notnull:"!=",ans_null:"="},response_type:"empty"},{id:2,type:"equality",label:"",negated_label:t("not"),abbreviated_label:"=",abbreviated_negated_label:"!=",parser_name:["resp_equals","resp_notequals","multiplechoice_selected","multiplechoice_notselected"],symbol:{resp_equals:"=",resp_notequals:"!=",multiplechoice_selected:"=",multiplechoice_notselected:"!="}},{id:3,type:"equality",label:t("Greater Than"),negated_label:t("Less Than"),abbreviated_label:">",abbreviated_negated_label:"<",parser_name:["resp_greater","resp_less"],symbol:{resp_greater:">",resp_less:"<"}},{id:4,type:"equality",label:t("Greater Than or Equal to"),negated_label:t("Less Than or Equal to"),abbreviated_label:">=",abbreviated_negated_label:"<=",parser_name:["resp_greaterequals","resp_lessequals"],symbol:{resp_greaterequals:">=",resp_lessequals:"<="}}],l)}).call(this,i(29))},69:function(e,t,n){var i,r,s,o,a,u,l,c=function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},p={}.hasOwnProperty;a=n(20),o=n(47),u=n(399),s=n(105),i=n(59),r=n(343),e.exports=(a.extend(u.validators,{invalidChars:function(e,t,n){if(!s.Validator.__validators.invalidChars(e,n))return e+" contains invalid characters"},unique:function(e,t,n,i){var r,o;return r=i.getSurvey().rows.pluck(i.key),o=a.map(r,(function(e){return e.get("value")})),s.Validator.__validators.unique(e,o)?void 0:"Question name isn't unique"}}),a.extend(o.Model.prototype,u.mixin),(l={}).BaseCollection=function(e){function t(e,n){if(e&&"_parent"in e)throw new Error("_parent chould be assigned as property to 2nd argument to XLF.BaseCollection (not first)");n&&n._parent&&(this._parent=n._parent),t.__super__.constructor.call(this,e,n)}return c(t,e),t.prototype.getSurvey=function(){var e;for(e=this._parent;e._parent;)e=e._parent;return e},t}(o.Collection),l.BaseModel=function(e){function t(e,n){n&&"_parent"in n?this._parent=n._parent:"object"==typeof e&&"_parent"in e&&(this._parent=e._parent,delete e._parent),t.__super__.constructor.call(this,e,n)}return c(t,e),t.prototype.parse=function(){},t.prototype.linkUp=function(e){},t.prototype.finalize=function(){},t.prototype.getValue=function(e){var t;if(e){if(void 0===(t=this.get(e)))throw new Error("Could not get value");t.getValue&&(t=t.getValue())}else t=this.get("value");return t},t.prototype.setDetail=function(e,t){return t.constructor===l.RowDetail?this.set(e,t):this.set(e,new l.RowDetail({key:e,value:t},{_parent:this}))},t.prototype.parentRow=function(){return this._parent._parent},t.prototype.precedingRow=function(){var e;if(0!==(e=this._parent.models.indexOf(this)))return this._parent.at(e-1)},t.prototype.nextRow=function(){var e;return e=this._parent.models.indexOf(this),this._parent.at(e+1)},t.prototype.getSurvey=function(){var e;if(null==(e=this._parent))return null;for(;e._parent||e.collection;)if(e._parent)e=e._parent;else{if(!e.collection||!e.collection._parent)break;e=e.collection._parent}return e},t}(o.Model),l.RowDetail=function(e){function t(e,n){var s,o,u,l;this.key=e.key,o=e.value,this.validation=(u=this.validation,l=this,function(){return u.apply(l,arguments)}),this._parent=n._parent,this.key in r&&a.extend(this,r[this.key]),t.__super__.constructor.call(this),null!=o&&(s={},a.isString(o)||a.isNumber(o)?s.value=o:a.isObject(o)&&"value"in o?a.extend(s,o):s.value=o,this.set(s)),this._order=i.columnOrder(this.key),this.postInitialize()}return c(t,e),t.prototype.idAttribute="name",t.prototype.validation=function(){return"name"===this.key?{value:{unique:!0,required:!0}}:"calculation"===this.key||"label"===this.key&&"group"!==this._parent.constructor.key?{value:{required:!0}}:{}},t.prototype.postInitialize=function(){},t.prototype.initialize=function(){var e,t;if(this.get("_hideUnlessChanged")&&(this.hidden=!0,this._oValue=this.get("value"),this.on("change",(function(){return this.hidden=this.get("value")===this._oValue}))),this.on("change:value",(t=this,function(e,n,i){return t._parent.trigger("detail-change",t.key,n,i),t.getSurvey().trigger("row-detail-change",t._parent,t.key,n,i)})),"name"===(e=this.key)||"label"===e||"hint"===e||"guidance_hint"===e||"required"===e||"calculation"===e||"default"===e||"appearance"===e||"constraint_message"===e||"tags"===e||this.key.match(/^.+::.+/))return this.on("change",function(e){return function(t){return e.getSurvey().trigger("change",t)}}(this))},t}(l.BaseModel),l)},7:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));n(14);var i,r=n(4),s=n(2);(function(){var t=function(t){return e.ajax(Object(r.assign)({},{dataType:"json",method:"GET"},t))},n={a:"assets",c:"collections",p:"permissions"};Object(r.assign)(this,{selfProfile:function(){return t({url:"".concat(s.ROOT_URL,"/me/")})},apiToken:function(){return t({url:"".concat(s.ROOT_URL,"/token/?format=json")})},getUser:function(e){return t({url:e})},queryUserExistence:function(n){var i=new e.Deferred;return t({url:"".concat(s.ROOT_URL,"/api/v2/users/").concat(n,"/")}).done((function(){i.resolve(n,!0)})).fail((function(){i.reject(n,!1)})),i.promise()},logout:function(){var n=new e.Deferred;return t({url:"".concat(s.ROOT_URL,"/api-auth/logout/")}).done(n.resolve).fail((function(){i.selfProfile().done((function(e){"user is not logged in"===e.message?n.resolve(e):n.fail(e)})).fail(n.fail)})),n.promise()},patchProfile:function(e){return t({url:"".concat(s.ROOT_URL,"/me/"),method:"PATCH",data:e})},listTemplates:function(){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/?q=").concat(s.COMMON_QUERIES.t)})},getCollections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=s.COMMON_QUERIES.c;return e.owner&&(n+=" AND owner__username__exact:".concat(e.owner)),t({url:"".concat(s.ROOT_URL,"/api/v2/assets/"),dataType:"json",data:{q:n,limit:e.pageSize||100,page:e.page||0},method:"GET"})},createAssetSnapshot:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/asset_snapshots/"),method:"POST",data:e})},createTemporaryAssetSnapshot:function(e){var n=e.source;return t({url:"".concat(s.ROOT_URL,"/api/v2/asset_snapshots/"),method:"POST",data:{source:n}})},getHooks:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/"),method:"GET"})},getHook:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/"),method:"GET"})},addExternalService:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/"),method:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},updateExternalService:function(e,n,i){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/"),method:"PATCH",data:JSON.stringify(i),dataType:"json",contentType:"application/json"})},deleteExternalService:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/"),method:"DELETE"})},getHookLogs:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/logs/"),method:"GET"})},getHookLog:function(e,n,i){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/logs/").concat(i,"/"),method:"GET"})},retryExternalServiceLogs:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/retry/"),method:"PATCH"})},retryExternalServiceLog:function(e,n,i){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/hooks/").concat(n,"/logs/").concat(i,"/retry/"),method:"PATCH"})},getReportData:function(e){var n;return e.identifiers&&(n="?names=".concat(e.identifiers.join(","))),""!=e.group_by&&(n+="&split_by=".concat(e.group_by)),t({url:"".concat(s.ROOT_URL,"/reports/").concat(e.uid,"/").concat(n)})},cloneAsset:function(e){var n=e.uid,i=e.name,r=e.version_id,o=e.new_asset_type,a=e.parent,u={clone_from:n};return i&&(u.name=i),r&&(u.clone_from_version_id=r),o&&(u.asset_type=o),a&&(u.parent=a),t({method:"POST",url:"".concat(s.ROOT_URL,"/api/v2/assets/"),data:u})},postFormMedia:function(e,n){return t({method:"POST",url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/files/"),data:n})},deleteFormMedia:function(e){return t({method:"DELETE",url:e})},attachToSource:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/paired-data/"),method:"POST",data:JSON.stringify(n),contentType:"application/json"})},detachSource:function(e){return t({url:e,method:"DELETE"})},patchSource:function(e,n){return t({url:e,method:"PATCH",data:JSON.stringify(n),contentType:"application/json"})},getAttachedSources:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/paired-data/"),method:"GET"})},getSharingEnabledAssets:function(){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/?q=data_sharing__enabled:true"),method:"GET"})},patchDataSharing:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/"),method:"PATCH",data:JSON.stringify(n),contentType:"application/json"})},getPermissionsConfig:function(){return t({url:"".concat(s.ROOT_URL,"/api/v2/permissions/"),method:"GET"})},getAssetPermissions:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/permission-assignments/"),method:"GET"})},bulkSetAssetPermissions:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/permission-assignments/bulk/"),method:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},assignAssetPermission:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/permission-assignments/"),method:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},removePermission:function(e){return t({method:"DELETE",url:e})},copyPermissionsFrom:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(n,"/permission-assignments/clone/"),method:"PATCH",data:{clone_from:e}})},deleteAsset:function(e){var n=e.uid;return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(n,"/"),method:"DELETE"})},subscribeToCollection:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/asset_subscriptions/"),data:{asset:e},method:"POST"})},unsubscribeFromCollection:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/asset_subscriptions/"),data:{asset__uid:e},method:"GET"}).then((function(e){return t({url:e.results[0].url,method:"DELETE"})}))},getImportDetails:function(t){var n=t.uid;return e.getJSON("".concat(s.ROOT_URL,"/api/v2/imports/").concat(n,"/"))},getAsset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.url?e.getJSON(t.url):e.getJSON("".concat(s.ROOT_URL,"/api/v2/assets/").concat(t.id,"/?limit=").concat(100))},getAssetExports:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/exports/"),data:{ordering:"-date_created",limit:9999}})},createAssetExport:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/exports/"),method:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},getAssetExport:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/exports/").concat(n,"/"),method:"GET"})},deleteAssetExport:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/exports/").concat(n,"/"),method:"DELETE"})},getExportSettings:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/export-settings/"),data:{limit:9999}})},getExportSetting:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/export-settings/").concat(n,"/")})},updateExportSetting:function(e,n,i){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/export-settings/").concat(n,"/"),method:"PATCH",data:i})},createExportSetting:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/export-settings/"),method:"POST",data:n})},deleteExportSetting:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/export-settings/").concat(n,"/"),method:"DELETE"})},getAssetXformView:function(e){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/xform/"),dataType:"html"})},searchAssets:function(t){return t.limit=200,e.ajax({url:"".concat(s.ROOT_URL,"/api/v2/assets/"),dataType:"json",data:t,method:"GET"})},_searchAssetsWithPredefinedQuery:function(e,n){var i={q:n,limit:e.pageSize||100,offset:e.page*e.pageSize||0};return e.searchPhrase&&(i.q+=" AND (".concat(e.searchPhrase,")")),e.filterProperty&&e.filterValue&&(i.q+=" AND ".concat(e.filterProperty,":").concat(e.filterValue)),e.ordering&&(i.ordering=e.ordering),!0===e.metadata&&(i.metadata="on"),!0===e.collectionsFirst&&(i.collections_first="true"),e.status&&(i.status=e.status),t({url:"".concat(s.ROOT_URL,"/api/v2/assets/"),dataType:"json",data:i,method:"GET"})},_searchMetadataWithPredefinedQuery:function(e,n){var i={q:n,limit:e.pageSize||100,offset:e.page*e.pageSize||0};return e.searchPhrase&&(i.q+=" AND (".concat(e.searchPhrase,")")),e.filterProperty&&e.filterValue&&(i.q+=" AND ".concat(e.filterProperty,':"').concat(e.filterValue,'"')),e.ordering&&(i.ordering=e.ordering),e.status&&(i.status=e.status),t({url:"".concat(s.ROOT_URL,"/api/v2/assets/metadata/"),dataType:"json",data:i,method:"GET"})},searchMyCollectionAssets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._searchAssetsWithPredefinedQuery(e,"".concat(s.COMMON_QUERIES.qbtc," AND parent__uid:").concat(e.uid))},searchMyLibraryAssets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.COMMON_QUERIES.qbtc;return e.searchPhrase||(t+=" AND parent:null"),this._searchAssetsWithPredefinedQuery(e,t)},searchMyCollectionMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._searchMetadataWithPredefinedQuery(e,"".concat(s.COMMON_QUERIES.qbtc," AND parent__uid:").concat(e.uid))},searchMyLibraryMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.COMMON_QUERIES.qbtc;return e.searchPhrase||(t+=" AND parent:null"),this._searchMetadataWithPredefinedQuery(e,t)},searchPublicCollections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.status="public-discoverable",this._searchAssetsWithPredefinedQuery(e,s.COMMON_QUERIES.c)},searchPublicCollectionsMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.status="public-discoverable",this._searchMetadataWithPredefinedQuery(e,s.COMMON_QUERIES.c)},assetsHash:function(){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/hash/"),method:"GET"})},createResource:function(e){return t({method:"POST",url:"".concat(s.ROOT_URL,"/api/v2/assets/"),data:e})},patchAsset:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/"),method:"PATCH",data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},listTags:function(e){return t({url:"".concat(s.ROOT_URL,"/tags/"),method:"GET",data:Object(r.assign)({limit:100},e)})},loadNextPageUrl:function(e){return t({url:e,method:"GET"})},deployAsset:function(e,n){var i={active:!0},r="POST";return n&&(r="PATCH",i.version_id=e.version_id),t({method:r,url:"".concat(e.url,"deployment/"),data:i})},setDeploymentActive:function(e){var n=e.asset,i=e.active;return t({method:"PATCH",url:"".concat(n.url,"deployment/"),data:{active:i}})},createImport:function(e){var n=new FormData;return Object.keys(e).forEach((function(t){n.append(t,e[t])})),t({method:"POST",url:"".concat(s.ROOT_URL,"/api/v2/imports/"),data:n,processData:!1,contentType:!1})},getResource:function(t){var i=t.id,r=n[i[0]];return e.getJSON("".concat(s.ROOT_URL,"/").concat(r,"/").concat(i,"/"))},getSubmissions:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u="limit=".concat(n,"&start=").concat(i),l='&sort={"_id":-1}',c="";return r.length&&(l=!0===r[0].desc?'&sort={"'.concat(r[0].id,'":-1}'):'&sort={"'.concat(r[0].id,'":1}')),o.length&&(c="&fields=".concat(JSON.stringify(o))),t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/?").concat(u).concat(l).concat(c).concat(a),method:"GET"})},getSubmission:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/"),method:"GET"})},duplicateSubmission:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/duplicate/"),method:"POST"})},bulkPatchSubmissionsValues:function(e,n,i){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/bulk/"),method:"PATCH",data:{payload:JSON.stringify({submission_ids:n,data:i})}})},bulkPatchSubmissionsValidationStatus:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/validation_statuses/"),method:"PATCH",data:{payload:JSON.stringify(n)}})},bulkRemoveSubmissionsValidationStatus:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/validation_statuses/"),method:"DELETE",data:{payload:JSON.stringify(n)}})},updateSubmissionValidationStatus:function(e,n,i){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/validation_status/"),method:"PATCH",data:i})},removeSubmissionValidationStatus:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/validation_status/"),method:"DELETE"})},getSubmissionsQuery:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/?").concat(n),method:"GET"})},deleteSubmission:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/"),method:"DELETE"})},bulkDeleteSubmissions:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/bulk/"),method:"DELETE",data:{payload:JSON.stringify(n)}})},getEnketoEditLink:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/enketo/edit/?return_url=false"),method:"GET"})},getEnketoViewLink:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/data/").concat(n,"/enketo/view/"),method:"GET"})},uploadAssetFile:function(e,n){var i=new FormData;return Object.keys(n).forEach((function(e){i.append(e,n[e])})),t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/files/"),method:"POST",data:i,processData:!1,contentType:!1})},getAssetFiles:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/files/?file_type=").concat(n),method:"GET"})},deleteAssetFile:function(e,n){return t({url:"".concat(s.ROOT_URL,"/api/v2/assets/").concat(e,"/files/").concat(n,"/"),method:"DELETE"})},getHelpInAppMessages:function(){return t({url:"".concat(s.ROOT_URL,"/help/in_app_messages/"),method:"GET"})},patchHelpInAppMessage:function(e,n){return t({url:"".concat(s.ROOT_URL,"/help/in_app_messages/").concat(e,"/"),method:"PATCH",data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},setLanguage:function(e){return t({url:"".concat(s.ROOT_URL,"/i18n/setlang/"),method:"POST",data:e})},environment:function(){return t({url:"".concat(s.ROOT_URL,"/environment/")})},login:function(e){return t({url:"".concat(s.ROOT_URL,"/api-auth/login/?next=/me/"),data:e,method:"POST"})}})}).call(i={});"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(100,"DEFAULT_PAGE_SIZE","/srv/src/kpi/jsapp/js/dataInterface.es6"),__REACT_HOT_LOADER__.register(i,"dataInterface","/srv/src/kpi/jsapp/js/dataInterface.es6"))}).call(this,n(29))},78:function(e,t,n){var i,r,s,o,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=n(20),e.exports=(s={group:["begin group","end group","begin_group","end_group"],repeat:["begin repeat","end repeat","begin_repeat","end_repeat"],kobomatrix:["begin_kobomatrix","end_kobomatrix"],score:["begin score","end score","begin_score","end_score"],rank:["begin_rank","end_rank","begin rank","end rank"]},r=function(e){return s[e]||[e]},(o={}).groupable=function(){return i.flatten([r("group"),r("repeat"),r("score"),r("rank"),r("kobomatrix")])},o.groupsOrRepeats=function(){return i.flatten([r("group"),r("repeat")])},o.requiredSheetNameList=function(){return["survey"]},o.testGroupable=function(e){var t;return t=!1,a.call(s.group,e)>=0?t={type:"group"}:a.call(s.repeat,e)>=0?t={type:"repeat"}:a.call(s.score,e)>=0?t={type:"score"}:a.call(s.rank,e)>=0?t={type:"rank"}:a.call(s.kobomatrix,e)>=0&&(t={type:"kobomatrix"}),t&&t.type&&(t.begin=!e.match(/end/)),t},o.testGroupOrRepeat=function(e){return console.error("q.testGroupOrRepeat is renamed to q.testGroupable"),o.testGroupable(e)},o.hiddenTypes=function(){return i.flatten([["imei","deviceid"],["start"],["end"],["today"],["simserial"],["subscriberid"],["phonenumber","phone_number"],["audit"]])},r.q=r.custom=o,r)},883:function(e,t,n){var i=n(438).expect;window.jQuery=window.$=n(29),n(390),n(906),n(907),n(908),n(909),n(910),n(911),n(912),n(913),n(914),n(915),n(916),n(923),n(917),n(921),n(922),n(920);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"expect","/srv/src/kpi/test/index.js")},89:function(e,t,n){var i,r;i=n(438),r=i.expect,e.exports={chai:r,expect:function(e){return{toBe:function(t){return r(e).to.equal(t)},toThrow:function(t){return r(e).to.throw(t)},toBeDefined:function(){return r(e).not.to.be.a("undefined")},toContain:function(t){return r(e).to.contain(t)},toEqual:function(t){return r(e).eql(t)},toBeTruthy:function(){return r(e).to.be.ok},toBeUndefined:function(){return r(e).to.be.a("undefined")},not:{toEqual:function(t){return r(e).to.not.eql(t)},toBe:function(t){return r(e).to.not.equal(t)},toThrow:function(t){return r(e).to.not.throw(t)},toBeTruthy:function(){return r(e).to.not.be.ok},toBeDefined:function(){return r(e).to.be.a("undefined")}}}}}},906:function(e,t,n){var i,r,s;r=n(89).expect,i=n(78),e.exports=(s=function(e){if(!(e instanceof Array))throw new Error("aliases.tests:expectSorted needs an array");return e.sort(),r(e)},describe("$aliases",(function(){return describe("returns correct results from",(function(){return describe("basic queries",(function(){return it("[groups]",(function(){return s(i("group")).toEqual(["begin group","begin_group","end group","end_group"])})),it("[repeats]",(function(){return s(i("repeat")).toEqual(["begin repeat","begin_repeat","end repeat","end_repeat"])}))}))})),describe("custom queries",(function(){return it("[groupsOrRepeats]",(function(){return s(i.q.groupsOrRepeats()).toEqual(["begin group","begin repeat","begin_group","begin_repeat","end group","end repeat","end_group","end_repeat"])})),it("[groupable]",(function(){return s(i.q.groupable()).toEqual(["begin group","begin rank","begin repeat","begin score","begin_group","begin_kobomatrix","begin_rank","begin_repeat","begin_score","end group","end rank","end repeat","end score","end_group","end_kobomatrix","end_rank","end_repeat","end_score"])})),it("[availableSheetNames]",(function(){return s(i.q.requiredSheetNameList()).toEqual(["survey"])})),it("[hidden_types]",(function(){return r(i.q.hiddenTypes()).toContain("imei")})),describe("q.testGroupOrRepeat",(function(){var e;return e=function(e){return r(i.q.testGroupable(e))},it("parses group properly",(function(){return e("begin group").toEqual({type:"group",begin:!0}),e("begin_group").toEqual({type:"group",begin:!0}),e("end group").toEqual({type:"group",begin:!1}),e("end_group").toEqual({type:"group",begin:!1})})),it("parses repeat properly",(function(){return e("begin repeat").toEqual({type:"repeat",begin:!0}),e("begin_repeat").toEqual({type:"repeat",begin:!0}),e("end repeat").toEqual({type:"repeat",begin:!1}),e("end_repeat").toEqual({type:"repeat",begin:!1})}))}))}))})))},907:function(e,t,n){var i,r,s,o;o=n(89).expect,i=n(114),n(106),s=n(20),r=n(323),window._=s,e.exports=describe("model.choices",(function(){return beforeEach((function(){return this.survey=i.Survey.load({survey:[{type:"select_one yes_no",name:"yes_or_no",label:"Yes or no?"}],choices:[{"list name":"yes_no",name:"yes",label:"Yes"},{"list name":"yes_no",name:"no",label:"No"}]}),this.choices=this.survey.choices,this.yesno=this.choices.get("yes_no")})),it("has options in list",(function(){return o(this.yesno.options.length).toBe(2)})),it("can add option to a choice list",(function(){return this.yesno.options.add({name:"maybe",label:"Maybe"}),o(this.yesno.options.length).toBe(3)})),it("can remove option from a choice list",(function(){var e;return e=this.yesno.options.find((function(e){return"yes"===e.get("name")})),o(e).toBeDefined(),o(this.yesno.options.length).toBe(2),this.yesno.options.remove(e),o(this.yesno.options.length).toBe(1)})),it("exports choice list properly",(function(){return o(this.choices.toJSON()).toEqual([{name:"yes_no",options:[{name:"yes",label:"Yes"},{name:"no",label:"No"}]}])})),describe("model.choices--CASCADES",(function(){return it("cascade choice list utility methods work",(function(){var e,t,n;return n=i.Survey.load(r.cascading),o(n.choices.models.map((function(e){return e.get("name")}))).toEqual(["state","county","city"]),o(n.choices.models.map((function(e){return e._get_last_linked_choice_list().get("name")}))).toEqual(["city","city","city"]),o(n.choices.models.map((function(e){return e._get_first_linked_choice_list().get("name")}))).toEqual(["state","state","state"]),e=n.choices.get("city"),o(e.get("name")).toBe("city"),o(e._has_corresponding_row()).toEqual(!1),t=e._create_corresponding_row_data({_full_path_choice_filter:!0}),o(t).toEqual([{label:"state",type:"select_one state",choice_filter:""},{label:"county",type:"select_one county",choice_filter:"state=${state}"},{label:"city",type:"select_one city",choice_filter:"state=${state} and county=${county}"}]),t=e._create_corresponding_row_data({_full_path_choice_filter:!1}),o(t).toEqual([{label:"state",type:"select_one state",choice_filter:""},{label:"county",type:"select_one county",choice_filter:"state=${state}"},{label:"city",type:"select_one city",choice_filter:"county=${county}"}])})),it("imports a survey with a cascading choice list",(function(){var e,t,n,s,a,u,l,c,p,d;for(e=(d=i.Survey.load(r.cascading)).choices.get("city"),n=0,a=(l=d.choices.models).length;n<a;n++)t=l[n],o(t._has_corresponding_row()).toEqual(!1);for(e.create_corresponding_rows(),s=0,u=(c=d.choices.models).length;s<u;s++)t=c[s],o(t._has_corresponding_row()).toEqual(!0);return d.rows.at(0),p=d.rows.at(2),o(d.toCsvJson().choices.rowObjects.map((function(e){return e.list_name+"-"+e.name})).sort()).toEqual(["city-brownsville","city-dumont","city-finney","city-harlingen","city-puyallup","city-redmond","city-seattle","city-tacoma","county-cameron","county-king","county-king","county-pierce","state-texas","state-washington"]),o(d.toCsvJson().survey.rowObjects.map((function(e){return e.type+"-"+e.name}))).toEqual(["select_one state-state","select_one county-county","select_one city-city","start-start","end-end"]),o(p.getList().get("name")).toBe("city"),o(p.getList().getList).toBeDefined(),o(p.getList().getList()).not.toBe(null),o(p.getList().getList().get("name")).toBe("county"),o(p.getList().getList().getList().get("name")).toBe("state")}))})),describe("Choicelist",(function(){return describe("Clone method",(function(){return it("Clones itself and all of its options",(function(){var e;return(e=this.yesno.clone()).getSurvey(),o(e.options.length).toBe(2),o(e.options.at(0).get("name")).toBe("yes"),o(e.options.at(1).get("name")).toBe("no"),o(e.cid).not.toEqual(this.yesno.cid),o(e.get("name")).not.toBe(this.yesno.get("name"))}))}))}))}))},908:function(e,t,n){var i,r,s,o,a;s=n(89).expect,r=n(107),o='"type","constraint"\n"text","regex(., \'^\\S+( \\S+){4}$\' )"',describe("csv parsing",(function(){return beforeEach((function(){return window._csv=r,this.compile=function(e){return r(e).toObjects()[0]}})),it("equals",(function(){return s((function(){return r('"regex_sheet"\r\n"","col1","regexcol"\r\n"","row1","regex( \\s+ )"\r\n"regex_sheet2"\r\n"","s2col1","example2"\r\n"","s2row1","\\s\\d\\w\\S\\D\\W"\r\n')})).not.toThrow()})),it("handles simple csvs",(function(){var e;return e=this.compile("a,b,c,d\ne,f,g,h"),s(e.a).toBe("e"),s(e.b).toBe("f"),s(e.c).toBe("g"),s(e.d).toBe("h")})),it("handles csvs with quotes",(function(){var e;return e=this.compile('"a","b","c","d"\n"e","f","g","h"'),s(e.a).toBe("e"),s(e.b).toBe("f"),s(e.c).toBe("g"),s(e.d).toBe("h")})),it("imports cells with escape characters",(function(){var e;return e=this.compile(o),s(e.type).toBe("text"),s(e.constraint).toBe("regex(., '^\\S+( \\S+){4}$' )")})),it("reexports cells with escape characters",(function(){var e,t;return e=r(o).toObjects(),t=r(e).toString(),s(t).toEqual(o)}))})),i=n(157),a=i.deserialize,describe("$inputDeserializer",(function(){return beforeEach((function(){return this.sampleSurveyObj={survey:[{key1:"val1",key2:"val2",key3:"val3"}],choices:[{k4:"v4",k5:"v5"}]}})),describe(". deserialize parses csv, json, and object",(function(){return it("has deserialize method defined",(function(){return s(a).toBeDefined()})),it("parses a js object",(function(){return s(a(this.sampleSurveyObj)).toEqual(this.sampleSurveyObj)}))})),describe(".validateParse notifies validity",(function(){return beforeEach((function(){return this.validate=function(e,t,n){var r,o;if(null==t&&(t=!0),null==n&&(n=!1),r={},o=i.validateParse(e,r),s(r).toBeDefined(),s(o).toBe(t),n)return s(r.error).toEqual(n)}})),it("with just survey sheet",(function(){return this.validate({survey:[]})})),describe("but does not accept non-object parameters",(function(){return it("[string]",(function(){return this.validate("cant be a string",!1)})),it("[array]",(function(){return this.validate(["cant be an array"],!1)}))}))})),describe("deserializes and records errors",(function(){return it("when input is missing survey sheet",(function(){var e,t;return t={notSurvey:this.sampleSurveyObj.survey,choices:this.sampleSurveyObj.choices},i(t,e={validate:!0}),s(e.error).toBeDefined(),s(e.error).toContain("survey sheet")}))}))}))},909:function(e,t,n){var i,r,s;r=n(89).expect,i=n(157),n(323),s=i.deserialize,describe("$inputDeserializer",(function(){return beforeEach((function(){return this.sampleSurveyObj={survey:[{key1:"val1",key2:"val2",key3:"val3"}],choices:[{k4:"v4",k5:"v5"}]}})),describe(". deserialize parses csv, json, and object",(function(){return it("has deserialize method defined",(function(){return r(s).toBeDefined()})),it("parses a js object",(function(){return r(s(this.sampleSurveyObj)).toEqual(this.sampleSurveyObj)}))})),describe(".validateParse notifies validity",(function(){return beforeEach((function(){return this.validate=function(e,t,n){var s,o;if(null==t&&(t=!0),null==n&&(n=!1),s={},o=i.validateParse(e,s),r(s).toBeDefined(),r(o).toBe(t),n)return r(s.error).toEqual(n)}})),it("with just survey sheet",(function(){return this.validate({survey:[]})})),describe("but does not accept non-object parameters",(function(){return it("[string]",(function(){return this.validate("cant be a string",!1)})),it("[array]",(function(){return this.validate(["cant be an array"],!1)}))}))})),describe("deserializes and records errors",(function(){return it("when input is missing survey sheet",(function(){var e,t;return t={notSurvey:this.sampleSurveyObj.survey,choices:this.sampleSurveyObj.choices},i(t,e={validate:!0}),r(e.error).toBeDefined(),r(e.error).toContain("survey sheet")}))}))}))},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n(4);function r(e){return{tags:e.tag_string.split(",").filter((function(e){return 0!==e.length}))}}function s(e){var t=e.content&&e.content.settings;if(t){var n={};return Array.isArray(t)&&t.length&&(n=t[0]),{unparsed__settings:n,settings__style:n.style,settings__form_id:n.form_id,settings__title:n.title}}return{}}function o(e){return Object(i.assign)(e,s(e),r(e))}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"parseTags","/srv/src/kpi/jsapp/js/assetParserUtils.ts"),__REACT_HOT_LOADER__.register(s,"parseSettings","/srv/src/kpi/jsapp/js/assetParserUtils.ts"),__REACT_HOT_LOADER__.register(o,"parsed","/srv/src/kpi/jsapp/js/assetParserUtils.ts"))},910:function(e,t,n){var i,r,s,o;o=n(89).expect,s=n(20),n(78),r=n(114),i=n(59),n(323),describe("rank.tests",(function(){return describe("survey imports ranks >",(function(){return beforeEach((function(){return this.survey=r.Survey.load({survey:[["type","name","label","kobo--rank-items"],{type:"begin_rank",name:"koborank",label:"Label","kobo--rank-items":"needs"},["rank__level","rnk1","Rank Level 1"],["rank__level","rnk2","Rank Level 2"],{type:"end_rank"}],choices:[["list name","name","label"],["needs","food","Food"],["needs","water","Water"],["needs","shelter","Shelter"]]})})),it("can import a simple rank group",(function(){var e;return e=this.survey.rows.at(0),o(e.get("kobo--rank-items").get("value")).toBeDefined(),o(e.get("$kuid").get("value")).toBeDefined(),o(e).toBeDefined(),o(e._rankRows.length).toBe(2),e._rankRows.forEach((function(e){return o(e.get("$kuid")).toBeDefined()})),o(e._rankLevels.options.length).toBe(3)})),describe("clone a rank group",(function(){return beforeEach((function(){return this.rankRow=this.survey.rows.at(0),o(this.rankRow.get("$kuid").get("value")).toBeDefined(),o(this.rankRow.get("kobo--rank-items").get("value")).toBeDefined(),this.clonedRow=this.rankRow.clone(),this.survey._insertRowInPlace(this.clonedRow,{previous:this.rankRow})})),it("has the correct structure",(function(){var e;return o(this.survey.rows.length).toBe(2),o(this.survey.choices.length).toBe(2),e=0,this.survey.forEachRow((function(t){return e++})),o(e).toBe(6)})),it("exports to csv",(function(){var e,t,n,i,r,a;return i=(a=(n=this.survey.toCsvJson()).survey.rowObjects)[0],a[1],a[2],r=a[3],e=a[4],a[5],a[6],t=a[7],o(i.label).toEqual(e.label),o(i.$kuid).toBeDefined(),o(i.type).toEqual("begin_rank"),o(i["kobo--rank-items"]).not.toEqual(e["kobo--rank-items"]),o(r.type).toEqual("end_rank"),o(t.type).toEqual("end_rank"),o(r.$kuid).toEqual("/"+i.$kuid),o(t.$kuid).toEqual("/"+e.$kuid),o(s.pluck(n.choices.rowObjects,"name")).toEqual(["food","water","shelter","food","water","shelter"])})),it("exports to json",(function(){var e,t,n,i,r,a;return i=(a=(n=this.survey.toJSON()).survey)[0],a[1],a[2],r=a[3],e=a[4],a[5],a[6],t=a[7],o(i.label).toEqual(e.label),o(i.$kuid).toBeDefined(),o(i["kobo--rank-items"]).not.toEqual(e["kobo--rank-items"]),o(r.type).toEqual("end_rank"),o(t.type).toEqual("end_rank"),o(r.$kuid).toBeDefined(),o(t.$kuid).toBeDefined(),o(s.chain(n.choices).values().flatten().pluck("name").value()).toEqual(["food","water","shelter","food","water","shelter"])}))}))}))})),describe("score.tests",(function(){return describe("survey imports scores >",(function(){return beforeEach((function(){return this.survey=r.Survey.load({survey:[["type","name","label","kobo--score-choices"],{type:"begin score",name:"koboskore",label:"Label","kobo--score-choices":"koboskorechoices"},["score__row","skore_1","Score 1"],["score__row","skore_2","Score 2"],{type:"end score"}],choices:[["list_name","name","label"],["koboskorechoices","ok","Okay"],["koboskorechoices","not_ok","Not okay"]]})})),it("can import a simple score group",(function(){var e;return e=this.survey.rows.at(0),o(e.get("kobo--score-choices").get("value")).toBeDefined(),o(e).toBeDefined()})),it("scores can be exported",(function(){var e;return e=this.survey.toJSON(),o(e.survey.length).toBe(4),o(e.survey[0].type).toBe("begin_score"),o(e.choices).toBeDefined(),o(e.choices.koboskorechoices).toEqual([{name:"ok",label:"Okay"},{name:"not_ok",label:"Not okay"}])}))}))})),describe("group.tests",(function(){var e,t;return e=function(e){return s.first(e.rows.filter((function(e,t){return"Group"===e.constructor.name})))},t=function(e){return s.last(e.rows.filter((function(e,t){return"Group"===e.constructor.name})))},describe("survey imports groups >",(function(){return beforeEach((function(){return this.survey=r.Survey.load({survey:[["type","name","label"],["begin group","grp1","Group1"],["text","g1q1","Group1Question1"],["end group"]]})})),it("can import a simple group",(function(){var t;return t=e(this.survey),o(t).toBeDefined(),o(t.rows.length).toBe(1)})),it("can add a group to the survey",(function(){return this.survey.addRow({type:"group",name:"grp2"}),o(this.survey.rows.length).toBe(2),o(t(this.survey).rows.length).toBe(0)})),it("leaves empty group labels intact",(function(){var t,n;return n=r.Survey.load({survey:[["type","name","label"],["begin group","grp1",null],["text","g1q1","Group1Question1"],["end group"]]}),t=e(n),o(t.getValue("label")).toBe("")})),describe("groups can be exported >",(function(){return it("works with a simple group",(function(){return o(this.survey.toCSV().split("\n").length).toBe(8)})),it("works with a nested group",(function(){var e;return e=r.Survey.load({survey:[["type","name","label"],["begin group","grp1","Group1"],["text","g1q1","Grp2Question1"],["begin group","g1g2","Group1Question1"],["text","g1g2q1","Grp2Question1"],["end group"],["end group"]]}),o(e.toCSV().split("\n").length).toBe(11)}))}))})),it("can import repeats",(function(){var e;return e=r.Survey.load({survey:[["type","name","label"],["begin repeat","grp1","Group1"],["text","g1q1","Group1Question1"],["end repeat"]]}).rows.first(),o(e).toBeDefined(),o(e.constructor.name).toBe("Group"),o(e._isRepeat()).toBeTruthy()})),describe("fails on unmatched group types",(function(){return function(e,t){return o((function(){return r.Survey.load(t)})).toThrow()}})),describe("group creation",(function(){return beforeEach((function(){return this.survey=r.Survey.load({survey:[["type","name","label"],["text","q1","Q1"],["text","q2","Q2"],["text","q3","Q3"],["text","q4","Q4"],["text","q5","Q5"]]})})),describe("group naming",(function(){return beforeEach((function(){var e;return this.getNames=function(e){var t;return t=[],e.forEachRow((function(e){var n,i;return n=(null!=(i=e.get("name"))?i.get("value"):void 0)||"noname",t.push(n)}),{includeGroups:!0}),t},o(this.survey._allRows().length).toBe(5),this.rows=function(){var t,n,i,r;for(r=[],t=0,n=(i=[0,2,4]).length;t<n;t++)e=i[t],r.push(this.survey.rows.at(e));return r}.call(this)})),it("uses opts.label when not undefined",(function(){return this.survey._addGroup({label:"My Group",__rows:this.rows}),o(e(this.survey).getValue("label")).toBe("My Group")})),it("uses default label when no label is passed",(function(){return this.survey._addGroup({__rows:this.rows}),o(e(this.survey).getValue("label")).toBe(i.newGroupDetails.label.value)}))})),describe("can create group with existing rows",(function(){return beforeEach((function(){var e,t;return this.getNames=function(e){var t;return t=[],e.forEachRow((function(e){var n,i;return n=(null!=(i=e.get("name"))?i.get("value"):void 0)||"noname",t.push(n)}),{includeGroups:!0}),t},o(this.survey._allRows().length).toBe(5),t=function(){var t,n,i,r;for(r=[],t=0,n=(i=[0,2,4]).length;t<n;t++)e=i[t],r.push(this.survey.rows.at(e));return r}.call(this),this.survey._addGroup({label:"My Group",__rows:t})})),it("and has the right number of rows",(function(){return o(this.survey._allRows().length).toBe(5)})),it("has the right order of names",(function(){var e;return this.survey.finalize(),(e=this.getNames(this.survey))[0]="group_xxxxxxx",o(e).toEqual(["group_xxxxxxx","q1","q3","q5","q2","q4"])})),describe("can generate missing names on finalize",(function(){return beforeEach((function(){return this.grp=e(this.survey)})),it("and has a finalize method",(function(){return o(this.grp.finalize).toBeDefined()})),it("has the correct name",(function(){var e;return this.survey.finalize(),(e=this.getNames(this.survey))[0]="group_xxxxxxx",o(e).toEqual(["group_xxxxxxx","q1","q3","q5","q2","q4"])}))}))}))})),describe("group manipulation",(function(){return beforeEach((function(){return this.survey=r.Survey.load({survey:[["type","name","label"],["text","q1","Q1"],["begin group","grp1","Group1"],["text","g1q1","Group1Question1"],["end group"],["text","q2","Q2"]]}),this.g1=e(this.survey),this.getNames=function(e){var t;return t=[],e.forEachRow((function(e){var n,i;return n=(null!=(i=e.get("name"))?i.get("value"):void 0)||"noname",t.push(n)}),{includeGroups:!0}),t}})),it("group can be deleted",(function(){var t;return t=e(this.survey),o(this.survey._allRows().length).toBe(3),this.survey.remove(t),o(this.survey._allRows().length).toBe(2)})),it("group can be detached from parent",(function(){return o(this.getNames(this.survey)).toEqual(["q1","grp1","g1q1","q2"]),this.g1.detach(),o(this.getNames(this.survey)).toEqual(["q1","q2"])})),it("group can be split apart",(function(){return o(this.getNames(this.survey)).toEqual(["q1","grp1","g1q1","q2"]),this.g1.splitApart(),o(this.getNames(this.survey)).toEqual(["q1","g1q1","q2"])})),describe("nested group can be split apart",(function(){return beforeEach((function(){return this.survey=r.Survey.load({survey:[["type","name","label"],["begin group","grp1","Group1"],["begin group","grp2","Group1"],["text","q1","Q1"],["end group"],["end group"],["text","q2","Q2"]]}),this.g1=e(this.survey),this.g2=this.g1.rows.at(0)})),it("is set up",(function(){return o(this.g2.constructor.key).toEqual("group"),o(this.getNames(this.survey)).toEqual(["grp1","grp2","q1","q2"])})),it("can break apart outer group",(function(){return this.g1.splitApart(),o(this.getNames(this.survey)).toEqual(["grp2","q1","q2"])})),it("can break apart outer group",(function(){return this.g2.splitApart(),o(this.getNames(this.survey)).toEqual(["grp1","q1","q2"])}))}))}))})),describe("kuids",(function(){var e;return e={group:function(){return{survey:[["type","name","label","$kuid"],{type:"begin_group",name:"grp",label:"Group",$kuid:"abc"},["note","n1","Note 1","def"],{type:"end_group",$kuid:"/abc (never parsed)"}]}},rank:function(){return{survey:[["type","name","label","$kuid"],{type:"begin_rank",name:"koborank",label:"Label","kobo--rank-items":"needs",$kuid:"abc"},["rank__level","rnk1","Rank Level 1","def"],["rank__level","rnk2","Rank Level 2","ghi"],{type:"end_rank",$kuid:"/abc (never parsed)"}],choices:[["list_name","name","label","$kuid"],["needs","food","Food","mno"],["needs","water","Water","pqr"],["needs","shelter","Shelter","stu"]]}},score:function(){return{survey:[["type","name","label","$kuid"],{type:"begin_score",name:"koboscore",label:"Label","kobo--score-choices":"scores",$kuid:"abcd"},["score__row","sc1","Rank Level 1","efgh"],{type:"end_score",$kuid:"/abcd (never parsed)"}],choices:[["list_name","name","label","$kuid"],["scores","bad","Bad","mnop"],["scores","ok","Ok","qrst"],["scores","good","Good","uvwx"]]}}},describe("passed to export",(function(){return it("for group",(function(){var t,n,i,s;return t=(s=r.Survey.load(e.group()).toFlatJSON().survey)[0],n=s[1],i=s[2],o(t.$kuid).toEqual("abc"),o(n.$kuid).toEqual("def"),o(i.$kuid).toEqual("/abc")})),it("for rank survey",(function(){var t,n,i,s,a,u,l,c,p;return p=r.Survey.load(e.rank()),i=(l=(n=p.toFlatJSON()).survey)[0],s=l[1],a=l[2],u=l[3],o(i.$kuid).toEqual("abc"),o(s.$kuid).toEqual("def"),o(a.$kuid).toEqual("ghi"),o(u.$kuid).toEqual("/abc"),(c=n.choices)[0],c[1],c[2],c[3],o(function(){var e,i,r,s;for(s=[],e=0,i=(r=n.choices).length;e<i;e++)t=r[e],s.push(t.$kuid);return s}()).toEqual(["mno","pqr","stu"])})),it("for score survey",(function(){var t,n,i,s,a,u,l,c;return c=r.Survey.load(e.score()),i=(u=(n=c.toFlatJSON()).survey)[0],s=u[1],a=u[2],u[3],o(i.$kuid).toEqual("abcd"),o(s.$kuid).toEqual("efgh"),o(a.$kuid).toEqual("/abcd"),(l=n.choices)[0],l[1],l[2],o(function(){var e,i,r,s;for(s=[],e=0,i=(r=n.choices).length;e<i;e++)t=r[e],s.push(t.$kuid);return s}()).toEqual(["mnop","qrst","uvwx"])}))})),describe("preserved from import",(function(){return it("for group",(function(){var t;return t=r.Survey.load(e.group()).rows.at(0),o(t.isGroup()).toBeTruthy(),o(t.getValue("$kuid")).toEqual("abc"),o(t.rows.at(0).getValue("$kuid")).toEqual("def")})),it("for rank survey",(function(){var t,n,i;return n=(t=r.Survey.load(e.rank()).rows.at(0))._rankRows.at(0),i=t._rankRows.at(1),o(t.getValue("$kuid")).toBe("abc"),o(n.attributes.$kuid).toBe("def"),o(i.attributes.$kuid).toBe("ghi")})),it("for score survey",(function(){var t,n,i,s,a,u,l;return s=(l=r.Survey.load(e.score())).rows.at(0),o(s.getValue("$kuid")).toBe("abcd"),a=s._scoreRows.at(0),o(a.attributes.$kuid).toBe("efgh"),t=(u=l.choices.at(0).options.models)[0],n=u[1],i=u[2],o(t.getValue("$kuid")).toEqual("mnop"),o(n.getValue("$kuid")).toEqual("qrst"),o(i.getValue("$kuid")).toEqual("uvwx")}))}))}))},911:function(e,t,n){var i,r,s,o;o=n(89).expect,r=n(158),i=n(106),s=n(323),describe('" $inputParser',(function(){return beforeEach((function(){return this.sampleSurveyObj={survey:[{key1:"val1",key2:"val2",key3:"val3"}],choices:[{k4:"v4",k5:"v5"}]}})),describe('. loadChoiceLists()"',(function(){var e;return e=new i.ChoiceList,r.loadChoiceLists(s.pizza_survey.main().choices,e)})),describe('. parse()"',(function(){return describe(" translated surveys",(function(){return it("flattens translated lists 1",(function(){var e;return e=r.parseArr("survey",[{type:"text",name:"q1",label:["q1x","q1null"]},{type:"text",name:"q2",label:["q2x","q2null"]}],["lx",null]),o(e).toEqual([{type:"text",name:"q1","label::lx":"q1x",label:"q1null"},{type:"text",name:"q2","label::lx":"q2x",label:"q2null"}])})),it("flattens translated lists 2",(function(){var e,t,n,i,s,a,u,l;for(l=["lx","ly"],a=r.parseArr("survey",[{type:"text",name:"q1",label:["q1x","q1y"]},{type:"text",name:"q2",label:["q2x","q2y"]}],l),e=[{type:"text",name:"q1","label::lx":"q1x","label::ly":"q1y"},{type:"text",name:"q2","label::lx":"q2x","label::ly":"q2y"}],u=[],n=0,i=(s=[0,1]).length;n<i;n++)t=s[n],u.push(o(a[t]).toEqual(e[t]));return u}))})),it("parses group hierarchy",(function(){var e;return e=r.parseArr("survey",[{type:"begin group",name:"grp1"},{type:"text",name:"q1"},{type:"end group"}]),o(e).toEqual([{type:"group",name:"grp1",__rows:[{type:"text",name:"q1"}]}])})),it("parses scoring questions",(function(){var e;return e=r.parseArr("survey",[{type:"begin score",name:"koboskore",label:"Label"},{type:"end score"}]),o(e).toEqual([{type:"score",name:"koboskore",label:"Label",__rows:[]}])})),it("parses nested groups hierarchy",(function(){var e;return e=r.parseArr("survey",[{type:"begin group",name:"grp1",$kuid:"aaa"},{type:"begin group",name:"grp2",$kuid:"bbb"},{type:"text",name:"q1",$kuid:"ccc"},{type:"text",name:"q2",$kuid:"ddd"},{type:"end group",$kuid:"eee"},{type:"end group",$kuid:"fff"}]),o(e).toEqual([{type:"group",name:"grp1",$kuid:"aaa",__rows:[{type:"group",name:"grp2",$kuid:"bbb",__rows:[{type:"text",name:"q1",$kuid:"ccc"},{type:"text",name:"q2",$kuid:"ddd"}]}]}])})),it("parses non-grouped list of questions",(function(){var e;return e=r.parseArr("survey",[{type:"text",name:"q1"},{type:"text",name:"q2"}]),o(e).toEqual([{type:"text",name:"q1"},{type:"text",name:"q2"}])}))}))}))},912:function(e,t,n){var i,r,s;s=n(89).expect,i=n(158),r=n(114),describe("translations",(function(){var e;return e=function(e){var t;return t=i.parse(e),new r.Survey(t)},it("should not allow editing form with unnamed translation",(function(){return s((function(){return e({survey:[{type:"text",label:["Ciasto?","Pizza?"],name:"Pizza survey"}],translations:["polski (pl)",null]})})).toThrow('There is an unnamed translation in your form definition.\nPlease give a name to all translations in your form.\nUse "Manage Translations" option from form landing page.')}))}))},913:function(e,t,n){var i,r,s,o,a,u,l;u=n(89).expect,a=n(20),i=n(306),l=function(e){return beforeEach((function(){var t;return this.pizzaSurvey=e.Survey.load(o),this.createSurveyCsv=function(e,t){var n;return null==e&&(e=[]),null==t&&(t=[]),n=0===t.length?"":"choices,,,\n,list name,name,label\n,"+t.join("\n,"),"survey,,,\n,type,name,label,hint\n,"+e.join("\n,")+"\n"+n},this.createSurvey=(t=this,function(n,i){return null==n&&(n=[]),null==i&&(i=[]),e.Survey.load(t.createSurveyCsv(n,i))}),this.firstRow=function(e){return e.rows.at(0)},this.compareCsvs=function(e,t){var n,i,r,s,o,l;for(o=e.split("\n"),l=t.split("\n"),n=0,i=(s=a.min([o.length,l.length])).length;n<i;n++)r=s[n],u(o[r]).toBe(l[r]);return u(e).toBe(t)},this.dumpAndLoad=function(t){return function(n){var i,r;return i=e.Survey.load(n).toCSV(),r=e.Survey.load(i).toCSV(),t.compareCsvs(i,r)}}(this)})),it("creates xlform",(function(){var t;return t=new e.Survey({name:"Sample"}),u(t).toBeDefined(),u(t instanceof e.Survey).toBe(!0),u(t.get("name")).toBe("Sample")})),it("ensures every node has access to the parent survey",(function(){return this.pizzaSurvey.getSurvey})),it("can append a survey to another",(function(){var e;return e=this.createSurvey(["text,q1,Question1,q1hint","text,q2,Question2,q2hint"]),u(e.rows.length).toBe(2),u(this.pizzaSurvey.rows.length).toBe(1),e.insertSurvey(this.pizzaSurvey),u(e.rows.length).toBe(3),u(e.rows.at(2).getValue("name")).toBe("likes_pizza")})),it("can import from csv_repr",(function(){var e;return u(this.pizzaSurvey.rows.length).toBe(1),e=this.pizzaSurvey.rows.at(0),u(e.getValue("name")).toEqual("likes_pizza")})),describe("with simple survey",(function(){return beforeEach((function(){return this.firstRow=this.pizzaSurvey.rows.at(0)})),describe("lists",(function(){return it("iterates over every row",(function(){return u(this.pizzaSurvey.rows).toBeDefined(),u(this.firstRow).toBeDefined()})),it("can add a list as an object",(function(){var e,t;return u(this.pizzaSurvey.choices.length).toBe(1),this.pizzaSurvey.choices.add(s.gender),u(this.pizzaSurvey.choices.length).toBe(2),e=this.pizzaSurvey.toCsvJson(),this.pizzaSurvey.choices.add(s.yes_no),u(this.pizzaSurvey.choices.length).toBe(2),t=this.pizzaSurvey.toCsvJson(),u(e).toEqual(t)})),it("can add row to a specific index",(function(){var e,t;return u(this.pizzaSurvey.addRowAtIndex).toBeDefined(),t=this.pizzaSurvey.rows.length,u(this.pizzaSurvey.rows.length).toBe(1),this.pizzaSurvey.addRowAtIndex({name:"lastrow",label:"last row",type:"text"},t),u(this.pizzaSurvey.rows.length).toBe(2),u(this.pizzaSurvey.rows.last().get("label").get("value")).toBe("last row"),this.pizzaSurvey.addRowAtIndex({name:"firstrow",label:"first row",type:"note"},0),u(this.pizzaSurvey.rows.length).toBe(3),u(this.pizzaSurvey.rows.first().get("label").get("value")).toBe("first row"),this.pizzaSurvey.addRowAtIndex({name:"secondrow",label:"second row",type:"note"},1),u(this.pizzaSurvey.rows.length).toBe(4),u(this.pizzaSurvey.rows.at(1).get("label").get("value")).toBe("second row"),e=a.map(this.pizzaSurvey.rows.pluck("label"),(function(e){return e.get("value")})),u(e).toEqual(["first row","second row","Do you like pizza?","last row"])}))})),it("row types changing is trackable",(function(){var e,t;return u(this.firstRow.getValue("type")).toBe("select_one yes_no"),t=this.firstRow.get("type"),u(t.get("typeId")).toBe("select_one"),u(t.get("list").get("name")).toBe("yes_no"),e=this.firstRow.getList(),u(e).toBeDefined(),u(e.get("name")).toBe("yes_no")}))})),describe("with custom surveys",(function(){return beforeEach((function(){var t;return this.createSurveyCsv=function(e,t){var n;return null==e&&(e=[]),null==t&&(t=[]),n=0===t.length?"":"choices,,,\n,list name,name,label\n,"+t.join("\n,"),"survey,,,\n,type,name,label,hint\n,"+e.join("\n,")+"\n"+n},this.createSurvey=(t=this,function(n,i){return null==n&&(n=[]),null==i&&(i=[]),e.Survey.load(t.createSurveyCsv(n,i))}),this.firstRow=function(e){return e.rows.at(0)},this.compareCsvs=function(e,t){var n,i,r,s,o,l;for(o=e.split("\n"),l=t.split("\n"),n=0,i=(s=a.min([o.length,l.length])).length;n<i;n++)r=s[n],u(o[r]).toBe(l[r]);return u(e).toBe(t)},this.dumpAndLoad=function(t){return function(n){var i,r;return i=e.Survey.load(n).toCSV(),r=e.Survey.load(i).toCSV(),t.compareCsvs(i,r)}}(this)})),it("breaks with an unk qtype",(function(){})),it("exports and imports without breaking",(function(){})),it("reflects correct required value",(function(){var t;return u((t=function(t){return e.Survey.loadDict({survey:[{type:"text",name:"nm",required:t}]}).toFlatJSON().survey[0].required})("true")).toEqual("true"),u(t("TRUE")).toEqual("true"),u(t("yes")).toEqual("true"),u(t("YES")).toEqual("true"),u(t(!0)).toEqual("true"),u(t("false")).toEqual("false"),u(t("FALSE")).toEqual("false"),u(t("NO")).toEqual("false"),u(t("no")).toEqual("false"),u(t(!1)).toEqual("false"),u(t(void 0)).toEqual("false"),u(t("")).toEqual("false")}))})),describe("test start questions",(function(){return beforeEach((function(){return this.srv=e.Survey.loadDict({survey:[{type:"start",name:"start"}]})})),it("loads start meta question",(function(){var e;return e=this.srv.surveyDetails.get("start"),u(e.get("name")).toEqual("start"),u(e.get("value")).toEqual(!0)}))})),describe("test background-audio questions",(function(){return beforeEach((function(){return this.srv=e.Survey.loadDict({survey:[{type:"background-audio",name:"background-audio"}]})})),it("loads background-audio with parameters",(function(){var t;return t=e.Survey.loadDict({survey:[{type:"background-audio",name:"background-audio",parameters:"quality=99"}]}).toJSON(),u(t.survey[0].parameters).toEqual("quality=99")})),it("loads bg audio meta question",(function(){var e;return e=this.srv.surveyDetails.get("background-audio"),u(e.get("name")).toEqual("background-audio"),u(e.get("value")).toEqual(!0)})),it("when value is false (un-checked in the interace), no row is added",(function(){var e;return this.srv.surveyDetails.get("background-audio").set("value",!1),e=this.srv.toJSON(),u(e.survey.length).toEqual(0)})),it("exports to json properly",(function(){var e;return e=this.srv.toJSON(),u(e.survey[0].type).toEqual("background-audio"),u(e.survey[0].name).toEqual("background-audio")})),it("captures required values",(function(){var t;return t=e.Survey.loadDict({survey:[{type:"text",name:"q1",required:!0},{type:"text",name:"q2",required:!1}]}).toJSON(),u(t.survey[0].required).toEqual("true"),u(t.survey[1].required).toEqual("false")})),it("tries a few question types",(function(){var e,t;e=(t=this.createSurvey(["text,text,text,text"]).rows.at(0)).get("type"),u(e.get("rowType").name).toBe("text"),e=(t=this.createSurvey(['"select_multiple x",a,a,a'],["x,ax,ax","x,bx,bx,","y,ay,ay","y,by,by"]).rows.at(0)).get("type"),u(e.get("typeId")).toBe("select_multiple"),u(e.get("list").get("name")).toBe("x"),u(t.getList().get("name")).toBe("x"),e.set("value","select_multiple y"),u(e.get("typeId")).toBe("select_multiple"),u(e.get("list").get("name")).toBe("y"),u(t.toJSON().type).toBe("select_multiple y"),u(t.getList().get("name")).toBe("y"),t.get("type").set("value","text"),u(t.get("type").get("value")).toBe("text"),u(t.get("type").get("list").get("name")).toBeDefined(),u(t.getList().get("name")).toBeDefined(),u(t.toJSON().type).toBe("text")}))})),describe("groups",(function(){return it("cannot add a group by adding a row type=group",(function(){var t;return this.pizzaSurvey.addRow({type:"text",name:"pizza",hint:"pizza",label:"pizza"}),u(this.pizzaSurvey.rows.last()instanceof e.Row).toBe(!0),u(this.pizzaSurvey.rows.length).toBe(2),this.pizzaSurvey.addRow({type:"group",name:"group"}),u(this.pizzaSurvey.rows.length).toBe(3),t=this.pizzaSurvey.rows.last(),u(t instanceof e.BaseRow).toBe(!0)})),it("exports group to json",(function(){var t,n,i,r,s;for(this.pizzaSurvey.addRow({type:"text",name:"pizza",hint:"pizza",label:"pizza"}),u(this.pizzaSurvey.rows.last()instanceof e.Row).toBe(!0),u(this.pizzaSurvey.rows.length).toBe(2),this.pizzaSurvey.addRow({type:"group",name:"group"}),u(this.pizzaSurvey.rows.length).toBe(3),this.pizzaSurvey.rows.last(),r=[],t=0,i=(s=this.pizzaSurvey.toFlatJSON().survey.map((function(e){return e.$kuid}))).length;t<i;t++)n=s[t],r.push(u(n).toBeDefined());return r}))})),describe("automatic naming",(function(){return it("can import questions without names",(function(){var e,t;return t=this.createSurvey(['text,,"Label with no name"']),u(null!=(e=t.rows.at(0))?e.get("name").getValue():void 0).not.toBeTruthy()})),it("can finalize survey and generate names",(function(){var e,t,n;return n=this.createSurvey(['text,,"Label with no name"']),u(null!=(e=n.rows.at(0))?e.get("name").getValue():void 0).not.toBeTruthy(),n.rows.at(0).finalize(),u(null!=(t=n.rows.at(0))?t.get("name").getValue():void 0).toBe("Label_with_no_name")})),it("increments names that are already taken",(function(){var e,t,n;return n=this.createSurvey(['text,question_one,"already named question_one"','text,,"question one"']),u(null!=(e=n.rows.at(0))?e.get("name").getValue():void 0).toBe("question_one"),u(null!=(t=n.finalize().rows.at(1))?t.get("name").getValue():void 0).toBe("question_one_001")}))})),describe("lists",(function(){return it("can change a list for a question",(function(){var e,t,n;return this.pizzaSurvey.choices.add({name:"yes_no_maybe"}),n=this.pizzaSurvey.choices.get("yes_no_maybe"),u(n).toBeDefined(),e=this.pizzaSurvey.rows.first(),u(e.getList().get("name")).toBe("yes_no"),u(e.getList().get("name")).toBe("yes_no"),e.setList(n),u(e.getList().get("name")).toBe("yes_no_maybe"),e.setList("yes_no"),u(e.getList().get("name")).toBe("yes_no"),u((function(){return e.setList("nonexistant_list")})).toThrow(),e.getList().set("name","no_yes"),u(e.getList()).toBeDefined(),u(null!=(t=e.getList())?t.get("name"):void 0).toBe("no_yes")})),it("can change options for a list",(function(){var e,t;return e=this.pizzaSurvey.choices.get("yes_no"),u(e.options).toBeDefined(),this.pizzaSurvey.choices.add({name:"yes_no_maybe"}),t=this.pizzaSurvey.choices.get("yes_no_maybe"),u(t).toBeDefined(),u(t.options.length).toBe(0),t.options.add({name:"maybe",label:"Maybe"}),t.options.add([{name:"yes",label:"Yes"},{name:"no",label:"No"}]),u(t.options.length).toBe(3)}))})),describe("census xlform",(function(){return beforeEach((function(){return this.census=e.Survey.load(r)})),it("looks good",(function(){return u(this.census).toBeDefined()}))}))},o="survey,,,\n,type,name,label\n,select_one yes_no,likes_pizza,Do you like pizza?\nchoices,,,\n,list name,name,label\n,yes_no,yes,Yes\n,yes_no,no,No",r='"survey","type","name","label"\n,"integer","q1","How many people were living or staying in this house, apartment, or mobile home on April 1, 2010?"\n,"select_one yes_no","q2","Were there any additional people staying here April 1, 2010 that you did not include in Question 1?"\n,"select_one ownership_type or_other","q3","Is this house, apartment, or mobile home: owned with mortgage, owned without mortgage, rented, occupied without rent?"\n,"text","q4","What is your telephone number?"\n,"text","q5","Please provide information for each person living here. Start with a person here who owns or rents this house, apartment, or mobile home. If the owner or renter lives somewhere else, start with any adult living here. This will be Person 1. What is Person 1\'s name?"\n,"select_one male_female","q6","What is Person 1\'s sex?"\n,"date","q7","What is Person 1\'s age and Date of Birth?"\n,"text","q8","Is Person 1 of Hispanic, Latino or Spanish origin?"\n,"text","q9","What is Person 1\'s race?"\n,"select_one yes_no","q10","Does Person 1 sometimes live or stay somewhere else?"\n"choices","list name","name","label"\n,"yes_no","yes","Yes"\n,"yes_no","no","No"\n,"male_female","male","Male"\n,"male_female","female","Female"\n,"ownership_type","owned_with_mortgage","owned with mortgage",\n,"ownership_type","owned_without_mortgage","owned without mortgage"\n,"ownership_type","rented","rented"\n,"ownership_type","occupied_without_rent","occupied without rent"\n"settings"\n,"form_title","form_id"\n,"Census Questions (2010)","census2010"',s={yes_no:{name:"yes_no",options:[{"list name":"yes_no",name:"yes",label:"Yes"},{"list name":"yes_no",name:"no",label:"No"}]},gender:{name:"gender",options:[{"list name":"gender",name:"f",label:"Female"},{"list name":"gender",name:"m",label:"Male"}]}},describe("xlform survey model",(function(){return l.call(this,i)}))},914:function(e,t,n){var i,r,s;r=n(89).expect,i=n(306),(s={}).group="survey,,,\n,type,name,label\n,text,q1,Question1\n,begin group,grp,\n,text,g1q1,Group1Question1\n,text,g1q2,Group1Question2\n,end group,,",s.iterateOver="survey,,,\n,type,name,label\n,text,q1,Question1\n,begin group,grp,\n,text,g1q1,Group1Question1\n,text,g1q2,Group1Question2\n,end group,,\n,text,q8,Question8\n,text,q9,Question9\n,err,err,err",s.singleQ="survey,,,\n,type,name,label\n,text,q1,Question1",s.withChoices="survey,,,\n,type,name,label\n,select_one yesno,yn,YesNo\nchoices,,,\n,list name,label,name\n,yesno,Yes,yes\n,yesno,No,no",describe("survey.tests: Row content",(function(){return it("properly sluggifies row labels",(function(){var e,t;return(t=new i.Survey).rows.add({type:"text",label:"how many people?"}),r(t.rows.length).toBe(1),e=t.rows.at(0),r(e.get("name").get("value")).toBe(""),r(e.get("label").get("value")).toBe("how many people?"),e.finalize(),r(e.get("name").get("value")).toBe("how_many_people")}))})),describe("survey.tests: Row types",(function(){return beforeEach((function(){return window.xlfHideWarnings=!0,this.survey=new i.Survey})),afterEach((function(){return window.xlfHideWarnings=!1})),describe("populates default values properly",(function(){return beforeEach((function(){var e;return this.populateRow=(e=this,function(t){return null==t&&(t={}),e.survey.rows.add(t),e.row=e.survey.rows.at(0)}),this.expectValue=function(e){return r(this.row.get(e).get("value"))}})),it("text is required",(function(){return this.populateRow({type:"text"}),this.expectValue("required").toBe(!1)})),it("select one is required",(function(){return this.populateRow({type:"select_one"}),this.expectValue("required").toBe(!1)})),it("integer is required",(function(){return this.populateRow({type:"integer"}),this.expectValue("required").toBe(!1)})),it("geopoint is not required",(function(){return this.populateRow({type:"geopoint"}),this.expectValue("required").toBe(!1)})),it("geotrace is not required",(function(){return this.populateRow({type:"geotrace"}),this.expectValue("required").toBe(!1)})),it("geoshape is not required",(function(){return this.populateRow({type:"geoshape"}),this.expectValue("required").toBe(!1)})),it("note is not required",(function(){return this.populateRow({type:"note"}),this.expectValue("required").toBe(!1)}))})),it("has a valid empty survey",(function(){return r(this.survey.toCSV()).toBeDefined()})),it("can add rows to the survey",(function(){return this.survey.rows.add({type:"text",name:"q1"}),r(this.survey.rows.at(0).toJSON().name).toBe("q1"),this.survey.rows.add({type:"_errortype",name:"q2"}),r(this.survey.rows.at(1).toJSON().type).toBe("_errortype"),this.survey.rows.add({type:"note",name:"q3"}),r(this.survey.rows.at(2).toJSON().type).toBe("note")}))})),describe("Survey load",(function(){return beforeEach((function(){var e;return this._load_csv=(e=this,function(t){return e.survey=i.Survey.load(t)}),this._load_md=function(e){return function(t){return e.survey=i.Survey.load.md(t)}}(this),this.expectKeys=function(e,t){var n;return r(function(){var i,r,s;for(s=[],i=0,r=t.length;i<r;i++)n=t[i],s.push(e[n]);return s}())}})),it("loads a single question survey",(function(){return this._load_csv(s.singleQ),this.expectKeys(this.survey.toCsvJson().survey.rowObjects[0],["type","name","label"]).toEqual(["text","q1","Question1"])})),it("loads a multiple choice survey",(function(){var e,t,n,i,o;for(this._load_csv(s.withChoices),t=0,n=(i=(e=this.survey.toJSON()).survey).length;t<n;t++)o=i[t],r(o.$kuid).toBeDefined(),delete o.$kuid;return r(e).toEqual({survey:[{type:"select_one",select_from_list_name:"yesno",name:"yn",label:"YesNo",required:"false"}],choices:{yesno:[{label:"Yes",name:"yes"},{label:"No",name:"no"}]}})})),describe("survey row reordering",(function(){return beforeEach((function(){return this.surveyNames=function(){var e,t;return t=[],e=function(e){return t.push(e.get("name").get("value"))},this.survey.forEachRow(e,{includeGroups:!0}),t}})),it("can switch ABC -> ACB",(function(){var e,t,n,i;return this._load_csv("survey,,,\n,type,name,label\n,text,qa,QuestionA\n,text,qb,QuestionB\n,text,qc,QuestionC"),r(this.surveyNames()).toEqual(["qa","qb","qc"]),t=(i=this.survey.rows.models)[0],i[1],n=i[2],e=t._parent,this.survey._insertRowInPlace(n,{previous:t}),r(n._parent).toBe(e),r(this.surveyNames()).toEqual(["qa","qc","qb"])}))})),describe("forEachRow iterator tests",(function(){return beforeEach((function(){return window.xlfHideWarnings=!0,this._load_csv(s.iterateOver),this.getProp=function(e,t){return function(n){var i;return t.push(null!=(i=n.get(e))?i.get("value"):void 0)}}})),afterEach((function(){return window.xlfHideWarnings=!1})),it("runs normally",(function(){var e;return this.survey.forEachRow(this.getProp("name",e=[])),r(e).toEqual("q1 g1q1 g1q2 q8 q9".split(" "))})),it("runs flat",(function(){var e,t;return t={flat:!0},this.survey.forEachRow(this.getProp("name",e=[]),t),r(e).toEqual("q1 q8 q9".split(" "))})),it("runs with includeGroups",(function(){var e,t;return t={includeGroups:!0},this.survey.forEachRow(this.getProp("name",e=[]),t),r(e).toEqual("q1 grp g1q1 g1q2 q8 q9".split(" "))})),it("runs with includeGroups",(function(){var e,t;return t={includeGroups:!0},this.survey.forEachRow(this.getProp("name",e=[]),t),r(e).toEqual("q1 grp g1q1 g1q2 q8 q9".split(" "))})),it("runs with includeErrors",(function(){var e,t;return t={includeErrors:!0},this.survey.forEachRow(this.getProp("name",e=[]),t),r(e).toEqual("q1 g1q1 g1q2 q8 q9 err".split(" "))}))}))})),describe("survey.tests: form_id auto-naming",(function(){return describe("initialization",(function(){return it("enables auto-naming when form is new",(function(){var e;return e=new i.Survey,r(e.settings.auto_name).toBe(!0)}))})),describe("change:form_id",(function(){return it("disables auto naming when changed manually",(function(){var e;return(e=new i.Settings).enable_auto_name(),e.set("form_id","test"),r(e.auto_name).toBe(!1)})),it("ignores when changed as part of a title change",(function(){var e;return(e=new i.Settings).enable_auto_name(),e.set("form_title","test"),r(e.auto_name).toBe(!0)}))})),describe("change:form_title",(function(){return it("sets the form id when form in auto naming mode",(function(){var e;return(e=new i.Settings).enable_auto_name(),e.set("form_title","test"),r(e.get("form_id")).toBe("test")})),it("sluggifies label before setting id",(function(){var e;return(e=new i.Settings).enable_auto_name(),e.set("form_title","test me"),r(e.get("form_id")).toBe("test_me")}))}))})),describe("survey.tests: prep_cols",(function(){return it("flattens and deduplicates arrays of strings",(function(){var e;return e=new i.Survey,r(e.prepCols([["a","b"],["b","c"],["e","a","d"]])).toEqual(["a","b","c","e","d"])})),it("excludes passed array of strings from result",(function(){var e;return e=new i.Survey,r(e.prepCols([["a","b"],["b","c"],["e","a","de"]],{exclude:["de"]})).toEqual(["a","b","c","e"])})),it("add passed string to result",(function(){var e;return e=new i.Survey,r(e.prepCols([["a","b"],["b","c"],["e","a","de"]],{exclude:["de"],add:["abc"]})).toEqual(["a","b","c","e","abc"])}))}))},915:function(e,t,n){var i,r,s,o;r=n(89).expect,i=n(40),o=[["list_name","name","label","state","county"],["state","texas","Texas",""],["state","washington","Washington",""],["county","king 1","King","washington",""],["county","pierce","Pierce","washington",""],["county","king 2","King","texas",""],["county","cameron","Cameron","texas",""],["city","dumont","Dumont","texas","king 2"],["city","finney","Finney","texas","king 2"],["city","brownsville","brownsville","texas","cameron"],["city","harlingen","harlingen","texas","cameron"],["city","seattle","Seattle","washington","king 1"],["city","redmond","Redmond","washington","king 1"],["city","tacoma","Tacoma","washington","pierce"],["city","puyallup","Puyallup","washington","pierce"]].map((function(e){return e.join("\t")})).join("\n"),s=JSON.parse('[\n    {\n        "list_name": "state",\n        "name": "texas",\n        "label": "Texas"\n    },\n    {\n        "list_name": "state",\n        "name": "washington",\n        "label": "Washington"\n    },\n    {\n        "list_name": "county",\n        "name": "king 1",\n        "label": "King",\n        "state": "washington"\n    },\n    {\n        "list_name": "county",\n        "name": "pierce",\n        "label": "Pierce",\n        "state": "washington"\n    },\n    {\n        "list_name": "county",\n        "name": "king 2",\n        "label": "King",\n        "state": "texas"\n    },\n    {\n        "list_name": "county",\n        "name": "cameron",\n        "label": "Cameron",\n        "state": "texas"\n    },\n    {\n        "list_name": "city",\n        "name": "dumont",\n        "label": "Dumont",\n        "state": "texas",\n        "county": "king 2"\n    },\n    {\n        "list_name": "city",\n        "name": "finney",\n        "label": "Finney",\n        "state": "texas",\n        "county": "king 2"\n    },\n    {\n        "list_name": "city",\n        "name": "brownsville",\n        "label": "brownsville",\n        "state": "texas",\n        "county": "cameron"\n    },\n    {\n        "list_name": "city",\n        "name": "harlingen",\n        "label": "harlingen",\n        "state": "texas",\n        "county": "cameron"\n    },\n    {\n        "list_name": "city",\n        "name": "seattle",\n        "label": "Seattle",\n        "state": "washington",\n        "county": "king 1"\n    },\n    {\n        "list_name": "city",\n        "name": "redmond",\n        "label": "Redmond",\n        "state": "washington",\n        "county": "king 1"\n    },\n    {\n        "list_name": "city",\n        "name": "tacoma",\n        "label": "Tacoma",\n        "state": "washington",\n        "county": "pierce"\n    },\n    {\n        "list_name": "city",\n        "name": "puyallup",\n        "label": "Puyallup",\n        "state": "washington",\n        "county": "pierce"\n    }\n]'),describe("model.utils",(function(){return describe("pasted",(function(){var e;return e=function(e,t){return r(_.keys(e).sort().join(",")).toEqual(_.keys(t).sort().join(",")),r(_.values(e).sort().join(",")).toEqual(_.values(t).sort().join(","))},it("splits pasted code into appropriate chunks",(function(){var t,n,a,u,l;for(l=i.split_paste(o),r(l.length).toEqual(s.length),u=[],t=n=0,a=l.length;0<=a?n<=a:n>=a;t=0<=a?++n:--n)u.push(e(l[t],s[t]));return u}))})),describe("sluggify",(function(){return it("lowerCases: true",(function(){return r(i.sluggify("TESTING LOWERCASE TRUE",{lowerCase:!0})).toEqual("testing_lowercase_true")})),it("lowerCases: false",(function(){return r(i.sluggify("TESTING LOWERCASE FALSE",{lowerCase:!1})).toEqual("TESTING_LOWERCASE_FALSE")})),it("isValidXmlTag passes with valid strings",(function(){var e,t,n,s,o;for(n=[],e=0,t=(o=["abc","_123","a456","_."]).length;e<t;e++)s=o[e],n.push(r(i.isValidXmlTag(s)).toBeTruthy());return n})),it("isValidXmlTag fails with invalid strings",(function(){var e,t,n,s,o;for(s=[],t=0,n=(e=["1xyz"," startswithspace","._"]).length;t<n;t++)o=e[t],s.push(r(i.isValidXmlTag(o)).not.toBeTruthy());return s})),it("handles a number of strings consistenly",(function(){var e,t,n,s,o,a,u,l,c,p,d;for(p=[],s=u=0,l=(o=[[["asdf jkl"],"asdf_jkl"],[["asdf",["asdf"]],"asdf_001"],[["2. asdf"],"_2_asdf"],[["2. asdf",["_2_asdf"]],"_2_asdf_001"],[["asdf#123"],"asdf_123"],[[" hello "],"hello"]]).length;u<l;s=++u)a=(c=o[s])[0],n=c[1],d=a[0],t=a[1],e=i.sluggifyLabel(d,t),p.push(r(e).toBe(n));return p}))}))}))},916:function(e,t,n){"use strict";n.r(t);var i=n(4);describe("utils",(function(){describe("getLangAsObject",(function(){it("should return object for valid langString",(function(){var e=Object(i.getLangAsObject)("English (en)");chai.expect(e.name).to.equal("English"),chai.expect(e.code).to.equal("en")})),it("should return undefined for invalid langString",(function(){chai.expect(Object(i.getLangAsObject)("English")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("(en)")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("English [en]")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("English, en")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("English: en")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("(en) English")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("English (en) (fr) (de)")).to.equal(void 0),chai.expect(Object(i.getLangAsObject)("Pizza time!")).to.equal(void 0)})),it("should work properly with getLangString",(function(){var e=Object(i.getLangAsObject)(Object(i.getLangString)({name:"English",code:"en"}));chai.expect(e.name).to.equal("English"),chai.expect(e.code).to.equal("en")}))})),describe("getLangString",(function(){it("should return valid langString from langObj",(function(){var e=Object(i.getLangString)({name:"English",code:"en"});chai.expect(e).to.equal("English (en)")})),it("should return nothing for invalid object",(function(){var e=Object(i.getLangString)({pizzaType:2,delivery:!1});chai.expect(e).to.equal(void 0)})),it("should work properly with getLangAsObject",(function(){var e=Object(i.getLangString)(Object(i.getLangAsObject)("English (en)"));chai.expect(e).to.equal("English (en)")}))})),describe("truncateString, truncateUrl, truncateFile",(function(){it("should not truncate strings shorter than specified length",(function(){chai.expect(Object(i.truncateString)("veryShortString",1e3)).to.equal("veryShortString")})),it("should not apply extension truncation to when there is no extension",(function(){chai.expect(Object(i.truncateFile)("veryShortString",1e3)).to.equal("veryShortString")})),it("should not apply protocol truncation to when there is no protocol",(function(){chai.expect(Object(i.truncateUrl)("veryShortString",1e3)).to.equal("veryShortString")})),it("should return exactly `length` characters",(function(){chai.expect(Object(i.truncateString)("veryShortString",5).length).to.equal(5)})),it("should remove extensions if specified",(function(){chai.expect(Object(i.truncateFile)("veryShortString.xml",10)).to.equal("veryS…tring")})),it("should remove protocols if specified",(function(){chai.expect(Object(i.truncateUrl)("http://veryShortString.com",10)).to.equal("veryS…g.com")})),it("should impose its type specific truncation regardless of content",(function(){chai.expect(Object(i.truncateFile)("http://veryShortString.com",10)).to.equal("http:…tring")}))})),describe("generateAutoname",(function(){it("should use default values if only string is specified",(function(){chai.expect(Object(i.generateAutoname)("veryShortString")).to.equal("veryshortstring")})),it("should create a proper substring",(function(){chai.expect(Object(i.generateAutoname)("veryShortString",4,9)).to.equal("short")})),it("should change all spaces to underscores",(function(){chai.expect(Object(i.generateAutoname)("i am   a very long na   me with  weird s      paces")).to.equal("i_am___a_very_long_na___me_with__weird_s______paces")})),it("should create a proper substring and change all spaces to underscores",(function(){chai.expect(Object(i.generateAutoname)("i am   a very long na   me with  weird s      paces",4,21)).to.equal("___a_very_long_na")}))}))}))},917:function(e,t,n){"use strict";n.r(t);var i=n(37);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}describe("translations hack",(function(){describe("nullifyTranslations",(function(){it("should return array with null for no translations",(function(){var e={survey:[{label:["Hello"]}]};expect(Object(i.nullifyTranslations)(e.translations,e.translated,e.survey,e.baseSurvey)).to.deep.equal({survey:[{label:["Hello"]}],translations:[null]})})),it("should throw if there are unnamed translations",(function(){var e={survey:[{label:["Hello"]}],translations:[null,"English (en)"]};expect((function(){Object(i.nullifyTranslations)(e.translations,e.translated,e.survey,e.baseSurvey)})).to.throw()})),it("should not reorder anything if survey has same default language as base survey",(function(){var e={_initialParams:{translations_0:"English (en)"}},t=[{label:["Hello","Cześć"]}],n=["English (en)","Polski (pl)"],r=["label"];expect(Object(i.nullifyTranslations)(n,r,t,e)).to.deep.equal({survey:[{label:["Hello","Cześć"]}],translations:[null,"Polski (pl)"],translations_0:"English (en)"})})),it("should reorder translated props if survey has same default language as base survey but in different order",(function(){var e={_initialParams:{translations_0:"English (en)"}},t=[{label:["Allo","Cześć","Hello"]}],n=["Francais (fr)","Polski (pl)","English (en)"],r=["label"];expect(Object(i.nullifyTranslations)(n,r,t,e)).to.deep.equal({survey:[{label:["Hello","Allo","Cześć"]}],translations:[null,"Francais (fr)","Polski (pl)"],translations_0:"English (en)"})})),it("should add base survey's default language if survey doesn't have it",(function(){var e={_initialParams:{translations_0:"English (en)"}},t=[{label:["Allo","Cześć"],name:"welcome_message"}],n=["Francais (fr)","Polski (pl)"],r=["label"];expect(Object(i.nullifyTranslations)(n,r,t,e)).to.deep.equal({survey:[{label:["welcome_message","Allo","Cześć"],name:"welcome_message"}],translations:[null,"Francais (fr)","Polski (pl)"],translations_0:"English (en)"})})),it("should add null language if base survey has no translations but survey does",(function(){var e={_initialParams:{}},t=[{label:["Allo","Cześć"],name:"welcome_message"}],n=["Francais (fr)","Polski (pl)"],r=["label"];expect(Object(i.nullifyTranslations)(n,r,t,e)).to.deep.equal({survey:[{label:["welcome_message","Allo","Cześć"],name:"welcome_message"}],translations:[null,"Francais (fr)","Polski (pl)"]})})),it("should do nothing if neither base survey nor survey have translations",(function(){var e={_initialParams:{}},t=[{label:["Hello"]}],n=[null],r=[];expect(Object(i.nullifyTranslations)(n,r,t,e)).to.deep.equal({survey:[{label:["Hello"]}],translations:[null]})}))})),describe("unnullifyTranslations",(function(){it("should set default language if it's not set already",(function(){var e={surveyDataJSON:JSON.stringify({survey:[{label:"Cheese?"}],settings:[{}]}),assetContent:{translated:["label"],translations_0:"English (en)"}},t=JSON.stringify({survey:[{"label::English (en)":"Cheese?"}],settings:[{default_language:"English (en)"}]});expect(Object(i.unnullifyTranslations)(e.surveyDataJSON,e.assetContent)).to.deep.equal(t)})),it("should replace nullified props with translated ones",(function(){var e={surveyDataJSON:JSON.stringify({survey:[{label:"Cheese?","label::Polski (pl)":"Ser?"}],choices:[{label:"Yes"},{label:"No","label::Polski (pl)":"Nie"}],settings:[{default_language:"English (en)"}]}),assetContent:{translated:["label"],translations_0:"English (en)"}},t=JSON.stringify({survey:[{"label::Polski (pl)":"Ser?","label::English (en)":"Cheese?"}],choices:[{"label::English (en)":"Yes"},{"label::Polski (pl)":"Nie","label::English (en)":"No"}],settings:[{default_language:"English (en)"}]});expect(Object(i.unnullifyTranslations)(e.surveyDataJSON,e.assetContent)).to.deep.equal(t)}))}))})),describe("readParameters",(function(){[{str:"foo=",obj:{foo:""},note:"empty parameter"},{str:"foo=;bar=1;fum=;baz=",obj:{foo:"",bar:"1",fum:"",baz:""},note:"empty parameters"},{str:"foo=bar",obj:{foo:"bar"},note:"single parameter"},{str:"foo=1 bar=10 fum=1",obj:{foo:"1",bar:"10",fum:"1"},note:"space-separated parameters"},{str:"foo=1,bar=10,fum=1",obj:{foo:"1",bar:"10",fum:"1"},note:"comma-separated parameters"},{str:"foo=1;bar=10;fum=1",obj:{foo:"1",bar:"10",fum:"1"},note:"semicolon-separated parameters"},{str:"foo  = 1    bar  =  10    fum  =  1",obj:{foo:"1",bar:"10",fum:"1"},note:"space-dirty space-separated parameters"},{str:"foo = 1 , bar = 10 , fum = 1",obj:{foo:"1",bar:"10",fum:"1"},note:"space-dirty comma-separated parameters"},{str:"foo = 1  ; bar = 10 ; fum = 1",obj:{foo:"1",bar:"10",fum:"1"},note:"space-dirty semicolon-separated parameters"},{str:"foo=1 bar=10,fum=1;baz=0",obj:{foo:"1 bar=10,fum=1",baz:"0"},note:"parameters with mixed separators"},{str:"foo    =2",obj:{foo:"2"},note:"left-space-dirty single parameter"},{str:"foo     =   2",obj:{foo:"2"},note:"both-space-dirty single parameter"},{str:"foo=      2",obj:{foo:"2"},note:"right-space-dirty single parameter"},{str:"foo = 2, 4  ; bar =  4 , , 4 a   ,  ; fum=baz",obj:{foo:"2, 4",bar:"4 , , 4 a",fum:"baz"},note:"dirty parameters with mixed separators"}].forEach((function(e){it("should return valid object from ".concat(e.note),(function(){chai.expect(Object(i.readParameters)(e.str)).to.deep.equal(e.obj)}))})),it("should read parameters values as strings",(function(){var e=Object(i.readParameters)("foo=1;bar=false;fum=0.5;baz=[1,2,3]");chai.expect(r(e.foo)).to.equal("string"),chai.expect(r(e.bar)).to.equal("string"),chai.expect(r(e.fum)).to.equal("string"),chai.expect(r(e.baz)).to.equal("string")})),it("should return null for invalid parameter string",(function(){chai.expect(Object(i.readParameters)("abc:1")).to.equal(null),chai.expect(Object(i.readParameters)("1")).to.equal(null),chai.expect(Object(i.readParameters)("")).to.equal(null),chai.expect(Object(i.readParameters)(0)).to.equal(null),chai.expect(Object(i.readParameters)(!1)).to.equal(null),chai.expect(Object(i.readParameters)(null)).to.equal(null),chai.expect(Object(i.readParameters)(void 0)).to.equal(null),chai.expect(Object(i.readParameters)({})).to.equal(null),chai.expect(Object(i.readParameters)([])).to.equal(null)}))})),describe("writeParameters",(function(){[{str:"foo=1;bar=10;fum=1",obj:{foo:"1",bar:"10",fum:"1"},note:"valid string from object with multiple parameters"},{str:"foo=2",obj:{foo:"2"},note:"valid string from object with single parameter"},{str:"bar=0;baz=false",obj:{foo:null,bar:0,fum:void 0,baz:!1},note:"valid string omitting empty values from object with multiple parameters"},{str:'foo={"bar":"a","fum":{"baz":"b"}}',obj:{foo:{bar:"a",fum:{baz:"b"}}},note:"valid string from nested object"}].forEach((function(e){it("should return ".concat(e.note),(function(){chai.expect(Object(i.writeParameters)(e.obj)).to.equal(e.str)}))}))}))},920:function(e,t,n){"use strict";n.r(t);var i=[{name:"start",type:"start",$kuid:"9PMXyB7Sv",$autoname:"start"},{name:"end",type:"end",$kuid:"AkKyOYSIP",$autoname:"end"},{type:"text",$kuid:"uw4if17",label:["First name","Pierwsze imię"],required:!1,$autoname:"First_name"},{name:"group_favourites",type:"begin_group",$kuid:"fx8qb06",label:["Favourites","Ulubione"],$autoname:"group_favourites"},{type:"select_one",$kuid:"az1fc41",label:["Favourite color","Ulubiony kolor"],required:!1,$autoname:"Favourite_color",select_from_list_name:"fav_col_list"},{type:"integer",$kuid:"ka9pv41",label:["Favourite number","Ulubiona liczba"],required:!1,$autoname:"Favourite_number"},{type:"end_group",$kuid:"/fx8qb06"}],r=[{name:"pink",label:["Pink"],list_name:"fav_col_list"},{name:"blue",label:["Blue"],list_name:"fav_col_list"}],s={__version__:"vHNo5vFh3KoB7LWhucUkFy",_attachments:[],_bamboo_dataset_id:"",_geolocation:[null,null],_id:16,_notes:[],_status:"submitted_via_web",_submission_time:"2020-04-06T11:11:47",_submitted_by:null,_tags:[],_uuid:"faa38eee-4e3f-419e-bac0-e95f1085d998",_validation_status:{},_xform_id_string:"afKfAnPYX3X7kojqM2cJDb",end:"2020-04-06T13:11:41.006+02:00",First_name:"Leszek","formhub/uuid":"57e6fd0b4065443280c9641be5670e89","group_favourites/Favourite_color":"pink","group_favourites/Favourite_number":"24","meta/instanceID":"uuid:faa38eee-4e3f-419e-bac0-e95f1085d998",start:"2020-04-06T13:11:31.421+02:00"},o={__version__:"vHNo5vFh3KoB7LWhucUkFy",_attachments:[],_bamboo_dataset_id:"",_geolocation:[null,null],_id:18,_notes:[],_status:"submitted_via_web",_submission_time:"2020-04-08T08:46:47",_submitted_by:null,_tags:[],_uuid:"69ff2e33-4d4b-4891-8c81-82d7316cf51f",_validation_status:{},_xform_id_string:"afKfAnPYX3X7kojqM2cJDb",end:"2020-04-08T10:46:41.882+02:00","formhub/uuid":"57e6fd0b4065443280c9641be5670e89","group_favourites/Favourite_number":"5","meta/instanceID":"uuid:69ff2e33-4d4b-4891-8c81-82d7316cf51f",start:"2020-04-08T10:46:34.957+02:00"},a=[{type:"text",label:"Pierwsze imię",name:"First_name",data:"Leszek"},{type:"group_regular",label:"Ulubione",name:"group_favourites",children:[{type:"select_one",label:"Ulubiony kolor",name:"Favourite_color",listName:"fav_col_list",data:"pink"},{type:"integer",label:"Ulubiona liczba",name:"Favourite_number",data:"24"}]}],u=[{type:"text",label:"First name",name:"First_name",data:null},{type:"group_regular",label:"Favourites",name:"group_favourites",children:[{type:"select_one",label:"Favourite color",name:"Favourite_color",listName:"fav_col_list",data:null},{type:"integer",label:"Favourite number",name:"Favourite_number",data:"5"}]}],l=[{name:"start",type:"start",$kuid:"lMV6oqDcf",$autoname:"start"},{name:"end",type:"end",$kuid:"sdwqjbndr",$autoname:"end"},{name:"group_members",type:"begin_repeat",$kuid:"fd8yo77",label:["Members"],required:!1,$autoname:"group_members"},{type:"text",$kuid:"lm2ww64",label:["First name"],required:!1,$autoname:"First_name"},{type:"text",$kuid:"nf9gq14",label:["Middle name"],required:!1,$autoname:"Middle_name"},{type:"text",$kuid:"qt6mr31",label:["Last name"],required:!1,$autoname:"Last_name"},{type:"end_repeat",$kuid:"/fd8yo77"}],c={_id:17,_notes:[],__version__:"v8khdgcT3SYb2HRJhMNtsE",_attachments:[],_bamboo_dataset_id:"",_geolocation:[null,null],_status:"submitted_via_web",_submission_time:"2020-04-07T14:07:48",_submitted_by:null,_tags:[],_uuid:"651137b9-e465-49ed-9924-a67d7b1c6f76",_validation_status:{},_xform_id_string:"afmcL74BTjjRpdAJy52WGX",end:"2020-04-07T16:07:41.931+02:00","formhub/uuid":"b26f2a9b9b7a49608920ad76cba3c315",group_members:[{"group_members/First_name":"Leszek","group_members/Middle_name":"Jan","group_members/Last_name":"Pietrzak"},{"group_members/Last_name":"Niepietrzak"}],"meta/instanceID":"uuid:651137b9-e465-49ed-9924-a67d7b1c6f76",start:"2020-04-07T16:07:24.044+02:00"},p=[{type:"group_repeat",label:"Members",name:"group_members",children:[{type:"text",label:"First name",name:"First_name",data:"Leszek"},{type:"text",label:"Middle name",name:"Middle_name",data:"Jan"},{type:"text",label:"Last name",name:"Last_name",data:"Pietrzak"}]},{type:"group_repeat",label:"Members",name:"group_members",children:[{type:"text",label:"First name",name:"First_name",data:null},{type:"text",label:"Middle name",name:"Middle_name",data:null},{type:"text",label:"Last name",name:"Last_name",data:"Niepietrzak"}]}],d=[{name:"start",type:"start",$kuid:"Rq36zKyog",$autoname:"start"},{name:"end",type:"end",$kuid:"Redw9OtxY",$autoname:"end"},{type:"begin_repeat",label:["People"],name:"group_people",$kuid:"aj45t09",$autoname:"group_people"},{type:"text",label:["Name"],required:!1,$kuid:"bj78z02",$autoname:"Name"},{type:"begin_repeat",label:["Personal items"],name:"group_items",$kuid:"te04d01",$autoname:"group_items"},{type:"text",label:["Item name"],required:!1,$kuid:"fd1ec62",$autoname:"Item_name"},{type:"end_repeat",$kuid:"/te04d01"},{type:"end_repeat",$kuid:"/aj45t09"}],_={__version__:"v7sPQZCGQoW8JKYL5Kq79m",_attachments:[],_bamboo_dataset_id:"",_geolocation:[null,null],_id:20,_notes:[],_status:"submitted_via_web",_submission_time:"2020-04-08T11:12:20",_submitted_by:null,_tags:[],_uuid:"83aa0573-8a44-42f7-885b-aa7a3afffbd1",_validation_status:{},_xform_id_string:"ahTnpQwdqrrp4fRKqUxj2p",end:"2020-04-08T13:22:56.270+02:00","formhub/uuid":"d6123d44cf8c4fa78e38556b5af6bd68",group_people:[{"group_people/group_items":[{"group_people/group_items/Item_name":"Notebook"},{"group_people/group_items/Item_name":"Pen"},{"group_people/group_items/Item_name":"Shoe"}],"group_people/Name":"John"},{"group_people/Name":"Leszek"},{"group_people/group_items":[{"group_people/group_items/Item_name":"Computer"}]}],"meta/deprecatedID":"uuid:85397438-558e-4b24-94d7-901550744352","meta/instanceID":"uuid:83aa0573-8a44-42f7-885b-aa7a3afffbd1",start:"2020-04-08T13:11:29.840+02:00"},f=[{type:"group_repeat",label:"People",name:"group_people",children:[{type:"text",label:"Name",name:"Name",data:"John"},{type:"group_repeat",label:"Personal items",name:"group_items",children:[{type:"text",label:"Item name",name:"Item_name",data:"Notebook"}]},{type:"group_repeat",label:"Personal items",name:"group_items",children:[{type:"text",label:"Item name",name:"Item_name",data:"Pen"}]},{type:"group_repeat",label:"Personal items",name:"group_items",children:[{type:"text",label:"Item name",name:"Item_name",data:"Shoe"}]}]},{type:"group_repeat",label:"People",name:"group_people",children:[{type:"text",label:"Name",name:"Name",data:"Leszek"}]},{type:"group_repeat",label:"People",name:"group_people",children:[{type:"text",label:"Name",name:"Name",data:null},{type:"group_repeat",label:"Personal items",name:"group_items",children:[{type:"text",label:"Item name",name:"Item_name",data:"Computer"}]}]}],h=[{name:"start",type:"start",$kuid:"HVwODOAEK",$autoname:"start"},{name:"end",type:"end",$kuid:"32gE3g5ST",$autoname:"end"},{name:"today",type:"today",$kuid:"3h9Nl2bpx",$autoname:"today"},{name:"username",type:"username",$kuid:"3RscqJRor",$autoname:"username"},{name:"simserial",type:"simserial",$kuid:"ozNn7JwMd",$autoname:"simserial"},{name:"subscriberid",type:"subscriberid",$kuid:"tStWXbDyQ",$autoname:"subscriberid"},{name:"deviceid",type:"deviceid",$kuid:"ll7GCh9oi",$autoname:"deviceid"},{name:"phonenumber",type:"phonenumber",$kuid:"b02UNLdMV",$autoname:"phonenumber"},{name:"countries",type:"begin_kobomatrix",$kuid:"en5ri38",label:["Countries"],required:!1,$autoname:"countries",_isRepeat:"false",appearance:"field-list","kobo--matrix_list":"count_ch_list"},{hint:[""],name:"ecology_level",type:"integer",$kuid:"mi7ka64",label:["Ecology level"],required:!1,$autoname:"ecology_level",appearance:"w1"},{hint:[""],name:"secularity_level",type:"integer",$kuid:"iy4fw00",label:["Secularity level"],required:!1,$autoname:"secularity_level",appearance:"w1"},{type:"end_kobomatrix",$kuid:"/en5ri38"}],m=[{name:"poland",$kuid:"wa9kl23",label:["Poland"],list_name:"count_ch_list",$autovalue:"poland"}],g={_id:22,username:"username not found",simserial:"simserial not found",_validation_status:{},_uuid:"a0039b58-1b2d-4445-912e-01e4ad56dbb4",_bamboo_dataset_id:"",_tags:[],_submitted_by:null,"countries_poland/countries_poland_ecology_level":"3",_xform_id_string:"aikoAHFLnmPw6WwQJCb8x3","meta/instanceID":"uuid:a0039b58-1b2d-4445-912e-01e4ad56dbb4","formhub/uuid":"f081027d597142b9a17a7a3bb3a5aff1",end:"2020-04-20T18:00:05.384+02:00",_submission_time:"2020-04-20T16:00:10",_notes:[],_attachments:[],start:"2020-04-20T17:59:54.295+02:00","countries_poland/countries_poland_secularity_level":"-5",_geolocation:[null,null],deviceid:"ee.kobo.local:4l56OZ7GLLixoZ9J",phonenumber:"phonenumber not found",_status:"submitted_via_web",__version__:"vPNH6GBsRjMKLfXrisReYA",subscriberid:"subscriberid not found",today:"2020-04-20"},v=[{type:"group_matrix",label:"Countries",name:"countries",children:[{type:"group_matrix_row",label:"Poland",name:"poland",children:[{type:"integer",label:"Ecology level",name:"ecology_level",data:"3"},{type:"integer",label:"Secularity level",name:"secularity_level",data:"-5"}]}]}],y=[{name:"group_people",type:"begin_repeat",$kuid:"fs1km00",label:["People"],$autoname:"group_people"},{type:"text",$kuid:"sr97c95",label:["First name"],required:!1,$autoname:"First_name"},{type:"end_repeat",$kuid:"/fs1km00"},{name:"group_location",type:"begin_group",$kuid:"lq0th66",label:["Location"],$autoname:"group_location"},{type:"geopoint",$kuid:"ug36q69",label:["Original location"],required:!1,$autoname:"Original_location"},{type:"geopoint",$kuid:"kw6zd49",label:["Current location"],required:!1,$autoname:"Current_location"},{type:"end_group",$kuid:"/lq0th66"},{type:"begin_score",$kuid:"rd0zi80",label:["Are you vegan?"],required:!1,$autoname:"Are_you_vegan","kobo--score-choices":"vg_ch_list"},{type:"score__row",$kuid:"as5gb66",label:["Killing humans"],$autoname:"Killing_humans"},{type:"score__row",$kuid:"kv3uq84",label:["Killing nonhumans"],$autoname:"Killing_nonhumans"},{type:"end_score",$kuid:"/rd0zi80"},{type:"begin_rank",$kuid:"bj3zo95",label:["Best things in life"],required:!1,$autoname:"Best_things_in_life","kobo--rank-items":"best_ch_list","kobo--rank-constraint-message":"Items cannot be selected more than once"},{type:"rank__level",$kuid:"yy8lt23",label:["1st choice"],$autoname:"_1st_choice"},{type:"rank__level",$kuid:"ll0ky89",label:["2nd choice"],$autoname:"_2nd_choice"},{type:"rank__level",$kuid:"cz6uz72",label:["3rd choice"],$autoname:"_3rd_choice"},{type:"end_rank",$kuid:"/bj3zo95"},{name:"group_crossbreeding",type:"begin_kobomatrix",$kuid:"vs75w20",label:["Crossbreeding"],$autoname:"group_crossbreeding",_isRepeat:"false",appearance:"field-list","kobo--matrix_list":"crossbr_ch_list"},{hint:[""],name:"human",type:"text",$kuid:"ji8zj93",label:["Human"],required:!1,$autoname:"human",appearance:"w1"},{hint:[""],name:"nonhuman",type:"text",$kuid:"on6ec28",label:["Nonhuman"],required:!1,$autoname:"nonhuman",appearance:"w1"},{type:"end_kobomatrix",$kuid:"/vs75w20"}],b=[{name:"good",$kuid:"4g11EC3jB",label:["Good"],list_name:"vg_ch_list",$autovalue:"good"},{name:"bad",$kuid:"iWSKBTsBL",label:["Bad"],list_name:"vg_ch_list",$autovalue:"bad"},{name:"food",$kuid:"gZdFOT2Au",label:["Food"],list_name:"best_ch_list",$autovalue:"food"},{name:"sleep",$kuid:"29qNZUz3S",label:["Sleep"],list_name:"best_ch_list",$autovalue:"sleep"},{name:"conquest",$kuid:"U0A1jTOH9",label:["Conquest"],list_name:"best_ch_list",$autovalue:"conquest"},{name:"fire",$kuid:"dl9lc82",label:["Fire"],list_name:"crossbr_ch_list",$autovalue:"fire"},{name:"water",$kuid:"qn03v13",label:["Water"],list_name:"crossbr_ch_list",$autovalue:"water"}],k={_id:23,"Are_you_vegan/Killing_humans":"good",_validation_status:{},_uuid:"846a669e-299e-4650-bdfa-05bcf34622e2",_bamboo_dataset_id:"",_tags:[],"Best_things_in_life/_2nd_choice":"sleep",_submitted_by:null,"Are_you_vegan/Killing_nonhumans":"bad",_xform_id_string:"aP87YegB993rHGjAaihyte","Best_things_in_life/_1st_choice":"conquest","meta/instanceID":"uuid:846a669e-299e-4650-bdfa-05bcf34622e2","group_crossbreeding_water/group_crossbreeding_water_nonhuman":"waterthing","formhub/uuid":"f558c8ebd7ba410194b84503ea6ca865","group_crossbreeding_water/group_crossbreeding_water_human":"waterman","group_location/Current_location":"53.748711 -7.880555 0 0",group_people:[{"group_people/First_name":"Leszek"},{"group_people/First_name":"John"}],_submission_time:"2020-04-23T18:16:08",_notes:[],_attachments:[],"group_crossbreeding_fire/group_crossbreeding_fire_nonhuman":"firething","group_crossbreeding_fire/group_crossbreeding_fire_human":"fireman","group_location/Original_location":"52.48278 18.813458 0 0","Best_things_in_life/_3rd_choice":"food",_status:"submitted_via_web",__version__:"vN4myUe5KyYrGN4dGrpBid",today:"2020-04-23"},E=[{type:"group_repeat",label:"People",name:"group_people",children:[{type:"text",label:"First name",name:"First_name",data:"Leszek"}]},{type:"group_repeat",label:"People",name:"group_people",children:[{type:"text",label:"First name",name:"First_name",data:"John"}]},{type:"group_regular",label:"Location",name:"group_location",children:[{type:"geopoint",label:"Original location",name:"Original_location",data:"52.48278 18.813458 0 0"},{type:"geopoint",label:"Current location",name:"Current_location",data:"53.748711 -7.880555 0 0"}]},{type:"group_regular",label:"Are you vegan?",name:"Are_you_vegan",children:[{type:"score__row",label:"Killing humans",name:"Killing_humans",listName:"vg_ch_list",data:"good"},{type:"score__row",label:"Killing nonhumans",name:"Killing_nonhumans",listName:"vg_ch_list",data:"bad"}]},{type:"group_regular",label:"Best things in life",name:"Best_things_in_life",children:[{type:"rank__level",label:"1st choice",name:"_1st_choice",listName:"best_ch_list",data:"conquest"},{type:"rank__level",label:"2nd choice",name:"_2nd_choice",listName:"best_ch_list",data:"sleep"},{type:"rank__level",label:"3rd choice",name:"_3rd_choice",listName:"best_ch_list",data:"food"}]},{type:"group_matrix",label:"Crossbreeding",name:"group_crossbreeding",children:[{type:"group_matrix_row",label:"Fire",name:"fire",children:[{type:"text",label:"Human",name:"human",data:"fireman"},{type:"text",label:"Nonhuman",name:"nonhuman",data:"firething"}]},{type:"group_matrix_row",label:"Water",name:"water",children:[{type:"text",label:"Human",name:"human",data:"waterman"},{type:"text",label:"Nonhuman",name:"nonhuman",data:"waterthing"}]}]}],O=[{name:"start",type:"start",$kuid:"hI2IjAPLy",$autoname:"start"},{name:"end",type:"end",$kuid:"xVomX5yES",$autoname:"end"},{type:"select_one",$kuid:"ys1bd14",label:["Favourite country"],required:!1,$autoname:"Favourite_country",select_from_list_name:"fav_cntr_list"},{type:"select_multiple",$kuid:"ca8bv64",label:["Favourite food"],required:!1,$autoname:"Favourite_food",select_from_list_name:"fav_food_ch_list"},{type:"text",$kuid:"gr1hn65",label:["Your name"],required:!1,$autoname:"Your_name"},{type:"integer",$kuid:"vw1ya03",label:["Lucky number"],required:!1,$autoname:"Lucky_number"},{type:"decimal",$kuid:"ia1ux31",label:["Unlucky number"],required:!1,$autoname:"Unlucky_number"},{type:"date",$kuid:"vl8ck72",label:["Birth date"],required:!1,$autoname:"Birth_date"},{type:"time",$kuid:"qa9pv52",label:["Birth time"],required:!1,$autoname:"Birth_time"},{type:"datetime",$kuid:"cq0yk16",label:["Some random date and time"],required:!1,$autoname:"Some_random_date_and_time"},{type:"geopoint",$kuid:"ib3wx74",label:["Secret spot"],required:!1,$autoname:"Secret_spot"},{type:"image",$kuid:"vu9cb06",label:["Selfportrait"],required:!1,$autoname:"Selfportrait",parameters:"max-pixels=1024"},{type:"audio",$kuid:"aa28j83",label:["Voice password"],required:!1,$autoname:"Voice_password"},{type:"video",$kuid:"tj2xw94",label:["A video?"],required:!1,$autoname:"A_video"},{type:"geotrace",$kuid:"bh5yb78",label:["Shortest path"],required:!1,$autoname:"Shortest_path"},{type:"note",$kuid:"pg3yl90",label:["This is a secret"],required:!1,$autoname:"This_is_a_secret"},{type:"barcode",$kuid:"qu5zg17",label:["Favourite chocolate barcode"],required:!1,$autoname:"Favourite_chocolate_barcode"},{type:"acknowledge",$kuid:"ym87f54",label:["Are you sane?"],required:!1,$autoname:"Are_you_sane"},{type:"geoshape",$kuid:"ua1av57",label:["Secret area"],required:!1,$autoname:"Secret_area"},{type:"begin_score",$kuid:"yp8ep33",label:["How are you?"],required:!1,$autoname:"How_are_you","kobo--score-choices":"how_r_u_ch_list"},{name:"outside",type:"score__row",$kuid:"ir6tu76",label:["Outside"],required:!1,$autoname:"outside"},{name:"inside",type:"score__row",$kuid:"je4go60",label:["Inside"],required:!1,$autoname:"inside"},{type:"end_score",$kuid:"/yp8ep33"},{name:"test_your_math",type:"begin_kobomatrix",$kuid:"gy07t52",label:["Test your math"],required:!1,$autoname:"test_your_math",_isRepeat:"false",appearance:"field-list","kobo--matrix_list":"matrix_cb3fk35"},{hint:[""],name:"plus",type:"integer",$kuid:"oh83n52",label:["Plus"],required:!1,$autoname:"plus",appearance:"w1"},{hint:[""],name:"minus",type:"select_one",$kuid:"gy9ev97",label:["Minus"],required:!1,$autoname:"minus",appearance:"w1",select_from_list_name:"min_ch_list"},{type:"end_kobomatrix",$kuid:"/gy07t52"},{type:"begin_rank",$kuid:"vs3yt07",label:["Colours by brightness"],required:!1,$autoname:"Colours_by_brightness","kobo--rank-items":"col_br_ch_list","kobo--rank-constraint-message":"Items cannot be selected more than once"},{type:"rank__level",$kuid:"yp71p21",label:["1st choice"],required:!1,$autoname:"_1st_choice"},{type:"rank__level",$kuid:"ac8ez34",label:["2nd choice"],required:!1,$autoname:"_2nd_choice"},{type:"end_rank",$kuid:"/vs3yt07"},{type:"file",$kuid:"dz9cv47",label:["We need your CV"],required:!1,$autoname:"We_need_your_CV","body::accept":"txt"},{type:"range",$kuid:"jb6ll34",label:["Expected lifespan"],required:!1,$autoname:"Expected_lifespan",parameters:"start=1;end=125;step=1"}],w=[{name:"poland",$kuid:"dVHZ9VigU",label:["Poland"],list_name:"fav_cntr_list",$autovalue:"poland"},{name:"ireland",$kuid:"awQvU6AGY",label:["Ireland"],list_name:"fav_cntr_list",$autovalue:"ireland"},{name:"pizza",$kuid:"V5aeF2EbQ",label:["Pizza"],list_name:"fav_food_ch_list",$autovalue:"pizza"},{name:"apple",$kuid:"XjaJ0GAm0",label:["Apple"],list_name:"fav_food_ch_list",$autovalue:"apple"},{name:"good",$kuid:"YtKFyrtef",label:["Good"],list_name:"how_r_u_ch_list",$autovalue:"good"},{name:"bad",$kuid:"eVEUuBWFf",label:["Bad"],list_name:"how_r_u_ch_list",$autovalue:"bad"},{name:"yellow",$kuid:"DzPdmquZQ",label:["Yellow"],list_name:"col_br_ch_list",$autovalue:"yellow"},{name:"blue",$kuid:"6oHmUYz8S",label:["Blue"],list_name:"col_br_ch_list",$autovalue:"blue"},{name:"2_and_4",$kuid:"bd6hu92",label:["2 and 4"],list_name:"matrix_cb3fk35",$autovalue:"2_and_4"},{name:"minus_four",$kuid:"tq31o95",label:["-4"],list_name:"min_ch_list",$autovalue:"minus_four"},{name:"minus_two",$kuid:"ue3oz79",label:["-2"],list_name:"min_ch_list",$autovalue:"minus_two"}],S={_id:25,Secret_spot:"47.754098 3.426214 0 0",Favourite_chocolate_barcode:"123123123123",_geolocation:[47.754098,3.426214],Favourite_country:"ireland","Colours_by_brightness/_1st_choice":"blue",Favourite_food:"pizza apple",Selfportrait:"784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg",_validation_status:{},We_need_your_CV:"zamki-13_35_5.txt",_uuid:"fdd252ee-860a-426c-be90-cbbf61787cb9",_bamboo_dataset_id:"",_tags:[],_notes:[],"Colours_by_brightness/_2nd_choice":"yellow",A_video:"IMG_3619-13_33_22.MOV",_submitted_by:null,"How_are_you/outside":"good",_xform_id_string:"aXPSbtQcYDm8mcJuVZTUhW",Birth_date:"1900-04-10","meta/instanceID":"uuid:fdd252ee-860a-426c-be90-cbbf61787cb9",Shortest_path:"26.74561 -1.485606 0 0;18.979026 23.772309 0 0","formhub/uuid":"712e5fb8d7364482a57c60df876c57fb",Birth_time:"13:45:00.000+02:00",end:"2020-04-28T13:35:12.978+02:00","How_are_you/inside":"bad",_submission_time:"2020-04-28T11:35:26",__version__:"vbkx6J4Key3yaWF5TGXrxg","test_your_math_2_and_4/test_your_math_2_and_4_minus":"minus_four",Lucky_number:"24",Are_you_sane:"OK",_attachments:[{mimetype:"video/quicktime",download_small_url:"http://kc.kobo.local/media/small?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2FIMG_3619-13_33_22.MOV",download_large_url:"http://kc.kobo.local/media/large?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2FIMG_3619-13_33_22.MOV",download_url:"http://kc.kobo.local/media/original?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2FIMG_3619-13_33_22.MOV",filename:"kobo/attachments/712e5fb8d7364482a57c60df876c57fb/fdd252ee-860a-426c-be90-cbbf61787cb9/IMG_3619-13_33_22.MOV",instance:25,download_medium_url:"http://kc.kobo.local/media/medium?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2FIMG_3619-13_33_22.MOV",id:6,xform:18},{mimetype:"audio/mpeg",download_small_url:"http://kc.kobo.local/media/small?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F07.+Crazy+Love-13_32_31.mp3",download_large_url:"http://kc.kobo.local/media/large?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F07.+Crazy+Love-13_32_31.mp3",download_url:"http://kc.kobo.local/media/original?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F07.+Crazy+Love-13_32_31.mp3",filename:"kobo/attachments/712e5fb8d7364482a57c60df876c57fb/fdd252ee-860a-426c-be90-cbbf61787cb9/07. Crazy Love-13_32_31.mp3",instance:25,download_medium_url:"http://kc.kobo.local/media/medium?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F07.+Crazy+Love-13_32_31.mp3",id:5,xform:18},{mimetype:"text/plain",download_small_url:"http://kc.kobo.local/media/small?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2Fzamki-13_35_5.txt",download_large_url:"http://kc.kobo.local/media/large?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2Fzamki-13_35_5.txt",download_url:"http://kc.kobo.local/media/original?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2Fzamki-13_35_5.txt",filename:"kobo/attachments/712e5fb8d7364482a57c60df876c57fb/fdd252ee-860a-426c-be90-cbbf61787cb9/zamki-13_35_5.txt",instance:25,download_medium_url:"http://kc.kobo.local/media/medium?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2Fzamki-13_35_5.txt",id:4,xform:18},{mimetype:"image/jpeg",download_small_url:"http://kc.kobo.local/media/small?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg",download_large_url:"http://kc.kobo.local/media/large?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg",download_url:"http://kc.kobo.local/media/original?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg",filename:"kobo/attachments/712e5fb8d7364482a57c60df876c57fb/fdd252ee-860a-426c-be90-cbbf61787cb9/784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg",instance:25,download_medium_url:"http://kc.kobo.local/media/medium?media_file=kobo%2Fattachments%2F712e5fb8d7364482a57c60df876c57fb%2Ffdd252ee-860a-426c-be90-cbbf61787cb9%2F784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg",id:3,xform:18}],Expected_lifespan:"88",start:"2020-04-28T13:30:42.903+02:00",Your_name:"Leszek",Unlucky_number:"-7",Some_random_date_and_time:"2020-04-02T01:33:00.000+02:00",_status:"submitted_via_web",Secret_area:"-7.362467 -54.112248 0 0;24.20689 -79.483642 0 0;25.720735 -41.556644 0 0;2.196727 -40.315761 0 0;-7.362467 -54.112248 0 0",Voice_password:"07. Crazy Love-13_32_31.mp3","test_your_math_2_and_4/test_your_math_2_and_4_plus":"7"},A=[{type:"select_one",label:"Favourite country",name:"Favourite_country",listName:"fav_cntr_list",data:"ireland"},{type:"select_multiple",label:"Favourite food",name:"Favourite_food",listName:"fav_food_ch_list",data:"pizza apple"},{type:"text",label:"Your name",name:"Your_name",data:"Leszek"},{type:"integer",label:"Lucky number",name:"Lucky_number",data:"24"},{type:"decimal",label:"Unlucky number",name:"Unlucky_number",data:"-7"},{type:"date",label:"Birth date",name:"Birth_date",data:"1900-04-10"},{type:"time",label:"Birth time",name:"Birth_time",data:"13:45:00.000+02:00"},{type:"datetime",label:"Some random date and time",name:"Some_random_date_and_time",data:"2020-04-02T01:33:00.000+02:00"},{type:"geopoint",label:"Secret spot",name:"Secret_spot",data:"47.754098 3.426214 0 0"},{type:"image",label:"Selfportrait",name:"Selfportrait",data:"784397e28b5041d59bef15d5d0b2d0bf--cutaway-dio-13_31_48.jpg"},{type:"audio",label:"Voice password",name:"Voice_password",data:"07. Crazy Love-13_32_31.mp3"},{type:"video",label:"A video?",name:"A_video",data:"IMG_3619-13_33_22.MOV"},{type:"geotrace",label:"Shortest path",name:"Shortest_path",data:"26.74561 -1.485606 0 0;18.979026 23.772309 0 0"},{type:"barcode",label:"Favourite chocolate barcode",name:"Favourite_chocolate_barcode",data:"123123123123"},{type:"acknowledge",label:"Are you sane?",name:"Are_you_sane",data:"OK"},{type:"geoshape",label:"Secret area",name:"Secret_area",data:"-7.362467 -54.112248 0 0;24.20689 -79.483642 0 0;25.720735 -41.556644 0 0;2.196727 -40.315761 0 0;-7.362467 -54.112248 0 0"},{type:"group_regular",label:"How are you?",name:"How_are_you",children:[{type:"score__row",label:"Outside",name:"outside",listName:"how_r_u_ch_list",data:"good"},{type:"score__row",label:"Inside",name:"inside",listName:"how_r_u_ch_list",data:"bad"}]},{type:"group_matrix",label:"Test your math",name:"test_your_math",children:[{type:"group_matrix_row",label:"2 and 4",name:"2_and_4",children:[{type:"integer",label:"Plus",name:"plus",data:"7"},{type:"select_one",label:"Minus",name:"minus",listName:"min_ch_list",data:"minus_four"}]}]},{type:"group_regular",label:"Colours by brightness",name:"Colours_by_brightness",children:[{type:"rank__level",label:"1st choice",name:"_1st_choice",listName:"col_br_ch_list",data:"blue"},{type:"rank__level",label:"2nd choice",name:"_2nd_choice",listName:"col_br_ch_list",data:"yellow"}]},{type:"file",label:"We need your CV",name:"We_need_your_CV",data:"zamki-13_35_5.txt"},{type:"range",label:"Expected lifespan",name:"Expected_lifespan",data:"88"}],T=[{name:"start",type:"start",$kuid:"5hhy3gTQM",$autoname:"start"},{name:"end",type:"end",$kuid:"gIKQbAuFK",$autoname:"end"},{name:"Simple_repeat",type:"begin_repeat",$kuid:"wr4ir59",label:["Simple repeat"],$autoname:"Simple_repeat"},{name:"Best_food",type:"begin_kobomatrix",$kuid:"hn03y22",label:["Best food"],$autoname:"Best_food",_isRepeat:"false",appearance:"field-list","kobo--matrix_list":"matrix_ri0sw49"},{hint:[""],name:"Salty",type:"text",$kuid:"ar3rp04",label:["Salty"],required:!1,$autoname:"Salty",appearance:"w1"},{hint:[""],name:"Sweet",type:"text",$kuid:"qp2gg39",label:["Sweet"],required:!0,$autoname:"Sweet",appearance:"w1"},{type:"end_kobomatrix",$kuid:"/hn03y22"},{type:"end_repeat",$kuid:"/wr4ir59"}],R=[{name:"baked",$kuid:"hb7vh55",label:["Baked"],list_name:"matrix_ri0sw49",$autovalue:"baked"},{name:"raw",$kuid:"us3nd72",label:["Raw"],list_name:"matrix_ri0sw49",$autovalue:"raw"}],j={_id:16,_notes:[],_validation_status:{},_uuid:"967be1fa-e015-44f9-af6e-38c795db705a",_bamboo_dataset_id:"",_tags:[],_submitted_by:null,_xform_id_string:"aZWrtKay885DknXjjoB7NB","meta/instanceID":"uuid:967be1fa-e015-44f9-af6e-38c795db705a","formhub/uuid":"3d4bb313b9244e97a64339f43bb4317c",end:"2020-08-24T14:50:33.709+02:00",Simple_repeat:[{"Simple_repeat/Best_food_raw/Best_food_raw_Sweet":"apple","Simple_repeat/Best_food_baked/Best_food_baked_Salty":"bread","Simple_repeat/Best_food_baked/Best_food_baked_Sweet":"pie","Simple_repeat/Best_food_raw/Best_food_raw_Salty":"olive"},{"Simple_repeat/Best_food_raw/Best_food_raw_Sweet":"tomato","Simple_repeat/Best_food_baked/Best_food_baked_Salty":"pizza","Simple_repeat/Best_food_baked/Best_food_baked_Sweet":"croissant","Simple_repeat/Best_food_raw/Best_food_raw_Salty":"cucumber"}],_submission_time:"2020-08-24T12:50:49",_attachments:[],start:"2020-08-24T14:48:52.577+02:00",_geolocation:[null,null],_status:"submitted_via_web",__version__:"vLao7eC5zPrkyAHKYFt9kY"},x=[{type:"group_repeat",label:"Simple repeat",name:"Simple_repeat",children:[{type:"group_matrix",label:"Best food",name:"Best_food",children:[{type:"group_matrix_row",label:"Baked",name:"baked",children:[{type:"text",label:"Salty",name:"Salty",data:"bread"},{type:"text",label:"Sweet",name:"Sweet",data:"pie"}]},{type:"group_matrix_row",label:"Raw",name:"raw",children:[{type:"text",label:"Salty",name:"Salty",data:"olive"},{type:"text",label:"Sweet",name:"Sweet",data:"apple"}]}]}]},{type:"group_repeat",label:"Simple repeat",name:"Simple_repeat",children:[{type:"group_matrix",label:"Best food",name:"Best_food",children:[{type:"group_matrix_row",label:"Baked",name:"baked",children:[{type:"text",label:"Salty",name:"Salty",data:"pizza"},{type:"text",label:"Sweet",name:"Sweet",data:"croissant"}]},{type:"group_matrix_row",label:"Raw",name:"raw",children:[{type:"text",label:"Salty",name:"Salty",data:"cucumber"},{type:"text",label:"Sweet",name:"Sweet",data:"tomato"}]}]}]}],L=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"simpleSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(r,"simpleSurveyChoices","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(s,"simpleSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(o,"simpleSurveySubmissionEmpty","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(a,"simpleSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(u,"simpleSurveyDisplayDataEmpty","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(l,"repeatSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(c,"repeatSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(p,"repeatSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(d,"nestedRepeatSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(_,"nestedRepeatSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(f,"nestedRepeatSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(h,"matrixSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(m,"matrixSurveyChoices","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(g,"matrixSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(v,"matrixSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(y,"groupsSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(b,"groupsSurveyChoices","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(k,"groupsSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(E,"groupsSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(O,"everythingSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(w,"everythingSurveyChoices","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(S,"everythingSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(A,"everythingSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(T,"matrixRepeatSurvey","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(R,"matrixRepeatSurveyChoices","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(j,"matrixRepeatSurveySubmission","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6"),__REACT_HOT_LOADER__.register(x,"matrixRepeatSurveyDisplayData","/srv/src/kpi/jsapp/js/components/submissions/submissionUtils.mocks.es6")),n(64));describe("getSubmissionDisplayData",(function(){it("should return a valid data for a survey with a group",(function(){var e=Object(L.d)(i,r,1,s).children,t=a;expect(e).to.deep.equal(t)})),it("should return a null data entries for a survey with no answers",(function(){var e=Object(L.d)(i,r,0,o).children,t=u;expect(e).to.deep.equal(t)})),it("should return a valid data for a survey with a repeat group",(function(){var e=Object(L.d)(l,null,0,c).children,t=p;expect(e).to.deep.equal(t)})),it("should return a valid data for a survey with nested repeat groups",(function(){var e=Object(L.d)(d,null,0,_).children,t=f;expect(e).to.deep.equal(t)})),it("should return a valid data for a survey with a matrix",(function(){var e=Object(L.d)(h,m,0,g).children,t=v;expect(e).to.deep.equal(t)})),it("should return a valid data for a survey with all kinds of groups",(function(){var e=Object(L.d)(y,b,0,k).children,t=E;expect(e).to.deep.equal(t)})),it("should return a valid data for every possible question type",(function(){var e=Object(L.d)(O,w,0,S).children,t=A;expect(e).to.deep.equal(t)})),it("should return a valid data for a matrix group inside repeat group",(function(){var e=Object(L.d)(T,R,0,j).children,t=x;expect(e).to.deep.equal(t)}))}))},921:function(e,t,n){"use strict";n.r(t);var i=[{$autoname:"start",$kuid:"RCRVJs6v8",type:"start",name:"start"},{$autoname:"end",$kuid:"Oaffb3Ce1",type:"end",name:"end"},{$autoname:"Your_place",$kuid:"ry17h97",required:!1,type:"geopoint",label:["Your place"]},{$autoname:"Your_name",$kuid:"bp66l95",required:!1,type:"text",label:["Your name"]},{$autoname:"group_breakfast",$kuid:"eu4rd78",type:"begin_group",name:"group_breakfast",label:["Breakfast"]},{$autoname:"When_did_you_eat",$kuid:"sn0ll77",required:!1,type:"time",label:["When did you eat?"]},{$autoname:"What_did_you_eat",$kuid:"lh5jq54",required:!1,type:"text",label:["What did you eat?"]},{$kuid:"/eu4rd78",type:"end_group"},{$autoname:"group_snacks",$kuid:"yq4bo29",type:"begin_repeat",name:"group_snacks",label:["Snacks during the day"]},{$autoname:"Snack_name",$kuid:"tb3mh66",required:!1,type:"text",label:["Snack name"]},{$autoname:"Time_of_consumption",$kuid:"tq2zv81",required:!1,type:"time",label:["Time of consumption"]},{$autoname:"group_nutrients",$kuid:"su3ww56",type:"begin_group",name:"group_nutrients",label:["Nutrients"]},{$autoname:"How_much_protein_was_it",$kuid:"bg5yt06",required:!1,type:"integer",label:["How much protein was it?"]},{$autoname:"How_much_H2O_was_it",$kuid:"iz5bf84",required:!1,type:"integer",label:["How much H2O was it?"]},{$kuid:"/su3ww56",type:"end_group"},{$kuid:"/yq4bo29",type:"end_repeat"},{$autoname:"group_favs",$kuid:"vy2km60",type:"begin_group",name:"group_favs",label:["Favourites"]},{$autoname:"Favourite_food",$kuid:"yt3yl96",required:!1,type:"text",label:["Favourite food"]},{$autoname:"group_favplant",$kuid:"vj5yb24",type:"begin_group",name:"group_favplant",label:["Favourite plant food"]},{$autoname:"Favourite_fruit",$kuid:"wa1gp21",required:!1,type:"text",label:["Favourite fruit"]},{$autoname:"group_favveg",$kuid:"qq1rn39",type:"begin_group",name:"group_favveg",label:["Favourite vegetables"]},{$autoname:"Favourite_carrot",$kuid:"ik3zw20",required:!1,type:"text",label:["Favourite carrot"]},{$autoname:"Favourite_potato",$kuid:"ea5uq17",required:!1,type:"text",label:["Favourite potato"]},{$kuid:"/qq1rn39",type:"end_group"},{$kuid:"/vj5yb24",type:"end_group"},{$autoname:"group_favvegan",$kuid:"oe2bb55",type:"begin_group",name:"group_favvegan",label:["Favourite vegan stuff"]},{$autoname:"Favourite_vegan_hummus",$kuid:"lk4jn23",required:!1,type:"text",label:["Favourite vegan hummus"]},{$kuid:"/oe2bb55",type:"end_group"},{$autoname:"Favourite_spiece",$kuid:"zv21a26",required:!1,type:"text",label:["Favourite spiece"]},{$kuid:"/vy2km60",type:"end_group"},{$autoname:"Comments",$kuid:"sm0pu34",required:!1,type:"text",label:["Comments"]}],r=[{name:"start",type:"start",$kuid:"yIzTq1EhT",$autoname:"start"},{name:"end",type:"end",$kuid:"vrOUh8w2q",$autoname:"end"},{name:"today",type:"today",$kuid:"eXoXxQQNi",$autoname:"today"},{name:"username",type:"username",$kuid:"plYTFwZ63",$autoname:"username"},{name:"simserial",type:"simserial",$kuid:"cDTRJ5D78",$autoname:"simserial"},{name:"subscriberid",type:"subscriberid",$kuid:"Nt06yZ7th",$autoname:"subscriberid"},{name:"deviceid",type:"deviceid",$kuid:"1W3n5pkGF",$autoname:"deviceid"},{name:"phonenumber",type:"phonenumber",$kuid:"GFKDd8m18",$autoname:"phonenumber"},{name:"group_people",type:"begin_repeat",$kuid:"fs1km00",label:["People"],$autoname:"group_people"},{type:"text",$kuid:"sr97c95",label:["First name"],required:!1,$autoname:"First_name"},{type:"end_repeat",$kuid:"/fs1km00"},{name:"group_location",type:"begin_group",$kuid:"lq0th66",label:["Location"],$autoname:"group_location"},{type:"geopoint",$kuid:"ug36q69",label:["Original location"],required:!1,$autoname:"Original_location"},{type:"geopoint",$kuid:"kw6zd49",label:["Current location"],required:!1,$autoname:"Current_location"},{type:"end_group",$kuid:"/lq0th66"},{type:"begin_score",$kuid:"rd0zi80",label:["Are you vegan?"],required:!1,$autoname:"Are_you_vegan","kobo--score-choices":"cv0ok80"},{type:"score__row",$kuid:"as5gb66",label:["Killing humans"],$autoname:"Killing_humans"},{type:"score__row",$kuid:"kv3uq84",label:["Killing nonhumans"],$autoname:"Killing_nonhumans"},{type:"end_score",$kuid:"/rd0zi80"},{type:"begin_rank",$kuid:"bj3zo95",label:["Best things in life"],required:!1,$autoname:"Best_things_in_life","kobo--rank-items":"oe89v01","kobo--rank-constraint-message":"Items cannot be selected more than once"},{type:"rank__level",$kuid:"yy8lt23",label:["1st choice"],$autoname:"_1st_choice"},{type:"rank__level",$kuid:"ll0ky89",label:["2nd choice"],$autoname:"_2nd_choice"},{type:"rank__level",$kuid:"cz6uz72",label:["3rd choice"],$autoname:"_3rd_choice"},{type:"end_rank",$kuid:"/bj3zo95"},{name:"group_crossbreeding",type:"begin_kobomatrix",$kuid:"vs75w20",label:["Crossbreeding"],$autoname:"group_crossbreeding",_isRepeat:"false",appearance:"field-list","kobo--matrix_list":"matrix_go11n34"},{hint:[""],name:"human",type:"text",$kuid:"ji8zj93",label:["Human"],required:!1,$autoname:"human",appearance:"w1"},{hint:[""],name:"nonhuman",type:"text",$kuid:"on6ec28",label:["Nonhuman"],required:!1,$autoname:"nonhuman",appearance:"w1"},{type:"end_kobomatrix",$kuid:"/vs75w20"}],s=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"surveyWithGroups","/srv/src/kpi/jsapp/js/assetUtils.mocks.es6"),__REACT_HOT_LOADER__.register(r,"surveyWithAllPossibleGroups","/srv/src/kpi/jsapp/js/assetUtils.mocks.es6")),n(13));describe("getSurveyFlatPaths",(function(){it("should return a list of paths for all questions",(function(){var e=Object(s.j)(i);expect(e).to.deep.equal({Your_place:"Your_place",Your_name:"Your_name",When_did_you_eat:"group_breakfast/When_did_you_eat",What_did_you_eat:"group_breakfast/What_did_you_eat",Snack_name:"group_snacks/Snack_name",Time_of_consumption:"group_snacks/Time_of_consumption",How_much_protein_was_it:"group_snacks/group_nutrients/How_much_protein_was_it",How_much_H2O_was_it:"group_snacks/group_nutrients/How_much_H2O_was_it",Favourite_food:"group_favs/Favourite_food",Favourite_fruit:"group_favs/group_favplant/Favourite_fruit",Favourite_carrot:"group_favs/group_favplant/group_favveg/Favourite_carrot",Favourite_potato:"group_favs/group_favplant/group_favveg/Favourite_potato",Favourite_vegan_hummus:"group_favs/group_favvegan/Favourite_vegan_hummus",Favourite_spiece:"group_favs/Favourite_spiece",Comments:"Comments"})})),it("should work with all possible group types",(function(){var e=Object(s.j)(r);expect(e).to.deep.equal({First_name:"group_people/First_name",Original_location:"group_location/Original_location",Current_location:"group_location/Current_location",Killing_humans:"Are_you_vegan/Killing_humans",Killing_nonhumans:"Are_you_vegan/Killing_nonhumans",_1st_choice:"Best_things_in_life/_1st_choice",_2nd_choice:"Best_things_in_life/_2nd_choice",_3rd_choice:"Best_things_in_life/_3rd_choice",human:"group_crossbreeding/human",nonhuman:"group_crossbreeding/nonhuman"})})),it("should work with all possible group types with groups included",(function(){var e=Object(s.j)(r,!0);expect(e).to.deep.equal({group_people:"group_people",First_name:"group_people/First_name",group_location:"group_location",Original_location:"group_location/Original_location",Current_location:"group_location/Current_location",Are_you_vegan:"Are_you_vegan",Killing_humans:"Are_you_vegan/Killing_humans",Killing_nonhumans:"Are_you_vegan/Killing_nonhumans",Best_things_in_life:"Best_things_in_life",_1st_choice:"Best_things_in_life/_1st_choice",_2nd_choice:"Best_things_in_life/_2nd_choice",_3rd_choice:"Best_things_in_life/_3rd_choice",group_crossbreeding:"group_crossbreeding",human:"group_crossbreeding/human",nonhuman:"group_crossbreeding/nonhuman"})})),it("should include groups in the output if asked to",(function(){var e=Object(s.j)(i,!0);expect(e).to.deep.equal({Your_place:"Your_place",Your_name:"Your_name",group_breakfast:"group_breakfast",When_did_you_eat:"group_breakfast/When_did_you_eat",What_did_you_eat:"group_breakfast/What_did_you_eat",group_snacks:"group_snacks",Snack_name:"group_snacks/Snack_name",Time_of_consumption:"group_snacks/Time_of_consumption",group_nutrients:"group_snacks/group_nutrients",How_much_protein_was_it:"group_snacks/group_nutrients/How_much_protein_was_it",How_much_H2O_was_it:"group_snacks/group_nutrients/How_much_H2O_was_it",group_favs:"group_favs",Favourite_food:"group_favs/Favourite_food",group_favplant:"group_favs/group_favplant",Favourite_fruit:"group_favs/group_favplant/Favourite_fruit",group_favveg:"group_favs/group_favplant/group_favveg",Favourite_carrot:"group_favs/group_favplant/group_favveg/Favourite_carrot",Favourite_potato:"group_favs/group_favplant/group_favveg/Favourite_potato",group_favvegan:"group_favs/group_favvegan",Favourite_vegan_hummus:"group_favs/group_favvegan/Favourite_vegan_hummus",Favourite_spiece:"group_favs/Favourite_spiece",Comments:"Comments"})}))}))},922:function(e,t,n){"use strict";n.r(t);var i=n(52),r=n.n(i),s={url:"http://kf.kobo.local/api/v2/assets/ag5w6923oyv5NitEW6aez3/",owner:"http://kf.kobo.local/api/v2/users/kobo/",owner__username:"kobo",parent:null,settings:{sector:{label:"Other",value:"Other"},country:{label:"United States",value:"USA"},description:"",organization:"Kobo Inc.","share-metadata":!0},asset_type:"template",summary:{geo:!1,labels:["Best thing in the world?","Person","Your name","Your age"],columns:["type","label","required","select_from_list_name","name"],languages:["English (en)","Polski (pl)"],row_count:4,default_translation:"English (en)"},content:{schema:"1",survey:[{name:"start",type:"start",$kuid:"ZJRmskGCC",$autoname:"start"},{name:"end",type:"end",$kuid:"JuoCtJWO5",$autoname:"end"},{type:"select_one",$kuid:"ri0lk77",label:["Best thing in the world?","Najlepsze na świecie?"],required:!1,$autoname:"Best_thing_in_the_world",select_from_list_name:"dp8iw04"},{name:"person",type:"begin_group",$kuid:"xl7sb31",label:["Person","Osoba"],$autoname:"person"},{type:"text",$kuid:"xw6go48",label:["Your name","Twoje imię"],required:!1,$autoname:"Your_name"},{type:"integer",$kuid:"wd3rh84",label:["Your age","Twój wiek"],required:!1,$autoname:"Your_age"},{type:"end_group",$kuid:"/xl7sb31"}],choices:[{name:"peace",$kuid:"7grWIZ8bE",label:["Peace","Pokój"],list_name:"dp8iw04",$autovalue:"peace"},{name:"love",$kuid:"I4x3DFdQl",label:["Love","Miłość"],list_name:"dp8iw04",$autovalue:"love"},{name:"understanding",$kuid:"klWY60huh",label:["Understanding","Zrozumienie"],list_name:"dp8iw04",$autovalue:"understanding"}],settings:{default_language:"English (en)"},translated:["label"],translations:["English (en)","Polski (pl)"]},uid:"ag5w6923oyv5NitEW6aez3",kind:"asset",name:"Test template"},o={url:"http://kf.kobo.local/api/v2/assets/ag5w6923oyv5NitEW6aez3/",owner:"http://kf.kobo.local/api/v2/users/kobo/",owner__username:"kobo",parent:null,settings:{sector:{label:"Other",value:"Other"},country:{label:"United States",value:"USA"},description:"",organization:"Kobo Inc.","share-metadata":!0},asset_type:"template",summary:{geo:!1,labels:["Best thing in the world?","Person","Your name","Your age"],columns:["type","label","required","select_from_list_name","name"],languages:["English (en)","Polski (pl)"],row_count:4,default_translation:"English (en)"},content:{schema:"1",survey:[{name:"start",type:"start",$kuid:"ZJRmskGCC",$autoname:"start"},{name:"end",type:"end",$kuid:"JuoCtJWO5",$autoname:"end"},{type:"select_one",$kuid:"ri0lk77",label:["Best thing in the world?","Najlepsze na świecie?"],required:!1,$autoname:"Best_thing_in_the_world",select_from_list_name:"dp8iw04","kobo--locking-profile":"lock2"},{name:"person",type:"begin_group",$kuid:"xl7sb31",label:["Person","Osoba"],$autoname:"person","kobo--locking-profile":"lock2"},{type:"text",$kuid:"xw6go48",label:["Your name","Twoje imię"],required:!1,$autoname:"Your_name"},{type:"integer",$kuid:"wd3rh84",label:["Your age","Twój wiek"],required:!1,$autoname:"Your_age","kobo--locking-profile":"mycustomlock1"},{type:"end_group",$kuid:"/xl7sb31"}],choices:[{name:"peace",$kuid:"7grWIZ8bE",label:["Peace","Pokój"],list_name:"dp8iw04",$autovalue:"peace"},{name:"love",$kuid:"I4x3DFdQl",label:["Love","Miłość"],list_name:"dp8iw04",$autovalue:"love"},{name:"understanding",$kuid:"klWY60huh",label:["Understanding","Zrozumienie"],list_name:"dp8iw04",$autovalue:"understanding"}],"kobo--locking-profiles":[{name:"mycustomlock1",restrictions:["choice_add","choice_delete","choice_edit","question_settings_edit","group_label_edit","group_question_order_edit","group_add","question_order_edit"]},{name:"lock2",restrictions:["question_delete","group_delete","language_edit"]}],settings:{default_language:"English (en)","kobo--locking-profile":"mycustomlock1"},translated:["label"],translations:["English (en)","Polski (pl)"]},uid:"ag5w6923oyv5NitEW6aez3",kind:"asset",name:"Test template"},a=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"simpleTemplate","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.mocks.es6"),__REACT_HOT_LOADER__.register(o,"simpleTemplateLocked","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.mocks.es6")),n(22)),u=n(23),l=n(13),c=n(2),p=r()(o);p.content.settings[u.LOCK_ALL_PROP_NAME]=!0;var d=r()(s);d.content.settings[u.LOCK_ALL_PROP_NAME]=!0;var _=r()(o);delete _.content.settings[u.LOCKING_PROFILE_PROP_NAME];var f=r()(o);f.content.settings[u.LOCKING_PROFILE_PROP_NAME]="nonexistent_lock_1";var h=r()(s);h.content.settings["kobo--locking-profile"]="nonexistent_lock_1",h.content.survey[2]["kobo--locking-profile"]="nonexistent_lock_2",describe("hasRowRestriction",(function(){it("should be false for all restriction for rows in un-locked template",(function(){s.content.survey.forEach((function(e){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(t){var n=Object(a.hasRowRestriction)(s.content,Object(l.i)(e),t);expect(n).to.equal(!1)}))}))})),it("should be true for all restrictions for rows in lock_all template",(function(){d.content.survey.forEach((function(e){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(t){var n=Object(a.hasRowRestriction)(d.content,Object(l.i)(e),t);expect(n).to.equal(!0)}))}))})),it("should be true for all restrictions for rows in lock_all template regardless of locking profile",(function(){p.content.survey.forEach((function(e){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(t){var n=Object(a.hasRowRestriction)(p.content,Object(l.i)(e),t);expect(n).to.equal(!0)}))}))})),it("should check row restriction in locked template",(function(){var e={start:[],end:[],Best_thing_in_the_world:["question_delete","group_delete","language_edit"],person:["question_delete","group_delete","language_edit"],Your_name:[],Your_age:["choice_add","choice_delete","choice_edit","question_settings_edit","group_label_edit","group_question_order_edit","group_add","question_order_edit"]};Object.keys(e).forEach((function(t){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(n){var i=Object(a.hasRowRestriction)(o.content,t,n);expect(i).to.equal(e[t].includes(n))}))}))}))})),describe("hasAssetRestriction",(function(){it("should say no restrictions for un-locked template",(function(){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(e){var t=Object(a.hasAssetRestriction)(s.content,e);expect(t).to.equal(!1)}))})),it("should be true for all restrictions for lock_all template",(function(){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(e){var t=Object(a.hasAssetRestriction)(d.content,e);expect(t).to.equal(!0)}))})),it("should be true for all restrictions for lock_all template regardless of locking profiles",(function(){Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(e){var t=Object(a.hasAssetRestriction)(p.content,e);expect(t).to.equal(!0)}))})),it("should check asset restrictions in locked template",(function(){var e=["choice_add","choice_delete","choice_edit","question_settings_edit","group_label_edit","group_question_order_edit","group_add","question_order_edit"];Object.keys(u.LOCKING_RESTRICTIONS).forEach((function(t){var n=Object(a.hasAssetRestriction)(o.content,t);expect(n).to.equal(e.includes(t))}))}))})),describe("getLockingProfile",(function(){it("should find custom locking profile",(function(){var e=Object(a.getLockingProfile)(o.content,"mycustomlock1");expect(e).to.deep.equal({index:0,name:"mycustomlock1",restrictions:["choice_add","choice_delete","choice_edit","question_settings_edit","group_label_edit","group_question_order_edit","group_add","question_order_edit"]})})),it("should return proper index for found locking profile",(function(){var e=Object(a.getLockingProfile)(o.content,"lock2");expect(e).to.deep.equal({index:1,name:"lock2",restrictions:["question_delete","group_delete","language_edit"]})})),it("should return null for not found",(function(){var e=Object(a.getLockingProfile)(o.content,"nothingness_approaching");expect(e).to.equal(null)}))})),describe("getRowLockingProfile",(function(){it("should find custom locking profile for a Row",(function(){var e=Object(a.getRowLockingProfile)(o.content,"Your_age");expect(e).to.deep.equal({index:0,name:"mycustomlock1",restrictions:["choice_add","choice_delete","choice_edit","question_settings_edit","group_label_edit","group_question_order_edit","group_add","question_order_edit"]})})),it("should return null for not found",(function(){var e=Object(a.getRowLockingProfile)(o.content,"Your_name");expect(e).to.equal(null)}))})),describe("getAssetLockingProfile",(function(){it("should find custom locking profile for the asset",(function(){var e=Object(a.getAssetLockingProfile)(o.content);expect(e).to.deep.equal({index:0,name:"mycustomlock1",restrictions:["choice_add","choice_delete","choice_edit","question_settings_edit","group_label_edit","group_question_order_edit","group_add","question_order_edit"]})})),it("should return null for locking profile that has no definition",(function(){var e=Object(a.getAssetLockingProfile)(f.content);expect(e).to.equal(null)}))})),describe("isRowLocked",(function(){it("should be false for all rows in un-locked template",(function(){s.content.survey.forEach((function(e){var t=Object(a.isRowLocked)(s.content,Object(l.i)(e));expect(t).to.equal(!1)}))})),it("should be true for all rows in lock_all template",(function(){d.content.survey.forEach((function(e){var t=Object(a.isRowLocked)(d.content,Object(l.i)(e));expect(t).to.equal(!0)}))})),it("should be true for all rows in lock_all template regardless of locking profile",(function(){p.content.survey.forEach((function(e){var t=Object(a.isRowLocked)(p.content,Object(l.i)(e));expect(t).to.equal(!0)}))})),it("should check row being locked in locked template",(function(){var e={start:!1,end:!1,Best_thing_in_the_world:!0,person:!0,Your_name:!1,Your_age:!0};Object.keys(e).forEach((function(t){var n=Object(a.isRowLocked)(o.content,t);expect(n).to.equal(e[t])}))}))})),describe("isAssetLocked",(function(){it("should be false for un-locked template",(function(){var e=Object(a.isAssetLocked)(s.content);expect(e).to.equal(!1)})),it("should be true for template with some locking",(function(){var e=Object(a.isAssetLocked)(o.content);expect(e).to.equal(!0)})),it("should be true for template with lock_all",(function(){var e=Object(a.isAssetLocked)(d.content);expect(e).to.equal(!0)})),it("should be false if rows have locking profiles, but asset doesn't",(function(){var e=Object(a.isAssetLocked)(h.content);expect(e).to.equal(!1)})),it("should be false if rows have locking profile, but it's definition doesn't exist in asset",(function(){var e=Object(a.isAssetLocked)(h.content);expect(e).to.equal(!1)}))})),describe("hasAssetAnyLocking",(function(){it("should be false for un-locked template",(function(){var e=Object(a.hasAssetAnyLocking)(s.content);expect(e).to.equal(!1)})),it("should be true for template with some locking",(function(){var e=Object(a.hasAssetAnyLocking)(o.content);expect(e).to.equal(!0)})),it("should be true for template with lock_all",(function(){var e=Object(a.hasAssetAnyLocking)(d.content);expect(e).to.equal(!0)})),it("should be true if rows have locking profiles, but asset doesn't",(function(){var e=Object(a.hasAssetAnyLocking)(f.content);expect(e).to.equal(!0)})),it("should be false if rows have locking profile, but it's definition doesn't exist in asset",(function(){var e=Object(a.hasAssetAnyLocking)(h.content);expect(e).to.equal(!1)}))})),describe("isAssetAllLocked",(function(){it("should be false for un-locked template",(function(){var e=Object(a.isAssetAllLocked)(s.content);expect(e).to.equal(!1)})),it("should be false for template with some locking",(function(){var e=Object(a.isAssetAllLocked)(o.content);expect(e).to.equal(!1)})),it("should be true for template with lock_all",(function(){var e=Object(a.isAssetAllLocked)(d.content);expect(e).to.equal(!0)})),it("should be false for template without content",(function(){var e=Object(a.isAssetAllLocked)({});expect(e).to.equal(!1)}))})),describe("isAssetLockable",(function(){it("should be true only for survey",(function(){expect(Object(a.isAssetLockable)(c.ASSET_TYPES.question.id)).to.equal(!1),expect(Object(a.isAssetLockable)(c.ASSET_TYPES.block.id)).to.equal(!1),expect(Object(a.isAssetLockable)(c.ASSET_TYPES.template.id)).to.equal(!1),expect(Object(a.isAssetLockable)(c.ASSET_TYPES.survey.id)).to.equal(!0),expect(Object(a.isAssetLockable)(c.ASSET_TYPES.collection.id)).to.equal(!1)}))})),describe("getQuestionFeatures",(function(){it("should return null if question does not exist",(function(){var e=Object(a.getQuestionFeatures)(o.content,"nonexistent_question");expect(e).to.equal(null)})),it("should return only cans if question is not locked",(function(){var e=Object(a.getQuestionFeatures)(s.content,"Best_thing_in_the_world");expect(e.cans.length).to.equal(u.QUESTION_RESTRICTIONS.length),expect(e.cants.length).to.equal(0)})),it("should return some cans and cants if question is locked",(function(){var e=Object(a.getQuestionFeatures)(o.content,"Best_thing_in_the_world");expect(e.cans.length).to.equal(u.QUESTION_RESTRICTIONS.length-1),expect(e.cants.length).to.equal(1)})),it("should return only cants if form is fully locked",(function(){var e=Object(a.getQuestionFeatures)(p.content,"Best_thing_in_the_world");expect(e.cans.length).to.equal(0),expect(e.cants.length).to.equal(u.QUESTION_RESTRICTIONS.length)}))})),describe("getGroupFeatures",(function(){it("should return null if group does not exist",(function(){var e=Object(a.getGroupFeatures)(o.content,"nonexistent_group");expect(e).to.equal(null)})),it("should return only cans if group is not locked",(function(){var e=Object(a.getGroupFeatures)(s.content,"person");expect(e.cans.length).to.equal(u.GROUP_RESTRICTIONS.length),expect(e.cants.length).to.equal(0)})),it("should return some cans and cants if group is locked",(function(){var e=Object(a.getGroupFeatures)(o.content,"person");expect(e.cans.length).to.equal(u.GROUP_RESTRICTIONS.length-1),expect(e.cants.length).to.equal(1)})),it("should return only cants if form is fully locked",(function(){var e=Object(a.getGroupFeatures)(p.content,"person");expect(e.cans.length).to.equal(0),expect(e.cants.length).to.equal(u.GROUP_RESTRICTIONS.length)}))})),describe("getFormFeatures",(function(){it("should return only cans if form is not locked",(function(){var e=Object(a.getFormFeatures)(s.content);expect(e.cans.length).to.equal(u.FORM_RESTRICTIONS.length),expect(e.cants.length).to.equal(0)})),it("should return some cans and cants if form is locked",(function(){var e=Object(a.getFormFeatures)(o.content);expect(e.cans.length).to.equal(u.FORM_RESTRICTIONS.length-2),expect(e.cants.length).to.equal(2)})),it("should return only cants if form is fully locked",(function(){var e=Object(a.getFormFeatures)(p.content);expect(e.cans.length).to.equal(0),expect(e.cants.length).to.equal(u.FORM_RESTRICTIONS.length)}))}));"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"simpleTemplateLockedWithAll","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.tests.es6"),__REACT_HOT_LOADER__.register(d,"simpleTemplateWithAll","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.tests.es6"),__REACT_HOT_LOADER__.register(_,"simpleTemplateLockedRowsOnly","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.tests.es6"),__REACT_HOT_LOADER__.register(f,"simpleTemplateLockedFormUndef","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.tests.es6"),__REACT_HOT_LOADER__.register(h,"simpleTemplateLockedRowUndef","/srv/src/kpi/jsapp/js/components/locking/lockingUtils.tests.es6"))},923:function(e,t,n){"use strict";n.r(t);var i=n(56),r=n(24),s={count:11,next:null,previous:null,results:[{url:"/api/v2/permissions/add_submissions/",codename:"add_submissions",implied:["/api/v2/permissions/view_asset/"],contradictory:[],name:"Can submit data to asset"},{url:"/api/v2/permissions/change_asset/",codename:"change_asset",implied:["/api/v2/permissions/view_asset/"],contradictory:[],name:"Can change asset"},{url:"/api/v2/permissions/change_submissions/",codename:"change_submissions",implied:["/api/v2/permissions/view_asset/","/api/v2/permissions/view_submissions/","/api/v2/permissions/add_submissions/"],contradictory:["/api/v2/permissions/partial_submissions/"],name:"Can modify submitted data for asset"},{url:"/api/v2/permissions/delete_submissions/",codename:"delete_submissions",implied:["/api/v2/permissions/view_asset/","/api/v2/permissions/view_submissions/"],contradictory:["/api/v2/permissions/partial_submissions/"],name:"Can delete submitted data for asset"},{url:"/api/v2/permissions/manage_asset.json",codename:"manage_asset",implied:["/api/v2/permissions/delete_submissions/","/api/v2/permissions/change_submissions/","/api/v2/permissions/validate_submissions/","/api/v2/permissions/view_asset/","/api/v2/permissions/change_asset/","/api/v2/permissions/view_submissions/","/api/v2/permissions/add_submissions/"],contradictory:["/api/v2/permissions/partial_submissions/"],name:"Can manage all aspects of asset"},{url:"/api/v2/permissions/partial_submissions/",codename:"partial_submissions",implied:["/api/v2/permissions/view_asset/"],contradictory:["/api/v2/permissions/view_submissions/","/api/v2/permissions/change_submissions/","/api/v2/permissions/validate_submissions/"],name:"Can make partial actions on submitted data for asset for specific users"},{url:"/api/v2/permissions/validate_submissions/",codename:"validate_submissions",implied:["/api/v2/permissions/view_asset/","/api/v2/permissions/view_submissions/"],contradictory:["/api/v2/permissions/partial_submissions/"],name:"Can validate submitted data asset"},{url:"/api/v2/permissions/view_asset/",codename:"view_asset",implied:[],contradictory:[],name:"Can view asset"},{url:"/api/v2/permissions/view_submissions/",codename:"view_submissions",implied:["/api/v2/permissions/view_asset/"],contradictory:["/api/v2/permissions/partial_submissions/"],name:"Can view submitted data for asset"}]},o={count:7,next:null,previous:null,results:[{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pTi9qyEax49ZA5RP9KnNHB/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/add_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pATUgtDW6v44QG4dDDpnEV/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pUUcqTtQ6FgEDfHUiQbS24/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/p5BjfEz9JDQtQTzkT7fHA5/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/validate_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pBjfyz5Zxj95866GtEtsR2/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pQGiudmuLvN6iHEdH8dJAs/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pV9kCoWAQT9QUeV2EsTLqj/",user:"/api/v2/users/AnonymousUser/",permission:"/api/v2/permissions/view_asset/"}]},a={count:9,next:null,previous:null,results:[{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pTi9qyEax49ZA5RP9KnNHB/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/add_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pATUgtDW6v44QG4dDDpnEV/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pUUcqTtQ6FgEDfHUiQbS24/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/p5BjfEz9JDQtQTzkT7fHA5/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/validate_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pBjfyz5Zxj95866GtEtsR2/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pQGiudmuLvN6iHEdH8dJAs/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pnld7XQ1hWYJ5sOUDl4qP/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/delete_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pETvxGayAJwvPaCnt5biVD/",user:"/api/v2/users/olivier/",permission:"/api/v2/permissions/view_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/p6KekjhZabd7ao9MBQwN7X/",user:"/api/v2/users/john/",permission:"/api/v2/permissions/view_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pxp7BPnP9fohF5ZoH5Uwfa/",user:"/api/v2/users/john/",permission:"/api/v2/permissions/view_asset/"}]},u={count:8,next:null,previous:null,results:[{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pTi9qyEax49ZA5RP9KnNHB/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/add_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pATUgtDW6v44QG4dDDpnEV/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pUUcqTtQ6FgEDfHUiQbS24/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/p5BjfEz9JDQtQTzkT7fHA5/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/validate_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pBjfyz5Zxj95866GtEtsR2/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pQGiudmuLvN6iHEdH8dJAs/",user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_submissions/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/p6KekjhZabd7ao9MBQwN7X/",user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/view_asset/"},{url:"/api/v2/assets/arMB2dNgwewktv954wmo9e/permission-assignments/pxp7BPnP9fohF5ZoH5Uwfa/",user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/partial_submissions/",partial_permissions:[{url:"/api/v2/permissions/view_submissions/",filters:[{_submitted_by:{$in:["john","olivier"]}}]}]}]},l={permissions:s,assetWithAnonymousUser:o,assetWithMultipleUsers:a,assetWithPartial:u},c=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"permissions","/srv/src/kpi/jsapp/js/components/permissions/permissionsMocks.es6"),__REACT_HOT_LOADER__.register(o,"assetWithAnonymousUser","/srv/src/kpi/jsapp/js/components/permissions/permissionsMocks.es6"),__REACT_HOT_LOADER__.register(a,"assetWithMultipleUsers","/srv/src/kpi/jsapp/js/components/permissions/permissionsMocks.es6"),__REACT_HOT_LOADER__.register(u,"assetWithPartial","/srv/src/kpi/jsapp/js/components/permissions/permissionsMocks.es6"),__REACT_HOT_LOADER__.register(l,"endpoints","/srv/src/kpi/jsapp/js/components/permissions/permissionsMocks.es6")),n(2));describe("permParser",(function(){beforeEach((function(){r.a.setPermissions(l.permissions.results),c.default.ROOT_URL=""})),describe("parseBackendData",(function(){it("should hide anonymous user permissions from output by default",(function(){chai.expect(l.assetWithAnonymousUser.results.length).to.equal(7);var e=i.a.parseBackendData(l.assetWithAnonymousUser.results,l.assetWithAnonymousUser.results[0].user);chai.expect(e.length).to.equal(1),chai.expect(e[0].user.name).to.equal("kobo")})),it("should show anonymous user permissions from output when ordered to",(function(){chai.expect(l.assetWithAnonymousUser.results.length).to.equal(7);var e=i.a.parseBackendData(l.assetWithAnonymousUser.results,l.assetWithAnonymousUser.results[0].user,!0);chai.expect(e.length).to.equal(2),chai.expect(e[0].user.name).to.equal("kobo"),chai.expect(e[1].user.name).to.equal(c.default.ANON_USERNAME)})),it("should group permissions by users properly",(function(){chai.expect(l.assetWithMultipleUsers.results.length).to.equal(10);var e=i.a.parseBackendData(l.assetWithMultipleUsers.results,l.assetWithMultipleUsers.results[0].user);chai.expect(e.length).to.equal(3),chai.expect(e[0].user.name).to.equal("kobo"),chai.expect(e[0].permissions.length).to.equal(7),chai.expect(e[1].user.name).to.equal("john"),chai.expect(e[1].permissions.length).to.equal(2),chai.expect(e[2].user.name).to.equal("olivier"),chai.expect(e[2].permissions.length).to.equal(1)}))})),describe("sortParseBackendOutput",(function(){it("should sort alphabetically with owner always first",(function(){var e=i.a.sortParseBackendOutput([{user:{url:"/api/v2/users/frank",isOwner:!1}},{user:{url:"/api/v2/users/bob",isOwner:!1}},{user:{url:"/api/v2/users/diana",isOwner:!0}},{user:{url:"/api/v2/users/arthur",isOwner:!1}},{user:{url:"/api/v2/users/esther",isOwner:!1}},{user:{url:"/api/v2/users/christian",isOwner:!1}}]);chai.expect(e).to.deep.equal([{user:{url:"/api/v2/users/diana",isOwner:!0}},{user:{url:"/api/v2/users/arthur",isOwner:!1}},{user:{url:"/api/v2/users/bob",isOwner:!1}},{user:{url:"/api/v2/users/christian",isOwner:!1}},{user:{url:"/api/v2/users/esther",isOwner:!1}},{user:{url:"/api/v2/users/frank",isOwner:!1}}])}))})),describe("buildFormData",(function(){it("should check proper options",(function(){var e=i.a.parseBackendData(l.assetWithMultipleUsers.results,l.assetWithMultipleUsers.results[0].user),t=i.a.buildFormData(e[1].permissions);chai.expect(t).to.deep.equal({formView:!0,submissionsView:!0})})),it("should handle partial permissions",(function(){var e=i.a.parseBackendData(l.assetWithPartial.results,l.assetWithPartial.results[0].user),t=i.a.buildFormData(e[1].permissions);chai.expect(t).to.deep.equal({formView:!0,submissionsViewPartial:!0,submissionsViewPartialUsers:["john","olivier"]})}))})),describe("parseFormData",(function(){it("should exclude all implied permissions as they are not needed",(function(){var e=i.a.parseFormData({username:"leszek",formView:!0,formEdit:!0,submissionsView:!0,submissionsViewPartial:!1,submissionsViewPartialUsers:[],submissionsAdd:!1,submissionsEdit:!1,submissionsValidate:!0});chai.expect(e).to.deep.equal([{user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/change_asset/"},{user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/validate_submissions/"}])})),it("should add partial_permissions property for partial submissions permission",(function(){var e=i.a.parseFormData({username:"leszek",formView:!0,formEdit:!1,submissionsView:!0,submissionsViewPartial:!0,submissionsViewPartialUsers:["john","olivier","eric"],submissionsAdd:!1,submissionsEdit:!1,submissionsValidate:!1});chai.expect(e).to.deep.equal([{user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/partial_submissions/",partial_permissions:[{url:"/api/v2/permissions/view_submissions/",filters:[{_submitted_by:{$in:["john","olivier","eric"]}}]}]}])}))})),describe("parseUserWithPermsList",(function(){it("should return flat list of permissions",(function(){var e=i.a.parseBackendData(l.assetWithMultipleUsers.results,l.assetWithMultipleUsers.results[0].user),t=i.a.parseUserWithPermsList(e);chai.expect(t).to.deep.equal([{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/add_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_asset/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/validate_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_asset/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/delete_submissions/"},{user:"/api/v2/users/john/",permission:"/api/v2/permissions/view_submissions/"},{user:"/api/v2/users/john/",permission:"/api/v2/permissions/view_asset/"},{user:"/api/v2/users/olivier/",permission:"/api/v2/permissions/view_asset/"}])})),it("should not omit partial permissions",(function(){var e=i.a.parseBackendData(l.assetWithPartial.results,l.assetWithPartial.results[0].user),t=i.a.parseUserWithPermsList(e);chai.expect(t).to.deep.equal([{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/add_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_asset/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/change_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/validate_submissions/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_asset/"},{user:"/api/v2/users/kobo/",permission:"/api/v2/permissions/view_submissions/"},{user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/view_asset/"},{user:"/api/v2/users/leszek/",permission:"/api/v2/permissions/partial_submissions/",partial_permissions:[{url:"/api/v2/permissions/view_submissions/",filters:[{_submitted_by:{$in:["john","olivier"]}}]}]}])}))}))}))},93:function(e,t,n){var i,r,s,o,a,u=function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},l={}.hasOwnProperty,c=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=n(20),s=n(47),r=n(40),i=n(65),(a={}).SkipLogicFactory=function(){function e(e){this.survey=e}return e.prototype.create_operator=function(e,t,n){var i;switch(e){case"text":i=new a.TextOperator(t);break;case"date":i=new a.DateOperator(t);break;case"basic":i=new a.SkipLogicOperator(t);break;case"existence":i=new a.ExistenceSkipLogicOperator(t);break;case"select_multiple":i=new a.SelectMultipleSkipLogicOperator(t);break;case"empty":return new a.EmptyOperator}return i.set("id",n),i},e.prototype.create_criterion_model=function(){return new a.SkipLogicCriterion(this,this.survey)},e.prototype.create_response_model=function(e){var t;switch(t=null,e){case"integer":t=new a.IntegerResponseModel;break;case"decimal":t=new a.DecimalResponseModel;break;default:t=new a.ResponseModel(e)}return t.set("type",e)},e}(),a.SkipLogicCriterion=function(e){function t(e,n){this.factory=e,this.survey=n,t.__super__.constructor.call(this)}return u(t,e),t.prototype.serialize=function(){var e;if(null!=(e=this.get("response_value"))&&null!=this.get("operator")&&null!=this.get("question_cid")&&!1!==e.isValid()&&null!=e.get("value")&&this._get_question()){this._get_question().finalize();var t=this._get_question().getValue("name");return this.get("operator").serialize(t,e.get("value"))}return""},t.prototype._get_question=function(){return this.survey.findRowByCid(this.get("question_cid"),{includeGroups:!0})},t.prototype.change_question=function(e){var t,n,i,r,s;if(t=(null!=(i=this._get_question())&&"function"==typeof i.get_type?i.get_type():void 0)||{name:null},this.set("question_cid",e),n=this._get_question().get_type(),r=this.get("operator").get_id(),c.call(n.operators,r)<0?this.change_operator(n.operators[0]):t.name!==n.name&&this.change_operator(this.get("operator").get_value()),null==this.get("operator").get_type().response_type&&this._get_question().response_type!==(null!=(s=this.get("response_value"))?s.get_type():void 0))return this.change_response(null!=(response_model=this.get("response_value"))?this._get_question()._isSelectQuestion()?response_model.get("cid"):response_model.get("value"):"")},t.prototype.change_operator=function(e){var t,n,r,s,o,a,u;if(t=!1,(e=+e)<0&&(t=!0,e*=-1),r=this._get_question().get_type(),c.call(r.operators,e)>=0)return a=(u=i.operator_types[e-1]).symbol[u.parser_name[+t]],n=this.factory.create_operator("equality"===u.type?r.equality_operator_type:u.type,a,e),this.set("operator",n),(u.response_type||r.response_type)!==(null!=(s=this.get("response_value"))?s.get("type"):void 0)?this.change_response((null!=(o=this.get("response_value"))?o.get(this._get_question()._isSelectQuestion()?"cid":"value"):void 0)||""):void 0},t.prototype.get_correct_type=function(){return this.get("operator").get_type().response_type||this._get_question().get_type().response_type},t.prototype.set_option_names=function(e){o.each(e,(function(e){if(null==e.get("name"))return e.set("name",r.sluggify(e.get("label")))}))},t.prototype.change_response=function(e){var t,n,i,r;if((r=this.get("response_value"))&&r.get("type")===this.get_correct_type()||(r=this.factory.create_response_model(this.get_correct_type()),this.set("response_value",r)),"dropdown"===this.get_correct_type()){i=r?r.get("cid"):null;var s=this._get_question().getList();return r.set("choicelist",s),n=s.options.models,this.set_option_names(n),t=o.map(n,(function(e){return e.cid})),c.call(t,e)>=0?r.set_value(e):c.call(t,i)>=0?r.set_value(i):r.set_value(n[0].cid)}return r.set_value(e)},t}(s.Model),a.Operator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.serialize=function(e,t){throw new Error("Not Implemented")},t.prototype.get_value=function(){var e;return e="",this.get("is_negated")&&(e="-"),e+this.get("id")},t.prototype.get_type=function(){return i.operator_types[this.get("id")-1]},t.prototype.get_id=function(){return this.get("id")},t}(s.Model),a.EmptyOperator=function(e){function t(){t.__super__.constructor.call(this),this.set("id",0),this.set("is_negated",!1)}return u(t,e),t.prototype.serialize=function(){return""},t}(a.Operator),a.SkipLogicOperator=function(e){function t(e){t.__super__.constructor.call(this),this.set("symbol",e),this.set("is_negated",["!=","<","<="].indexOf(e)>-1)}return u(t,e),t.prototype.serialize=function(e,t){return"${"+e+"} "+this.get("symbol")+" "+t},t}(a.Operator),a.TextOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.serialize=function(e,n){return t.__super__.serialize.call(this,e,"'"+n.replace(/'/g,"\\'")+"'")},t}(a.SkipLogicOperator),a.DateOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.serialize=function(e,n){return-1==n.indexOf("date")&&(n="date('"+n+"')"),t.__super__.serialize.call(this,e,n)},t}(a.SkipLogicOperator),a.ExistenceSkipLogicOperator=function(e){function t(e){t.__super__.constructor.call(this,e),this.set("is_negated","="===e)}return u(t,e),t.prototype.serialize=function(e){return t.__super__.serialize.call(this,e,"''")},t}(a.SkipLogicOperator),a.SelectMultipleSkipLogicOperator=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.serialize=function(e,t){var n;return n="selected(${"+e+"}, '"+t+"')",this.get("is_negated")?"not("+n+")":n},t}(a.SkipLogicOperator),a.ResponseModel=function(e){function t(e){t.__super__.constructor.call(this),"dropdown"===e&&(this._set_value=this.set_value,this.set_value=function(e){var t;(t=this.get("choicelist").options.get(e))&&(this._set_value(t.get("name")),this.set("cid",e))})}return u(t,e),t.prototype.get_type=function(){return this.get("type")},t.prototype.set_value=function(e){return this.set("value",e,{validate:!0})},t}(s.Model),a.IntegerResponseModel=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.validation={value:{pattern:/^-?\d+$/,msg:"Number must be integer"}},t.prototype.set_value=function(e){return""===e&&(e=void 0),this.set("value",e,{validate:!!e})},t}(a.ResponseModel),a.DecimalResponseModel=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.validation={value:{pattern:"number",msg:"Number must be decimal"}},t.prototype.set_value=function(e){function t(){return"number"!=typeof e}return void 0===e||""===e?e=null:(t()&&(e=+(e=e.replace(/\s/g,""))||e),t()&&(e=+e.replace(",",".")||e),t()&&(e=e.lastIndexOf(",")>e.lastIndexOf(".")?+e.replace(/\./g,"").replace(",","."):+e.replace(",",""))),this.set("value",e,{validate:!0})},t}(a.ResponseModel),a.DateResponseModel=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.validation={value:{pattern:/date\(\'\d{4}-\d{2}-\d{2}\'\)/}},t.prototype.set_value=function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)&&(e="date('"+e+"')"),this.set("value",e,{validate:!0})},t}(a.ResponseModel),e.exports=a}});
//# sourceMappingURL=browsertests-d72f2cc7e86e4413c7f7.js.map